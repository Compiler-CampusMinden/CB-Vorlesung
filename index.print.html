<!DOCTYPE html>
<html lang="de-DE" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.135.0">
    <meta name="generator" content="Relearn 6.4.1">
    <meta name="description" content="Kursbeschreibung Der Compiler ist das wichtigste Werkzeug in der Informatik. In der Königsdisziplin der Informatik schließt sich der Kreis, hier kommen die unterschiedlichen Algorithmen und Datenstrukturen und Programmiersprachenkonzepte zur Anwendung.
In diesem Modul geht es um ein grundlegendes Verständnis für die wichtigsten Konzepte im Compilerbau. Wir schauen uns dazu relevante aktuelle Tools und Frameworks an und setzen diese bei der Erstellung eines kleinen Compiler-Frontends für C&#43;&#43; ein.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)">
    <meta name="twitter:description" content="Kursbeschreibung Der Compiler ist das wichtigste Werkzeug in der Informatik. In der Königsdisziplin der Informatik schließt sich der Kreis, hier kommen die unterschiedlichen Algorithmen und Datenstrukturen und Programmiersprachenkonzepte zur Anwendung.
In diesem Modul geht es um ein grundlegendes Verständnis für die wichtigsten Konzepte im Compilerbau. Wir schauen uns dazu relevante aktuelle Tools und Frameworks an und setzen diese bei der Erstellung eines kleinen Compiler-Frontends für C&#43;&#43; ein.">
    <meta property="og:url" content="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html">
    <meta property="og:title" content="IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)">
    <meta property="og:description" content="Kursbeschreibung Der Compiler ist das wichtigste Werkzeug in der Informatik. In der Königsdisziplin der Informatik schließt sich der Kreis, hier kommen die unterschiedlichen Algorithmen und Datenstrukturen und Programmiersprachenkonzepte zur Anwendung.
In diesem Modul geht es um ein grundlegendes Verständnis für die wichtigsten Konzepte im Compilerbau. Wir schauen uns dazu relevante aktuelle Tools und Frameworks an und setzen diese bei der Erstellung eines kleinen Compiler-Frontends für C&#43;&#43; ein.">
    <meta property="og:locale" content="de_DE">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)">
    <meta itemprop="description" content="Kursbeschreibung Der Compiler ist das wichtigste Werkzeug in der Informatik. In der Königsdisziplin der Informatik schließt sich der Kreis, hier kommen die unterschiedlichen Algorithmen und Datenstrukturen und Programmiersprachenkonzepte zur Anwendung.
In diesem Modul geht es um ein grundlegendes Verständnis für die wichtigsten Konzepte im Compilerbau. Wir schauen uns dazu relevante aktuelle Tools und Frameworks an und setzen diese bei der Erstellung eines kleinen Compiler-Frontends für C&#43;&#43; ein.">
    <meta itemprop="wordCount" content="3135">
    <title>IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)</title>
    <link href="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html" rel="canonical" type="text/html" title="IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)">

    

    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/images/logo.png?1739788418" rel="icon" type="image/png">

    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/fontawesome-all.min.css?1739788418" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/fontawesome-all.min.css?1739788418" rel="stylesheet"></noscript>
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/nucleus.css?1739788418" rel="stylesheet">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/auto-complete.css?1739788418" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/auto-complete.css?1739788418" rel="stylesheet"></noscript>
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/perfect-scrollbar.min.css?1739788418" rel="stylesheet">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/fonts.css?1739788418" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/fonts.css?1739788418" rel="stylesheet"></noscript>
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/theme.css?1739788418" rel="stylesheet">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/theme-auto.css?1739788418" rel="stylesheet" id="R-variant-style">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/chroma-auto.css?1739788418" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/variant.css?1739788418" rel="stylesheet">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/print.css?1739788418" rel="stylesheet" media="print">
    <link href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/css/format-print.css?1739788418" rel="stylesheet">
    <script src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/js/variant.js?1739788418"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='.';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/www.hsbi.de\/elearning\/data\/FH-Bielefeld\/lm_data\/lm_1360443';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.index_js_url="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.search.js?1739788418";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'zen-light', 'zen-dark', 'relearn-bright', 'relearn-light', 'relearn-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><style type="text/css">

 
.center {
    align-content: center;
    text-align: center;
    margin: auto;
}
.alert {
    color: #ff3333;
}
.bsp {
    padding: 0.05cm;
    border-width: 0.05cm;
    border-style: solid;
    border-color: #ddd;
    background-color: #ddd;
    border-radius: 25px;
    float: right;
}
.cbox {
    padding: 0.2cm;
    border-width: 0.1cm;
    border-style: solid;
    border-color: #4070a0;
    background-color: #f2f2f2;
    margin: auto;
    width: 60%;
    text-align: center;
    overflow: auto;
}
.blueArrow {
    color: #4070a0;
    font-family: "Courier New", "Courier", monospace;
    font-weight: bold;
}
.origin {
    background-color: #ededed;
    font-size: 0.8em;
}
.showme {
    background-color: #ededed;
    font-size: 0.8em;
}


 
.tldr {
    background: #dbe4ed;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
.recap {
    
    
   margin: 4px 0px 26px 0px;
}
.bib {
    background: #dbe4ed;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
.outcomes {
    background: #d9e9d5;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
.quizzes {
    background: #d9e9d5;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
.challenges {
    background: #ebe4d6;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
.assignments {
    background: #ebe4d6;
    padding: 12px;
    margin: 4px 0px 26px 0px;
}
h1.tldr, h1.recap, h1.bib, h1.outcomes, h1.quizzes, h1.challenges, h1.assignments {
    padding: 0px;
}


 
.noJsAlert {
    padding: 20px;
    background-color: #f44336;  
    color: white;
    margin-bottom: 15px;
}


 
.embed-video-player {
    position: relative;
    padding-bottom: 56%;
    height: 0;
    overflow: hidden;
}
.youtube-player {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border:0;
}


 
#header-wrapper {
    padding:0.6rem;
}


 
#shortcuts {
    padding-top: 2.0rem;
}


 
#chapter p {
    text-align: left;
}


 
figcaption h4 {
    margin-top:-2.5rem;
}
.border1 {
    border:1px solid black;
}

 
td ul, td ol {
    margin: 0 0 1rem 0.5rem;
    padding: 0 0 0 0.5rem;
}

 
h1 { font-size:2.8rem !important;}
h2 { font-size:2.2rem; margin:1.2rem 0}
h3 { font-size:1.9rem; text-align:left !important; font-weight:400 !important;}
h4 { font-size:1.6rem}
h5 { font-size:1.3rem}
h6 { font-size:1rem}

h2 {
    width:100% !important;
    border-bottom:1px solid #5e5e5e !important;
    padding-bottom: 2px;
}
.tldr h2, .recap h2, .bib h2, .outcomes h2, .quizzes h2, .challenges h2, .assignments h2 {
    margin:0.5rem 0
}

.btn-crossreference, .btn-crossreference:hover {
    cursor: initial;
}

</style>

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <span class="topbar-breadcrumbs highlightable">
            IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)
          </span>
          <div class="topbar-area topbar-area-end" data-area="end">
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="home">
            <header class="headline">
            </header>

<h1 id="ifm-31-po23--ifm-521-po18-compilerbau-winter-202425">IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)</h1>

<p><a href="#R-image-e833b145336b5a8dd7319b606d0726ef" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/architektur_cb.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e833b145336b5a8dd7319b606d0726ef"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/architektur_cb.png?width=80%25&height=auto"></a></p>
<h2 id="kursbeschreibung">Kursbeschreibung</h2>
<p>Der Compiler ist das wichtigste Werkzeug in der Informatik. In der Königsdisziplin der
Informatik schließt sich der Kreis, hier kommen die unterschiedlichen Algorithmen und
Datenstrukturen und Programmiersprachenkonzepte zur Anwendung.</p>
<p>In diesem Modul geht es um ein grundlegendes Verständnis für die wichtigsten Konzepte
im Compilerbau. Wir schauen uns dazu relevante aktuelle Tools und Frameworks an und
setzen diese bei der Erstellung eines kleinen Compiler-Frontends für C++ ein.</p>
<h2 id="überblick-modulinhalte">Überblick Modulinhalte</h2>
<ol>
<li>Lexikalische Analyse: Scanner/Lexer
<ul>
<li>Reguläre Sprachen</li>
<li>Generierung mit ANTLR</li>
</ul>
</li>
<li>Syntaxanalyse: Parser
<ul>
<li>Kontextfreie Grammatiken (CFG)</li>
<li>LL-Parser (Top-Down-Parser)</li>
<li>Generierung mit ANTLR</li>
</ul>
</li>
<li>Semantische Analyse: Attributierte Grammatiken und Symboltabellen
<ul>
<li>Namen und Scopes</li>
<li>Typen, Klassen, Polymorphie</li>
</ul>
</li>
<li>Zwischencode: Intermediate Representation (IR), LLVM-IR</li>
<li>Backend:
<ul>
<li>LLVM</li>
<li>Interpreter: AST-Traversierung</li>
</ul>
</li>
<li>C++ als zu verarbeitende Programmiersprache</li>
</ol>
<h2 id="team">Team</h2>
<ul>
<li><a href="https://www.hsbi.de/minden/ueber-uns/personenverzeichnis/birgit-christina-george" rel="external" target="_blank">BC George</a></li>
<li><a href="https://www.hsbi.de/minden/ueber-uns/personenverzeichnis/carsten-gips" rel="external" target="_blank">Carsten Gips</a> (Sprechstunde nach Vereinbarung)</li>
</ul>
<h2 id="kursformat">Kursformat</h2>
<div class="tab-panel" data-tab-group="modul-po">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('modul-po','ifm-31-cb-po23-3-semester')"
    >
      <span class="tab-nav-text">IFM 3.1 CB (PO23, 3. Semester)</span>
    </button>
    <button
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('modul-po','ifm-521-cb-po18-5-semester')"
    >
      <span class="tab-nav-text">IFM 5.21 CB (PO18, 5. Semester)</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Vorlesung (2 SWS)</th>
          <th style="text-align: left">Praktikum (2 SWS)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Mi, 08:00 - 09:30 Uhr (online)</td>
          <td style="text-align: left">S3, G1: Di, 11:30 - 13:00 Uhr (online/Präsenz J101)</td>
      </tr>
      <tr>
          <td style="text-align: left">(Carsten: <em>Flipped Classroom</em>, BC: <em>Vorlesung</em>)</td>
          <td style="text-align: left">S3, G2: Fr, 14:00 - 15:30 Uhr (online/Präsenz J101)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">S3, G3: Mo, 09:15 - 10:45 Uhr (online/Präsenz J101)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">(Carsten: <em>online</em>, BC: <em>Präsenz</em>)</td>
      </tr>
  </tbody>
</table>
<p>Online-Sitzungen per Zoom (<strong>Zugangsdaten siehe <a href="https://www.hsbi.de/elearning/goto.php?target=crs_1400596&client_id=FH-Bielefeld" rel="external" target="_blank">ILIAS IFM 3.1 CB (PO23, 3. Semester)</a></strong>).
Sie <em>können</em> hierzu den Raum J101 (siehe Stundenplan) nutzen.</p>
      </div>
    </div>
    <div
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<table>
  <thead>
      <tr>
          <th style="text-align: left">Vorlesung (2 SWS)</th>
          <th style="text-align: left">Praktikum (2 SWS)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Mi, 08:00 - 09:30 Uhr (online)</td>
          <td style="text-align: left">S5, G1: Mi, 09:45 - 11:15 Uhr (online)</td>
      </tr>
      <tr>
          <td style="text-align: left">(Carsten: <em>Flipped Classroom</em>, BC: <em>Vorlesung</em>)</td>
          <td style="text-align: left">S5, G2: Mi, 09:45 - 11:15 Uhr (online)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">S5, G3: Mi, 09:45 - 11:15 Uhr (online)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">(Carsten: <em>online</em>, BC: <em>online</em>)</td>
      </tr>
  </tbody>
</table>
<p>Online-Sitzungen per Zoom (<strong>Zugangsdaten siehe <a href="https://www.hsbi.de/elearning/goto.php?target=crs_1400603&client_id=FH-Bielefeld" rel="external" target="_blank">IFM 5.21 CB (PO18, 5. Semester)</a></strong>).
Sie <em>können</em> hierzu den Raum J101 (siehe Stundenplan) nutzen.</p>
      </div>
    </div>
  </div>
</div>
<h2 id="fahrplan">Fahrplan</h2>
<div class="tab-panel" data-tab-group="modul-po">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('modul-po','ifm-31-cb-po23-3-semester')"
    >
      <span class="tab-nav-text">IFM 3.1 CB (PO23, 3. Semester)</span>
    </button>
    <button
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('modul-po','ifm-521-cb-po18-5-semester')"
    >
      <span class="tab-nav-text">IFM 5.21 CB (PO18, 5. Semester)</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="box notices cstyle note">
  <div class="box-label">
    <i class="fa-fw fas fa-exclamation-circle"></i> News
  </div>
  <div class="box-content">
<div class="expand">
  <input type="checkbox" id="R-expand-36ca034eac278760b29ceb2c5513d28e" aria-controls="R-expandcontent-36ca034eac278760b29ceb2c5513d28e">
  <label class="expand-label" for="R-expand-36ca034eac278760b29ceb2c5513d28e">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 17.02.25
  </label>
  <div id="R-expandcontent-36ca034eac278760b29ceb2c5513d28e" class="expand-content">
<p><strong>Planung nächste Prüfung Compilerbau (PO23) (27.03.25)</strong></p>
<p>Die nächste Prüfung in Compilerbau (PO23) wird am Donnerstag, den 27.03.25 zwischen
<strong>08:00 bis 18:00 Uhr</strong> stattfinden. Die Prüfung wird aus einer Station bestehen
(mündliche Prüfung mit je ca. 45 Minuten, per Zoom). Die genaue Verteilung der
Startzeiten erfolgt per Mail über das LSF ca. eine Woche vorher.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-0935d9328cb00fa906e880b0b9e170ce" aria-controls="R-expandcontent-0935d9328cb00fa906e880b0b9e170ce">
  <label class="expand-label" for="R-expand-0935d9328cb00fa906e880b0b9e170ce">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 09.01.25
  </label>
  <div id="R-expandcontent-0935d9328cb00fa906e880b0b9e170ce" class="expand-content">
<h3 id="parcoursprüfung-feedbackgespräche-am-do-3001-1530-1800-uhr">Parcoursprüfung: Feedbackgespräche am Do, 30.01., 15:30-18:00 Uhr</h3>
<p>Wir bieten am Donnerstag, 30.01.25, von 15:30 bis 18:00 Uhr Feedbackgespräche zur Bewertung
der Ergebnisse von B07 (Parcoursprüfung, Station 2) an.</p>
<p>Es ist eine vorherige eine Anmeldung im ILIAS notwendig.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-f538299c2a882c5380e1c6c87e3db4ad" aria-controls="R-expandcontent-f538299c2a882c5380e1c6c87e3db4ad">
  <label class="expand-label" for="R-expand-f538299c2a882c5380e1c6c87e3db4ad">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 08.01.25
  </label>
  <div id="R-expandcontent-f538299c2a882c5380e1c6c87e3db4ad" class="expand-content">
<h3 id="planung-parcoursprüfung-station-2-bitte-tragt-euch-als-team-im-etherpad-ein">Planung Parcoursprüfung Station 2: Bitte tragt euch als Team im Etherpad ein</h3>
<p>Wie bereits angekündigt, finden KW4 (Mo. 20.01., Di. 21.01., Fr. 24.01.) die Vorstellungen von B07
im Rahmen der Parcoursprüfung statt (Station 2). Jedes Team hat 20 Minuten für die Vorstellung der
wichtigsten Aspekte zum Projekt, danach sind 10 Minuten für Fragen und Diskussion eingeplant.</p>
<p>Bitte tragt euch bis zum 12. Januar als Team jeweils zu einem der Zeitslots im Etherpad ein. Ihr
findet den Link im ILIAS.</p>
<p>Wenn die vorgeschlagenen Termine nicht reichen sollten, meldet euch bitte zeitnah per E-Mail!</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-e447ca063886fa586883fdadd18cfb42" aria-controls="R-expandcontent-e447ca063886fa586883fdadd18cfb42">
  <label class="expand-label" for="R-expand-e447ca063886fa586883fdadd18cfb42">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 16.12.24
  </label>
  <div id="R-expandcontent-e447ca063886fa586883fdadd18cfb42" class="expand-content">
<h3 id="nachtrag-zur-anpassung-der-gewichtung-der-beiden-stationen-der-parcoursprüfung-war-2911">Nachtrag zur Anpassung der Gewichtung der beiden Stationen der Parcoursprüfung (war 29.11.)</h3>
<p>Es war ursprünglich vorgesehen, die Gesamtnote als Mittelwert der Noten der beiden
Parcours-Stationen zu berechnen: Gewichtung 50% (Station I) und 50% (Station II).</p>
<p>Am 29.11. haben wir auf vielfachen Wunsch hin die Gewichtung der Stationen der
Parcoursprüfung angepasst: Gewichtung 33 Punkte (Station I) und 50 Punkte (Station II).</p>
<p>Um eine potentielle Benachteiligung zu vermeiden, werden wir eine individuelle
Günstigerprüfung vornehmen: Wir werden für jede Person jeweils beide Verhältnisse
berechnen und automatisch die bessere Note werten.</p>
<p>Zusätzlich werden für Station I 3 Punkte Überhang gewährt. Von den 33 maximal
erreichbaren Punkten werden 30 Punkte als 100% gewertet, darüber hinausgehende
Punkte bleiben als Bonuspunkte erhalten.</p>
<p>Dies gilt für die Prüfung im ersten Zeitraum.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-035724460ec03d77b972b9bde428656b" aria-controls="R-expandcontent-035724460ec03d77b972b9bde428656b">
  <label class="expand-label" for="R-expand-035724460ec03d77b972b9bde428656b">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 04.12.24
  </label>
  <div id="R-expandcontent-035724460ec03d77b972b9bde428656b" class="expand-content">
<p>Da die Projektwoche (16.-20.12.2024) mangels Interesse nicht stattfinden wird, biete ich eine
zusätzliche Sprechstunde im Vorlesungsslot am 18.12. an.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-0b3e6261ce578ef95a4ac415205d0c0e" aria-controls="R-expandcontent-0b3e6261ce578ef95a4ac415205d0c0e">
  <label class="expand-label" for="R-expand-0b3e6261ce578ef95a4ac415205d0c0e">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 29.11.24
  </label>
  <div id="R-expandcontent-0b3e6261ce578ef95a4ac415205d0c0e" class="expand-content">
<h3 id="anpassung-der-gewichtung-der-parcours-stationen">Anpassung der Gewichtung der Parcours-Stationen</h3>
<p>Auf vielfachen Wunsch passen wir die Gewichtung der Stationen der Parcoursprüfung an:</p>
<ul>
<li>Station I: 33 Punkte</li>
<li>Station II: 50 Punkte</li>
</ul>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-11f80d43f9552a16564ee06ece665d04" aria-controls="R-expandcontent-11f80d43f9552a16564ee06ece665d04">
  <label class="expand-label" for="R-expand-11f80d43f9552a16564ee06ece665d04">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 29.11.24
  </label>
  <div id="R-expandcontent-11f80d43f9552a16564ee06ece665d04" class="expand-content">
<h3 id="ergebnisse-und-einsicht-parcoursprüfung-station-1-ilias">Ergebnisse und Einsicht Parcoursprüfung: Station 1 ILIAS</h3>
<p>Die erste Station der Parcoursprüfung vom 20.11. ist korrigiert.</p>
<p>Die Einsicht findet von Montag, 02.12., 08:00 Uhr bis Donnerstag, 05.12., 16:00 Uhr online statt. Gehen
Sie dazu bitte selbstständig auf den E-Assessment-Server (<a href="https://eassessment.hsbi.de/goto.php?target=crs_7284" rel="external" target="_blank">https://eassessment.hsbi.de/goto.php?target=crs_7284</a>,
via VPN) und schauen sich unter &quot;Ergebnisse&quot; die Bewertung Ihrer Antworten an. Wenn dabei Fragen auftreten,
schicken Sie bitte bis Donnerstag, 05.12., 16:00 Uhr eine kurze Mail an Carsten Gips mit Ihren konkreten Fragen.
Wir werden dann mit Ihnen für Freitag (06.12., zw. 15 und 17 Uhr) einen kurzen Gesprächstermin vereinbaren.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-cfeb9ef10c4823ee02877c1148d33b48" aria-controls="R-expandcontent-cfeb9ef10c4823ee02877c1148d33b48">
  <label class="expand-label" for="R-expand-cfeb9ef10c4823ee02877c1148d33b48">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 12.11.24
  </label>
  <div id="R-expandcontent-cfeb9ef10c4823ee02877c1148d33b48" class="expand-content">
<h3 id="organisation-parcoursprüfung-station-1-ilias">Organisation Parcoursprüfung: Station 1 ILIAS</h3>
<p>Die erste Station der Parcoursprüfung findet wie im Fahrplan beschrieben am Mittwoch,
den 20. November im B40 statt. Wir schreiben in zwei Durchgängen:</p>
<ol>
<li>09:45 - 10:30 Uhr: alle Studierenden, deren Nachname mit den Buchstaben &quot;A&quot; bis &quot;L&quot; beginnt,</li>
<li>10:45 - 11:30 Uhr: alle Studierenden, deren Nachname mit den Buchstaben &quot;M&quot; bis &quot;Z&quot; beginnt.</li>
</ol>
<p>Thematisch geht es um die Themen der Wochen 41 bis 45, also insbesondere Lexer, CFG, LL-Parser
und ANTLR.</p>
<p>Die Prüfung wird auf einem ILIAS-System durchgeführt. Bitte denkt an euren Usernamen und das Passwort.</p>
<p>Erlaubtes Hilfsmittel: Ein handschriftlich beschriebenes DIN-A4-Blatt (Vorder- und Rückseite können
genutzt werden).</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-bc148fb2018d25d00aad658ff224f768" aria-controls="R-expandcontent-bc148fb2018d25d00aad658ff224f768">
  <label class="expand-label" for="R-expand-bc148fb2018d25d00aad658ff224f768">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 29.10.24
  </label>
  <div id="R-expandcontent-bc148fb2018d25d00aad658ff224f768" class="expand-content">
<h3 id="verschiebung-praktikum-zu-b02-für-gruppe-3-do-0711-0800-uhr">Verschiebung Praktikum zu B02 für Gruppe 3: Do, 07.11., 08:00 Uhr</h3>
<p>Wie bereits in der Vorlesung angekündigt, muss das Praktikum für Blatt 02 für Gruppe 3 aus
gesundheitlichen Gründen leider von Montag, 04.11. auf Donnerstag, 07.11. verschoben werden.
Start ist um 08:00 Uhr.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-fdb61f9dc5a36c3b5f3015da6a2682df" aria-controls="R-expandcontent-fdb61f9dc5a36c3b5f3015da6a2682df">
  <label class="expand-label" for="R-expand-fdb61f9dc5a36c3b5f3015da6a2682df">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 28.10.24
  </label>
  <div id="R-expandcontent-fdb61f9dc5a36c3b5f3015da6a2682df" class="expand-content">
<h3 id="info-zum-antlr-meeting-mit-edmonton-am-di-2910">Info zum ANTLR-Meeting mit Edmonton am Di, 29.10.</h3>
<p>Am Dienstag, den 29.10., treffen wir uns wie angekündigt um 18 Uhr zum ersten Meeting mit den Studis und
Kollegen von der University of Alberta (Edmonton, Kanada). Dazu nutzen wir unseren Zoom (vgl.
<a href="https://www.hsbi.de/elearning/goto.php?target=crs_1400596&client_id=FH-Bielefeld" rel="external" target="_blank">ILIAS IFM 3.1 CB (PO23, 3. Semester)</a>).</p>
<p><strong>Bitte fügt eurem im Zoom angezeigten Namen ein <em>&quot; (DE)&quot;</em> hinten an.</strong></p>
<p><em>Beispiel</em>: Euer angezeigter Name wäre normalerweise <code>Vorname Nachname</code>. Für die Sitzung am Dienstag hängt
ihr bitte ein &quot;<code>(DE)</code>&quot; hinten dran und habt entsprechend den Anzeigenamen <strong><code>Vorname Nachname (DE)</code></strong>.</p>
<p>Wir freuen uns auf eine spannende Einführung in ANTLR und ein lustiges Meeting!</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-22d4882d52af044bc2628b1e32f48c9b" aria-controls="R-expandcontent-22d4882d52af044bc2628b1e32f48c9b">
  <label class="expand-label" for="R-expand-22d4882d52af044bc2628b1e32f48c9b">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 21.10.24
  </label>
  <div id="R-expandcontent-22d4882d52af044bc2628b1e32f48c9b" class="expand-content">
<h3 id="zeitänderung-gruppe-2-am-24012025">Zeitänderung Gruppe 2 am 24.01.2025</h3>
<p>Das letzte Praktikum von Gruppe 2 (am Fr, 24.01.2025) findet eine Stunde später
statt als sonst: 15:00 - 16:30 Uhr.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-6da5612354dd64512d02b36120e1f24b" aria-controls="R-expandcontent-6da5612354dd64512d02b36120e1f24b">
  <label class="expand-label" for="R-expand-6da5612354dd64512d02b36120e1f24b">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 16.10.24
  </label>
  <div id="R-expandcontent-6da5612354dd64512d02b36120e1f24b" class="expand-content">
<h3 id="update-b01">Update B01</h3>
<p>Bitte beachten Sie die Aktualisierung von B01.</p>
<p>Die bisherigen Aufgaben 5 und 6 kamen versehentlich doppelt vor. Dies wurde
korrigiert, d.h. es gibt jetzt eine Aufgabe weniger und Aufgabe 2 hat einen
dritten Punkt neu dazu bekommen.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-de41c866a24037fc31ad4a334202023f" aria-controls="R-expandcontent-de41c866a24037fc31ad4a334202023f">
  <label class="expand-label" for="R-expand-de41c866a24037fc31ad4a334202023f">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 09.10.24
  </label>
  <div id="R-expandcontent-de41c866a24037fc31ad4a334202023f" class="expand-content">
<h3 id="teams">Teams</h3>
<p>Bitte bearbeiten Sie die Aufgaben in 3er Teams.</p>
<p>Es ist empfehlenswert, wenn alle Personen im Team in der selben Stundenplangruppe
(Praktikumsgruppe) sind. Sie können aber auch Teams über verschiedene Gruppen
hinweg bilden. Geben Sie individuell im ILIAS ab und stellen Sie die Lösung dann
individuell in Ihrer jeweiligen Praktikumsgruppe vor.</p>
<p>Sie können Ihre Teams jederzeit selbstständig im Semester ändern/wechseln.</p>
<p><strong>Achtung</strong>: Den Vortrag zu <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07.html">B07</a> müssen Sie aber <strong>gemeinsam als Team</strong> halten.
Wenn Ihre Teammitglieder aus verschiedenen Stundenplangruppen kommen sollten,
findet der Vortrag in der Gruppe statt, aus der die meisten der Teammitglieder
kommen. Bitte beachten Sie das bei der Teamwahl!</p>
<h3 id="abgabe-ilias">Abgabe ILIAS</h3>
<p>Das Abgabeverfahren im ILIAS wurde deutlich vereinfacht: Jede Person gibt für
jedes Blatt individuell direkt im ILIAS an, welche Aufgaben das Team bearbeitet
hat (also keine Teambildung und keine Textdatei mehr im ILIAS).</p>
<p>Bitte darauf achten, dass Sie das die angegebenen Aufgaben auch vorstellen können
müssen! Achten Sie bitte auch auf die mind. 60% für das Testat.</p>
<h3 id="praktikum">Praktikum</h3>
<p>Sie gehen einfach in das Praktikum, welches Ihrer Stundenplangruppe zugeordnet ist
und stellen dort individuell die Lösungen Ihres Teams vor.</p>
<p>Den Vortrag zu <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07.html">B07</a> (letzte VL-Woche) halten Sie dann in die Praktikumsgruppe, in
der die meisten Teammitglieder sind. Bitte prüfen Sie, ob das für Sie passt (vom
Stundenplan her möglich ist) und wählen Sie ggf. ein anderes Team. Wir werden
rechtzeitig eine entsprechende Planung organisieren. Einige Vorträge werden wir
aber auch im Vorlesungsslot machen müssen, d.h. hier besteht bei Bedarf eine
Ausweichmöglichkeit.</p>
  </div>
</div>
  </div>
</div>
<p>Hier finden Sie einen abonnierbaren <a href="https://calendar.google.com/calendar/ical/07021c87022fe3f132fa2e2e799b230b5ab9c7088c85d152f2beab8f1b5218af%40group.calendar.google.com/public/basic.ics" rel="external" target="_blank">Google Kalender IFM 3.1 CB (PO23, 3. Semester)</a> mit allen Terminen der Veranstaltung zum Einbinden in Ihre Kalender-App.</p>
<p>Abgabe der Übungsblätter jeweils <strong>Montag bis 09:00 Uhr</strong> im <a href="https://www.hsbi.de/elearning/goto.php?target=exc_1420724&client_id=FH-Bielefeld" rel="external" target="_blank">ILIAS</a>. Vorstellung der Lösung im jeweiligen Praktikum in der Abgabewoche.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Monat</th>
          <th style="text-align: left">Woche</th>
          <th style="text-align: left">Vorlesung</th>
          <th style="text-align: left">Lead</th>
          <th style="text-align: left">Abgabe Aufgabenblatt</th>
          <th style="text-align: left">Vorstellung Praktikum</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Oktober</td>
          <td style="text-align: left">41</td>
          <td style="text-align: left">09.: <a href="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html#%C3%BCberblick-modulinhalte" rel="external" target="_blank">Orga</a> (<em>Zoom</em>); <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/overview.html">Überblick</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/languages.html">Sprachen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications.html">Anwendungen</a></td>
          <td style="text-align: left">Carsten, BC</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">42</td>
          <td style="text-align: left">16.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/regular.html">Reguläre Sprachen</a></td>
          <td style="text-align: left">BC</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">43</td>
          <td style="text-align: left">23.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg.html">CFG</a></td>
          <td style="text-align: left">BC</td>
          <td style="text-align: left">21.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html">B01</a> Reguläre Sprachen</td>
          <td style="text-align: left">21. / 22. / 25. (BC, <em>Präsenz</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">44</td>
          <td style="text-align: left">29.: <strong>18:00 - 19:30 Uhr (online): Edmonton I: ANTLR + Live-Coding</strong></td>
          <td style="text-align: left"><em>Edmonton</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">44</td>
          <td style="text-align: left">30.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/antlr-lexing.html">Lexer mit ANTLR</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing.html">Parser mit ANTLR</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">November</td>
          <td style="text-align: left">45</td>
          <td style="text-align: left">06.: <em>Dienstbesprechung</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left">04.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html">B02</a> CFG</td>
          <td style="text-align: left"><del>04.</del> <strong>07. 08:00</strong> / 05. / 08. (BC, <em>Präsenz</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">46</td>
          <td style="text-align: left">13.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro.html">Überblick Symboltabellen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes.html">Symboltabellen: Scopes</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions.html">Symboltabellen: Funktionen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html">Symboltabellen: Klassen</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left">11.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html">B03</a> ANTLR</td>
          <td style="text-align: left">11. / 12. / 15. (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">47</td>
          <td style="text-align: left">20.: <span class='alert'><strong>A-L: 09:45 - 10:30 Uhr, M-Z: 10:45 - 11:30 Uhr (B40): Parcoursprüfung: Station 1 ILIAS (Grammar, Lexing, Parsing), siehe Ankündigung</strong></span></td>
          <td style="text-align: left"></td>
          <td style="text-align: left">18.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04.html">B04</a> Semantische Analyse</td>
          <td style="text-align: left">18. / 19. / 22. (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">48</td>
          <td style="text-align: left">26.: <strong>18:00 - 19:30 Uhr (online): Edmonton II: Vorträge Mindener Projekte</strong></td>
          <td style="text-align: left"><em>Minden</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">48</td>
          <td style="text-align: left">27.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir.html">Überblick Zwischencode</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/llvm-ir.html">Überblick Backend (LLVM)</a></td>
          <td style="text-align: left">BC, Carsten</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">Dezember</td>
          <td style="text-align: left">49</td>
          <td style="text-align: left">03.: <strong>18:00 - 19:30 Uhr (online): Edmonton III: Vorträge Edmontoner Projekte</strong></td>
          <td style="text-align: left"><em>Edmonton</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">49</td>
          <td style="text-align: left">04.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1.html">AST-basierte Interpreter 1</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2.html">AST-basierte Interpreter 2</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">50</td>
          <td style="text-align: left">11.: C++ I: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp0-basics.html">Basics</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp1-pointer.html">Pointer &amp; Referenzen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes.html">Klassen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp3-big3.html">Big 3</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left">09.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet05.html">B05</a> Interpreter</td>
          <td style="text-align: left">09. / 10. / 13. (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">51</td>
          <td style="text-align: left">18.: <del>Projektwoche Semester 1+3</del> C++ II: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp4-operators.html">Operatoren</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance.html">Vererbung &amp; Polymorphie</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp6-templates.html">Templates</a></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">52</td>
          <td style="text-align: left">25.: <em>Weihnachtspause</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">Januar</td>
          <td style="text-align: left">01</td>
          <td style="text-align: left">01.: <em>Weihnachtspause</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">02</td>
          <td style="text-align: left">08.: <em>Sprechstunde/Freies Arbeiten</em></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left">06.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet06.html">B06</a> C++</td>
          <td style="text-align: left">06. / 07. / 10. (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">03</td>
          <td style="text-align: left">15.: <em>Freies Arbeiten/Puffer</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">04</td>
          <td style="text-align: left">22.: <span class='alert'><strong>Parcoursprüfung: Station 2 <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07.html">B07</a> (VL- und Praktika-Slots, siehe Ankündigung)</strong></span></td>
          <td style="text-align: left">Carsten, BC</td>
          <td style="text-align: left">20.: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07.html">B07</a> Mini-Projekt</td>
          <td style="text-align: left">20. / 21. / 24. (<strong>15:00-16:30</strong>) (Carsten/BC, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"><em>(Prüfungsphase I)</em></td>
          <td style="text-align: left">05</td>
          <td style="text-align: left">30.: <strong>Feedback-Gespräche (15:30 - 18:00 Uhr, online)</strong></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"><em>(Prüfungsphase II)</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"><span class='alert'><strong>Parcoursprüfung: Do, 27. Mar 2025, 08-18 Uhr, mdl. Prüfung (alle Themen)</strong></span> (je Prüfung ca. 45', Vergabe ca. 2 Wochen vorher)</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
  </tbody>
</table>
      </div>
    </div>
    <div
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<div class="box notices cstyle note">
  <div class="box-label">
    <i class="fa-fw fas fa-exclamation-circle"></i> News
  </div>
  <div class="box-content">
<div class="expand">
  <input type="checkbox" id="R-expand-1f119c975702bd3a4a5a89ac273ab83a" aria-controls="R-expandcontent-1f119c975702bd3a4a5a89ac273ab83a">
  <label class="expand-label" for="R-expand-1f119c975702bd3a4a5a89ac273ab83a">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 17.02.25
  </label>
  <div id="R-expandcontent-1f119c975702bd3a4a5a89ac273ab83a" class="expand-content">
<p><strong>Planung nächste Prüfung Compilerbau (PO18) (27.03.25)</strong></p>
<p>Die nächste Prüfung in Compilerbau (PO18) wird am Donnerstag, den 27.03.25 zwischen
<strong>08:00 bis 18:00 Uhr</strong> stattfinden. Die Prüfung wird aus einer Station bestehen
(mündliche Prüfung mit je ca. 45 Minuten, per Zoom). Die genaue Verteilung der
Startzeiten erfolgt per Mail über das LSF ca. eine Woche vorher.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-ae74e260a35368cb3ebc32c9f9cbbb7e" aria-controls="R-expandcontent-ae74e260a35368cb3ebc32c9f9cbbb7e">
  <label class="expand-label" for="R-expand-ae74e260a35368cb3ebc32c9f9cbbb7e">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 09.01.25
  </label>
  <div id="R-expandcontent-ae74e260a35368cb3ebc32c9f9cbbb7e" class="expand-content">
<h3 id="parcoursprüfung-feedbackgespräche-am-do-3001-1400-1530-uhr">Parcoursprüfung: Feedbackgespräche am Do, 30.01., 14:00-15:30 Uhr</h3>
<p>Wir bieten am Donnerstag, 30.01.25, von 14:00 bis 15:30 Uhr Feedbackgespräche zur Bewertung
der Ergebnisse von B07x (Parcoursprüfung, Station 2) an.</p>
<p>Es ist eine vorherige eine Anmeldung im ILIAS notwendig.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-b18d048635684a5338d189a1eff4d830" aria-controls="R-expandcontent-b18d048635684a5338d189a1eff4d830">
  <label class="expand-label" for="R-expand-b18d048635684a5338d189a1eff4d830">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 08.01.25
  </label>
  <div id="R-expandcontent-b18d048635684a5338d189a1eff4d830" class="expand-content">
<h3 id="planung-parcoursprüfung-station-2-bitte-tragt-euch-als-team-im-etherpad-ein">Planung Parcoursprüfung Station 2: Bitte tragt euch als Team im Etherpad ein</h3>
<p>Wie bereits angekündigt, finden am Mittwoch, den 22. Januar die Vorstellungen von B07x im
Rahmen der Parcoursprüfung statt (Station 2). Jedes Team hat 20 Minuten für die Vorstellung
der wichtigsten Aspekte zum Projekt, danach sind 10 Minuten für Fragen und Diskussion
eingeplant.</p>
<p>Bitte tragt euch bis zum 12. Januar als Team jeweils zu einem der Zeitslots im Etherpad ein.
Ihr findet den Link im ILIAS.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-041723b62ca7b112839afb6a30ae1568" aria-controls="R-expandcontent-041723b62ca7b112839afb6a30ae1568">
  <label class="expand-label" for="R-expand-041723b62ca7b112839afb6a30ae1568">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 16.12.24
  </label>
  <div id="R-expandcontent-041723b62ca7b112839afb6a30ae1568" class="expand-content">
<h3 id="anpassung-der-gewichtung-der-beiden-stationen-der-parcoursprüfung">Anpassung der Gewichtung der beiden Stationen der Parcoursprüfung</h3>
<p>Es war ursprünglich vorgesehen, die Gesamtnote als Mittelwert der Noten der beiden
Parcours-Stationen zu berechnen: Gewichtung 50% (Station 1) und 50% (Station 2).</p>
<p>In Anlehnung an die Anpassung der Notenberechnung für das dritte Semester bieten
wir an, die Gesamtnote alternativ mit der Gewichtung 40% (Station 1) und 60%
(Station 2) zu berechnen.</p>
<p>Wir werden für jede Person jeweils beide Verhältnisse berechnen und automatisch die
bessere Note werten (individuelle Günstigerprüfung).</p>
<p>Dies gilt für die Prüfung im ersten Zeitraum.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-7c61211e0d796a7e634fa0ff42440699" aria-controls="R-expandcontent-7c61211e0d796a7e634fa0ff42440699">
  <label class="expand-label" for="R-expand-7c61211e0d796a7e634fa0ff42440699">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 16.12.24
  </label>
  <div id="R-expandcontent-7c61211e0d796a7e634fa0ff42440699" class="expand-content">
<h3 id="feedback-zu-den-ergebnissen-der-station-1-der-parcoursprüfung">Feedback zu den Ergebnissen der Station 1 der Parcoursprüfung</h3>
<p>Wir möchten Ihnen im Praktikum am 18.12. ein Feedback zu den Ergebnissen der Station 1
der Parcoursprüfung geben.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-90fae9017e7693b4b45e85ed938f5841" aria-controls="R-expandcontent-90fae9017e7693b4b45e85ed938f5841">
  <label class="expand-label" for="R-expand-90fae9017e7693b4b45e85ed938f5841">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 09.11.24
  </label>
  <div id="R-expandcontent-90fae9017e7693b4b45e85ed938f5841" class="expand-content">
<h3 id="umplanung-der-vorträge-zur-ersten-station-der-parcoursprüfung">Umplanung der Vorträge zur ersten Station der Parcoursprüfung</h3>
<p>Die Vorträge zur Station 1 der Parcoursprüfung waren ursprünglich für den 20.11. (zur Probe) und
dann live auf dem zweiten Edmonton-Meeting (26.11., mit Bewertung) geplant.</p>
<p>Aus zeitlichen Gründen müssen wir leider etwas umplanen und die Vorträge um eine bzw. zwei Woche(n)
verschieben. Wir werden dazu die Teams auf zwei Termine aufteilen: Die ersten drei Teams werden im
Praktikum am 27.11. vortragen und die restlichen zwei Teams im Praktikum am 04.12. ... Abgabe für
alle Teams im ILIAS ist aber bereits der 27.11.(!)</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-3ee887e2930cb161a1d88f56918d1cf1" aria-controls="R-expandcontent-3ee887e2930cb161a1d88f56918d1cf1">
  <label class="expand-label" for="R-expand-3ee887e2930cb161a1d88f56918d1cf1">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 28.10.24
  </label>
  <div id="R-expandcontent-3ee887e2930cb161a1d88f56918d1cf1" class="expand-content">
<h3 id="info-zum-antlr-meeting-mit-edmonton-am-di-2910">Info zum ANTLR-Meeting mit Edmonton am Di, 29.10.</h3>
<p>Am Dienstag, den 29.10., treffen wir uns wie angekündigt um 18 Uhr zum ersten Meeting mit den Studis und
Kollegen von der University of Alberta (Edmonton, Kanada). Dazu nutzen wir unseren Zoom (vgl.
<a href="https://www.hsbi.de/elearning/goto.php?target=crs_1400603&client_id=FH-Bielefeld" rel="external" target="_blank">IFM 5.21 CB (PO18, 5. Semester)</a>).</p>
<p><strong>Bitte fügt eurem im Zoom angezeigten Namen ein <em>&quot; (DE)&quot;</em> hinten an.</strong></p>
<p><em>Beispiel</em>: Euer angezeigter Name wäre normalerweise <code>Vorname Nachname</code>. Für die Sitzung am Dienstag hängt
ihr bitte ein &quot;<code>(DE)</code>&quot; hinten dran und habt entsprechend den Anzeigenamen <strong><code>Vorname Nachname (DE)</code></strong>.</p>
<p>Wir freuen uns auf eine spannende Einführung in ANTLR und ein lustiges Meeting!</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-7c97728ee9da3479ccb1fe5cf74b79c8" aria-controls="R-expandcontent-7c97728ee9da3479ccb1fe5cf74b79c8">
  <label class="expand-label" for="R-expand-7c97728ee9da3479ccb1fe5cf74b79c8">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 23.10.24
  </label>
  <div id="R-expandcontent-7c97728ee9da3479ccb1fe5cf74b79c8" class="expand-content">
<h3 id="verschiebung-des-praktikums-zu-blatt-01-auf-3010-16-uhr">Verschiebung des Praktikums zu Blatt 01 auf 30.10., 16 Uhr</h3>
<p>Das Praktikum zur Vorstellung von Blatt 01 musste aus gesundheitlichen Gründen
um eine Woche verschoben werden.</p>
<p><strong>Neuer Termin für die Vorstellung von Blatt 01: Mi, 30.10., 16:00 - 17:30 Uhr</strong>.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-93b78aeb110acfe155e0d43dd88626b2" aria-controls="R-expandcontent-93b78aeb110acfe155e0d43dd88626b2">
  <label class="expand-label" for="R-expand-93b78aeb110acfe155e0d43dd88626b2">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 16.10.24
  </label>
  <div id="R-expandcontent-93b78aeb110acfe155e0d43dd88626b2" class="expand-content">
<h3 id="update-b01">Update B01</h3>
<p>Bitte beachten Sie die Aktualisierung von B01.</p>
<p>Die bisherigen Aufgaben 5 und 6 kamen versehentlich doppelt vor. Dies wurde
korrigiert, d.h. es gibt jetzt eine Aufgabe weniger und Aufgabe 2 hat einen
dritten Punkt neu dazu bekommen.</p>
  </div>
</div>
<div class="expand">
  <input type="checkbox" id="R-expand-bde648309c199ff4f35a1eb45989795e" aria-controls="R-expandcontent-bde648309c199ff4f35a1eb45989795e">
  <label class="expand-label" for="R-expand-bde648309c199ff4f35a1eb45989795e">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> 09.10.24
  </label>
  <div id="R-expandcontent-bde648309c199ff4f35a1eb45989795e" class="expand-content">
<h3 id="teams">Teams</h3>
<p>Bitte bearbeiten Sie die Aufgaben in 3er Teams.</p>
<p>Es ist empfehlenswert, wenn alle Personen im Team in der selben Stundenplangruppe
(Praktikumsgruppe) sind. Sie können aber auch Teams über verschiedene Gruppen
hinweg bilden. Geben Sie individuell im ILIAS ab und stellen Sie die Lösung dann
individuell in Ihrer jeweiligen Praktikumsgruppe vor.</p>
<p>Sie können Ihre Teams jederzeit selbstständig im Semester ändern/wechseln.</p>
<p><strong>Achtung</strong>: Den Vortrag zu <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07x.html">B07x</a> müssen Sie (wie auch den Vortrag zu <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04x.html">B04x</a>) aber
<strong>gemeinsam als Team</strong> halten. Wenn Ihre Teammitglieder aus verschiedenen
Stundenplangruppen kommen sollten, findet der Vortrag in der Gruppe statt, aus der
die meisten der Teammitglieder kommen. Bitte beachten Sie das bei der Teamwahl!</p>
<h3 id="abgabe-ilias">Abgabe ILIAS</h3>
<p>Das Abgabeverfahren im ILIAS wurde deutlich vereinfacht: Jede Person gibt für
jedes Blatt individuell direkt im ILIAS an, welche Aufgaben das Team bearbeitet
hat (also keine Teambildung und keine Textdatei mehr im ILIAS).</p>
<p>Bitte darauf achten, dass Sie das die angegebenen Aufgaben auch vorstellen können
müssen! Achten Sie bitte auch auf die mind. 60% für das Testat.</p>
<h3 id="praktikum">Praktikum</h3>
<p>Sie gehen einfach in das Praktikum, welches Ihrer Stundenplangruppe zugeordnet ist
und stellen dort individuell die Lösungen Ihres Teams vor.</p>
<p>Den Vortrag zu <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07x.html">B07x</a> (letzte VL-Woche) halten Sie dann in die Praktikumsgruppe, in
der die meisten Teammitglieder sind. Bitte prüfen Sie, ob das für Sie passt (vom
Stundenplan her möglich ist) und wählen Sie ggf. ein anderes Team. Wir werden
rechtzeitig eine entsprechende Planung organisieren. Einige Vorträge werden wir
aber auch im Vorlesungsslot machen müssen, d.h. hier besteht bei Bedarf eine
Ausweichmöglichkeit.</p>
  </div>
</div>
  </div>
</div>
<p>Hier finden Sie einen abonnierbaren <a href="https://calendar.google.com/calendar/ical/643ebb4721e215c2b2f2ac0330d5642f6cf9efe18cd16548e2e08f8bfa199336%40group.calendar.google.com/public/basic.ics" rel="external" target="_blank">Google Kalender IFM 5.21 CB (PO18, 5. Semester)</a> mit allen Terminen der Veranstaltung zum Einbinden in Ihre Kalender-App.</p>
<p>Abgabe der Übungsblätter jeweils <strong>Mittwoch bis 09:00 Uhr</strong> im <a href="https://www.hsbi.de/elearning/goto.php?target=exc_1420725&client_id=FH-Bielefeld" rel="external" target="_blank">ILIAS</a>. Vorstellung der Lösung im jeweiligen Praktikum in der Abgabewoche.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Monat</th>
          <th style="text-align: left">Tag</th>
          <th style="text-align: left">Vorlesung</th>
          <th style="text-align: left">Lead</th>
          <th style="text-align: left">Abgabe Aufgabenblatt &amp; Vorstellung Praktikum</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Oktober</td>
          <td style="text-align: left">09.</td>
          <td style="text-align: left"><a href="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html#%C3%BCberblick-modulinhalte" rel="external" target="_blank">Orga</a> (<em>Zoom</em>); <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/overview.html">Überblick</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/languages.html">Sprachen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications.html">Anwendungen</a></td>
          <td style="text-align: left">Carsten, BC</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">16.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/regular.html">Reguläre Sprachen</a></td>
          <td style="text-align: left">BC</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">23.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg.html">CFG</a></td>
          <td style="text-align: left">BC</td>
          <td style="text-align: left"><del><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html">B01</a> Reguläre Sprachen (BC, <em>online</em>)</del></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">29.</td>
          <td style="text-align: left"><strong>18:00 - 19:30 Uhr (online): Edmonton I: ANTLR + Live-Coding</strong></td>
          <td style="text-align: left"><em>Edmonton</em></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">30.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/antlr-lexing.html">Lexer mit ANTLR</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing.html">Parser mit ANTLR</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"><strong>16:00 Uhr: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html">B01</a> Reguläre Sprachen (BC, <em>online</em>)</strong></td>
      </tr>
      <tr>
          <td style="text-align: left">November</td>
          <td style="text-align: left">06.</td>
          <td style="text-align: left"><em>Dienstbesprechung</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html">B02</a> CFG (BC, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">13.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro.html">Überblick Symboltabellen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes.html">Symboltabellen: Scopes</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions.html">Symboltabellen: Funktionen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html">Symboltabellen: Klassen</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html">B03</a> ANTLR (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">20.</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">26.</td>
          <td style="text-align: left"><strong>18:00 - 19:30 Uhr (online): Edmonton II: Vorträge Mindener Projekte</strong></td>
          <td style="text-align: left"><em>Minden (S5)</em></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">27.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir.html">Überblick Zwischencode</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/llvm-ir.html">Überblick Backend (LLVM)</a></td>
          <td style="text-align: left">BC, Carsten</td>
          <td style="text-align: left"><span class='alert'><strong>Parcoursprüfung: Station 1: Vorstellung der Lösung von <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04x.html">B04x</a> (online, 3 Teams, siehe Ankündigung)</strong></span></td>
      </tr>
      <tr>
          <td style="text-align: left">Dezember</td>
          <td style="text-align: left">03.</td>
          <td style="text-align: left"><strong>18:00 - 19:30 Uhr (online): Edmonton III: Vorträge Edmontoner Projekte</strong></td>
          <td style="text-align: left"><em>Edmonton</em></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">04.</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1.html">AST-basierte Interpreter 1</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2.html">AST-basierte Interpreter 2</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"><span class='alert'><strong>Parcoursprüfung: Station 1: Vorstellung der Lösung von <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04x.html">B04x</a> (online, 2 Teams, siehe Ankündigung)</strong></span></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">11.</td>
          <td style="text-align: left">C++ I: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp0-basics.html">Basics</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp1-pointer.html">Pointer &amp; Referenzen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes.html">Klassen</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp3-big3.html">Big 3</a></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet05x.html">B05x</a> Interpreter (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">18.</td>
          <td style="text-align: left"><del>Projektwoche Semester 1+3</del> C++ II: <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp4-operators.html">Operatoren</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance.html">Vererbung &amp; Polymorphie</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp6-templates.html">Templates</a></td>
          <td style="text-align: left"></td>
          <td style="text-align: left">Feedback zu Station 1</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">25.</td>
          <td style="text-align: left"><em>Weihnachtspause</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">Januar</td>
          <td style="text-align: left">01.</td>
          <td style="text-align: left"><em>Weihnachtspause</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">08.</td>
          <td style="text-align: left"><em>Sprechstunde/Freies Arbeiten</em></td>
          <td style="text-align: left">Carsten</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet06x.html">B06x</a> C++ und dyn. Speicherverwaltung (Carsten, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">15.</td>
          <td style="text-align: left"><em>Freies Arbeiten/Puffer</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">22.</td>
          <td style="text-align: left"><span class='alert'><strong>Parcoursprüfung: Station 2 <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07x.html">B07x</a> (VL- und Praktika-Slots, siehe Ankündigung)</strong></span></td>
          <td style="text-align: left">Carsten, BC</td>
          <td style="text-align: left"><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07x.html">B07x</a> Mini-Projekt (Carsten/BC, <em>online</em>)</td>
      </tr>
      <tr>
          <td style="text-align: left"><em>(Prüfungsphase I)</em></td>
          <td style="text-align: left">30.</td>
          <td style="text-align: left"><strong>Feedback-Gespräche (14:00 - 15:30 Uhr, online)</strong></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left"><em>(Prüfungsphase II)</em></td>
          <td style="text-align: left"></td>
          <td style="text-align: left"><span class='alert'><strong>Parcoursprüfung: Do, 27. Mar 2025, 08-18 Uhr, mdl. Prüfung (alle Themen)</strong></span> (je Prüfung ca. 45', Vergabe ca. 2 Wochen vorher)</td>
          <td style="text-align: left"></td>
          <td style="text-align: left"></td>
      </tr>
  </tbody>
</table>
      </div>
    </div>
  </div>
</div>
<h2 id="prüfungsform-note-und-credits">Prüfungsform, Note und Credits</h2>
<div class="tab-panel" data-tab-group="modul-po">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('modul-po','ifm-31-cb-po23-3-semester')"
    >
      <span class="tab-nav-text">IFM 3.1 CB (PO23, 3. Semester)</span>
    </button>
    <button
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('modul-po','ifm-521-cb-po18-5-semester')"
    >
      <span class="tab-nav-text">IFM 5.21 CB (PO18, 5. Semester)</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="ifm-31-cb-po23-3-semester"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<p><strong>Parcoursprüfung plus Testat</strong>, 5 ECTS (PO23)</p>
<ul>
<li>
<p><strong>Testat</strong>: Vergabe der Credit-Points</p>
<ol>
<li>Mindestens 4 der Übungsblätter <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html">B01</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html">B02</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html">B03</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04.html">B04</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet05.html">B05</a> und <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet06.html">B06</a> erfolgreich bearbeitet, <strong>und</strong></li>
<li><strong>aktive</strong> Teilnahme an allen 3 Edmonton-Terminen.</li>
</ol>
<p>(&quot;erfolgreich bearbeitet&quot;: Bearbeitung in 3er Teams, je mindestens 60% bearbeitet,
fristgerechte Abgabe der Lösungen im ILIAS, Vorstellung der Lösungen im Praktikum)</p>
</li>
</ul>
<div class="tab-panel" data-tab-group="exams">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="prüfung-im-ersten-zeitraum"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('exams','prüfung-im-ersten-zeitraum')"
    >
      <span class="tab-nav-text">Prüfung im ersten Zeitraum</span>
    </button>
    <button
      data-tab-item="prüfung-im-zweiten-zeitraum"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('exams','prüfung-im-zweiten-zeitraum')"
    >
      <span class="tab-nav-text">Prüfung im zweiten Zeitraum</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="prüfung-im-ersten-zeitraum"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<ul>
<li>
<p><strong>Stationen</strong>:</p>
<ol>
<li>ILIAS-Test (einzeln, 20.11.)</li>
<li>Vorstellung Mini-Projekt <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07.html">B07</a> (3er Teams, letzte VL-Woche)</li>
</ol>
<p>Note für das Modul: Beide Stationen ergeben zu <strong>je 50%</strong> <em>oder</em> in der Gewichtung
<strong>30 Punkte (Station I) und 50 Punkte (Station II)</strong> die Gesamtnote (individuelle
Günstigerprüfung).</p>
<p>Für Station I werden 3 Punkte Überhang gewährt: Von den 33 maximal erreichbaren
Punkten werden 30 Punkte als 100% gewertet, darüber hinausgehende Punkte bleiben
als Bonuspunkte erhalten.</p>
</li>
</ul>
      </div>
    </div>
    <div
      data-tab-item="prüfung-im-zweiten-zeitraum"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<ul>
<li>
<p><strong>Stationen</strong>:</p>
<ol>
<li>Mündliche Prüfung (individuell, ca. 45 Minuten, zweiter Prüfungszeitraum)</li>
</ol>
<p>Die Note der mündlichen Prüfung ergibt die Gesamtnote.</p>
</li>
</ul>
      </div>
    </div>
  </div>
</div>
      </div>
    </div>
    <div
      data-tab-item="ifm-521-cb-po18-5-semester"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<p><strong>Parcoursprüfung plus Testat</strong>, 5 ECTS (PO18)</p>
<ul>
<li>
<p><strong>Testat</strong>: Vergabe der Credit-Points</p>
<ol>
<li>Mindestens 4 der Übungsblätter <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html">B01</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html">B02</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html">B03</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04x.html">B04x</a>, <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet05x.html">B05x</a> und <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet06x.html">B06x</a> erfolgreich bearbeitet, <strong>und</strong></li>
<li><strong>aktive</strong> Teilnahme an allen 3 Edmonton-Terminen.</li>
</ol>
<p>(&quot;erfolgreich bearbeitet&quot;: Bearbeitung in 3er Teams, je mindestens 60% bearbeitet,
fristgerechte Abgabe der Lösungen im ILIAS, Vorstellung der Lösungen im Praktikum)</p>
</li>
</ul>
<div class="tab-panel" data-tab-group="exams">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="prüfung-im-ersten-zeitraum"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('exams','prüfung-im-ersten-zeitraum')"
    >
      <span class="tab-nav-text">Prüfung im ersten Zeitraum</span>
    </button>
    <button
      data-tab-item="prüfung-im-zweiten-zeitraum"
      class="tab-nav-button tab-panel-style cstyle initial"
      onclick="switchTab('exams','prüfung-im-zweiten-zeitraum')"
    >
      <span class="tab-nav-text">Prüfung im zweiten Zeitraum</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="prüfung-im-ersten-zeitraum"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<ul>
<li>
<p><strong>Stationen</strong>:</p>
<ol>
<li>Vortrag (3er Team, 27.11. bzw. 04.12. im Praktikum): Vorstellung der Lösung von <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04x.html">B04x</a></li>
<li>Vorstellung Mini-Projekt <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet07x.html">B07x</a> (3er Teams, letzte VL-Woche)</li>
</ol>
<p>Note für das Modul: Beide Stationen ergeben zu <strong>je 50%</strong> <em>oder</em> in der Gewichtung
<strong>40% (Station 1) und 60% (Station 2)</strong> die Gesamtnote (individuelle Günstigerprüfung).</p>
</li>
</ul>
      </div>
    </div>
    <div
      data-tab-item="prüfung-im-zweiten-zeitraum"
      class="tab-content tab-panel-style cstyle initial">
      <div class="tab-content-text">
<ul>
<li>
<p><strong>Stationen</strong>:</p>
<ol>
<li>Mündliche Prüfung (individuell, ca. 45 Minuten, zweiter Prüfungszeitraum)</li>
</ol>
<p>Die Note der mündlichen Prüfung ergibt die Gesamtnote.</p>
</li>
</ul>
      </div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
</div>
<h2 id="materialien">Materialien</h2>
<ol>
<li><a href="https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/" rel="external" target="_blank">&quot;<strong>Compilers: Principles, Techniques, and Tools</strong>&quot;</a>.
Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. and Bansal, S., Pearson India, 2023.
ISBN <a href="https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1" rel="external" target="_blank">978-9-3570-5488-1</a>.
<a href="https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/" rel="external" target="_blank">Online</a> über die <a href="https://www.oreilly.com/library-access/" rel="external" target="_blank">O'Reilly-Lernplattform</a>.</li>
<li><a href="https://github.com/munificent/craftinginterpreters" rel="external" target="_blank">&quot;<strong>Crafting Interpreters</strong>&quot;</a>.
Nystrom, R., Genever Benning, 2021.
ISBN <a href="https://fhb-bielefeld.digibib.net/openurl?isbn=978-0-9905829-3-9" rel="external" target="_blank">978-0-9905829-3-9</a>.
<a href="https://www.craftinginterpreters.com/" rel="external" target="_blank">Online</a>.</li>
<li><a href="https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/" rel="external" target="_blank">&quot;<strong>The Definitive ANTLR 4 Reference</strong>&quot;</a>.
Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href="https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9" rel="external" target="_blank">978-1-9343-5699-9</a>.
<a href="https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/" rel="external" target="_blank">Online</a> über die <a href="https://www.oreilly.com/library-access/" rel="external" target="_blank">O'Reilly-Lernplattform</a>.</li>
<li><a href="https://learning.oreilly.com/library/view/writing-a-c/9781098182229/" rel="external" target="_blank">&quot;Writing a C Compiler&quot;</a>.
Sandler, N., No Starch Press, 2024. ISBN <a href="https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-0981-8222-9" rel="external" target="_blank">978-1-0981-8222-9</a>.
<a href="https://learning.oreilly.com/library/view/writing-a-c/9781098182229/" rel="external" target="_blank">Online</a> über die <a href="https://www.oreilly.com/library-access/" rel="external" target="_blank">O'Reilly-Lernplattform</a>.</li>
</ol>
<h2 id="förderungen-und-kooperationen">Förderungen und Kooperationen</h2>
<h3 id="kooperation-mit-university-of-alberta-edmonton-kanada">Kooperation mit University of Alberta, Edmonton (Kanada)</h3>
<p>Über das Projekt <a href="https://www.uni-bielefeld.de/international/profil/netzwerk/alberta-owl/we-can-virtuowl/" rel="external" target="_blank">&quot;We CAN virtuOWL&quot;</a> der Fachhochschule Bielefeld ist im Frühjahr 2021 eine
Kooperation mit der <a href="https://www.hsbi.de/en/international-office/alberta-owl-cooperation" rel="external" target="_blank">University of Alberta</a> (Edmonton/Alberta, Kanada) im Modul &quot;Compilerbau&quot;
gestartet.</p>
<p>Wir freuen uns, auch in diesem Semester wieder drei gemeinsame Sitzungen für beide
Hochschulen anbieten zu können. (Diese Termine werden in englischer Sprache durchgeführt.)</p>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of IFM 3.1 (PO23) / IFM 5.21 (PO18): Compilerbau (Winter 2024/25)</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="überblick">Überblick</h1>

<p>Was ist ein Compiler? Welche Bausteine lassen sich identifizieren, welche Aufgaben haben
diese?</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/overview.html">Struktur eines Compilers</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/languages.html">Bandbreite der Programmiersprachen</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications.html">Anwendungen</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Überblick</h1>
<article class="default">
<h1>Struktur eines Compilers</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Compiler übersetzen (formalen) Text in ein anderes Format.</p>
<p>Typischerweise kann man diesen Prozess in verschiedene Stufen/Phasen einteilen. Dabei
verarbeitet jede Phase den Output der vorangegangenen Phase und erzeugt ein (kompakteres)
Ergebnis, welches an die nächste Phase weitergereicht wird. Dabei nimmt die Abstraktion
von Stufe zu Stufe zu: Der ursprüngliche Input ist ein Strom von Zeichen, daraus wird ein
Strom von Wörtern (Token), daraus ein Baum (Parse Tree), Zwischencode (IC), ...</p>
<p><a href="#R-image-d8aa2a4eb15ea9b947bf723993cbebe0" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/master/lecture/00-intro/images/architektur_cb.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d8aa2a4eb15ea9b947bf723993cbebe0"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/master/lecture/00-intro/images/architektur_cb.png?width=auto&height=auto"></a></p>
<p>Die gezeigten Phasen werden traditionell unterschieden. Je nach Aufgabe können verschiedene
Stufen zusammengefasst werden oder sogar gar nicht auftreten.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/zpELDC_3G7Q' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Überblick</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/ec65309e6ba36d1d63e1aa8523f1f06b96af927d88c547083f1960ebf716e9d121701813bc1972dcf83779a007a62f839bf97f19bff3abc22c60dae523be7c0e' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Überblick</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Struktur eines Compilers: Phasen und deren Aufgaben</li></ul>
  </div>
</div>




    <h2 id="sprachen-verstehen-texte-transformieren">Sprachen verstehen, Texte transformieren</h2>
<blockquote>
<p>The cat runs quickly.</p>
</blockquote>
<p>=&gt; Struktur? Bedeutung?</p>
<p>Wir können hier (mit steigender Abstraktionsstufe) unterscheiden:</p>
<ul>
<li>
<p>Sequenz von Zeichen</p>
</li>
<li>
<p>Wörter: Zeichenketten mit bestimmten Buchstaben, getrennt durch bestimmte
andere Zeichen; Wörter könnten im Wörterbuch nachgeschlagen werden</p>
</li>
<li>
<p>Sätze: Anordnung von Wörtern nach einer bestimmten Grammatik, Grenze: Satzzeichen</p>
<p>Hier (vereinfacht): Ein Satz besteht aus Subjekt und Prädikat. Das Subjekt
besteht aus einem oder keinen Artikel und einem Substantiv. Das Prädikat
besteht aus einem Verb und einem oder keinem Adverb.</p>
</li>
<li>
<p>Sprache: Die Menge der in einer Grammatik erlaubten Sätze</p>
</li>
</ul>
<h2 id="compiler-big-picture">Compiler: Big Picture</h2>
<p><a href="#R-image-5a0f587e68c9e60197f6eb9e6d46f730" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://raw.githubusercontent.com/munificent/craftinginterpreters/master/site/image/a-map-of-the-territory/mountain.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5a0f587e68c9e60197f6eb9e6d46f730"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://raw.githubusercontent.com/munificent/craftinginterpreters/master/site/image/a-map-of-the-territory/mountain.png?width=auto&height=auto"></a></p>
<p><span class='origin'>Quelle: <a href="https://github.com/munificent/craftinginterpreters/blob/master/site/image/a-map-of-the-territory/mountain.png" rel="external" target="_blank">A Map of the Territory (mountain.png)</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p><strong>Begriffe und Phasen</strong></p>
<p>Die obige Bergsteige-Metapher kann man in ein nüchternes Ablaufdiagramm mit verschiedenen
Stufen und den zwischen den Stufen ausgetauschten Artefakten übersetzen:</p>
<p><a href="#R-image-6514c2282a03e337fc64f64d304423cf" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/overview/architektur_cb.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6514c2282a03e337fc64f64d304423cf"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/overview/architektur_cb.png?width=80%25&height=auto"></a></p>
<h3 id="frontend-analyse">Frontend, Analyse</h3>
<p>Die ersten Stufen eines Compilers, die mit der <strong>Analyse</strong> des
Inputs beschäftigt sind. Dies sind in der Regel der Scanner, der
Parser und die semantische Analyse.</p>
<ul>
<li>
<p>Scanner, Lexer, Tokenizer, Lexikalische Analyse</p>
<p>Zerteilt den Zeichenstrom in eine Folge von Wörtern. Mit regulären
Ausdrücken kann definiert werden, was Klassen gültiger Wörter (&quot;Token&quot;)
sind. Ein Token hat i.d.R. einen Namen und einen Wert.</p>
</li>
<li>
<p>Parser, Syntaxanalyse</p>
<p>Der Parser erhält als Eingabe die Folge der Token und versucht mit
Hilfe einer Grammatik zu bestimmen, ob es sich bei der Tokensequenz
um gültige Sätze im Sinne der Grammatik handelt. Hier gibt es viele
Algorithmen, die im Wesentlichen in die Klassen &quot;top-down&quot; und &quot;bottom-up&quot;
fallen.</p>
</li>
<li>
<p>Semantische Analyse, Kontexthandling</p>
<p>In den vorigen Stufen wurde eher lokal gearbeitet. Hier wird über den
gesamten Baum und die Symboltabelle hinweg geprüft, ob beispielsweise
Typen korrekt verwendet wurden, in welchen Scope ein Name gehört etc.
Mit diesen Informationen wird der AST angereichert.</p>
</li>
<li>
<p>Symboltabellen</p>
<p>Datenstrukturen, um Namen, Werte, Scopes und weitere Informationen zu
speichern. Die Symboltabellen werden vor allem beim Parsen befüllt und
bei der semantischen Analyse gelesen, aber auch der Lexer benötigt u.U.
diese Informationen.</p>
</li>
</ul>
<h3 id="backend-synthese">Backend, Synthese</h3>
<p>Die hinteren Stufen eines Compilers, die mit der <strong>Synthese</strong> der
Ausgabe beschäftigt sind. Dies sind in der Regel verschiedene
Optimierungen und letztlich die Code-Generierung</p>
<ul>
<li>
<p>Codegenerierung</p>
<p>Erzeugung des Zielprogramms aus der (optimierten) Zwischendarstellung.
Dies ist oft Maschinencode, kann aber auch C-Code oder eine andere
Ziel-Sprache sein.</p>
</li>
<li>
<p>Optimierung</p>
<p>Diverse Maßnahmen, um den resultierenden Code kleiner und/oder schneller
zu gestalten.</p>
</li>
<li>
<p>Symboltabellen</p>
<p>Datenstrukturen, um Namen, Werte, Scopes und weitere Informationen zu
speichern. Die Symboltabellen werden vor allem beim Parsen befüllt und
bei der semantischen Analyse gelesen, aber auch der Lexer benötigt u.U.
diese Informationen.</p>
</li>
</ul>
<h3 id="weitere-begriffe">Weitere Begriffe</h3>
<ul>
<li>
<p>Parse Tree, Concrete Syntax Tree</p>
<p>Repräsentiert die Struktur eines Satzes, wobei jeder Knoten dem Namen einer
Regel der Grammatik entspricht. Die Blätter bestehen aus den Token samt
ihren Werten.</p>
</li>
<li>
<p>AST, (Abstract) Syntax Tree</p>
<p>Vereinfachte Form des Parse Tree, wobei der Bezug auf die Element der
Grammatik (mehr oder weniger) weggelassen wird.</p>
</li>
<li>
<p>Annotierter AST</p>
<p>Anmerkungen am AST, die für spätere Verarbeitungsstufen interessant
sein könnten: Typ-Informationen, Optimierungsinformationen, ...</p>
</li>
<li>
<p>Zwischen-Code, IC</p>
<p>Zwischensprache, die abstrakter ist als die dem AST zugrunde liegenden
Konstrukte der Ausgangssprache. Beispielsweise könnten <code>while</code>-Schleifen
durch entsprechende Label und Sprünge ersetzt werden. Wie genau dieser
Zwischen-Code aussieht, muss der Compilerdesigner entscheiden. Oft findet
man den Assembler-ähnlichen &quot;3-Adressen-Code&quot;.</p>
</li>
<li>
<p>Sprache</p>
<p>Eine Sprache ist eine Menge gültiger Sätze. Die Sätze werden aus
Wörtern gebildet, diese wiederum aus Zeichenfolgen.</p>
</li>
<li>
<p>Grammatik</p>
<p>Eine Grammatik beschreibt formal die Syntaxregeln für eine
Sprache. Jede Regel in der Grammatik beschreibt dabei die Struktur eines
Satzes oder einer Phrase.</p>
</li>
</ul>
<h2 id="lexikalische-analyse-wörter-token-erkennen">Lexikalische Analyse: Wörter (&quot;<em>Token</em>&quot;) erkennen</h2>
<p>Die lexikalische Analyse (auch <em>Scanner</em> oder <em>Lexer</em> oder <em>Tokenizer</em> genannt)
zerteilt den Zeichenstrom in eine Folge von Wörtern (&quot;<em>Token</em>&quot;). Die geschieht
i.d.R. mit Hilfe von <em>regulären Ausdrücken</em>.</p>
<p>Dabei müssen unsinnige/nicht erlaubte Wörter erkannt werden.</p>
<p>Überflüssige Zeichen (etwa Leerzeichen) werden i.d.R. entfernt.</p>
<pre><code>sp = 100;

&lt;ID, sp&gt;, &lt;OP, =&gt;, &lt;INT, 100&gt;, &lt;SEM&gt;
</code></pre>
<p><em>Anmerkung</em>: In der obigen Darstellung werden die Werte der Token (&quot;<em>Lexeme</em>&quot;)
zusammen mit den Token &quot;gespeichert&quot;. Alternativ können die Werte der Token
auch direkt in der Symboltabelle gespeichert werden und in den Token nur der
Verweis auf den jeweiligen Eintrag in der Tabelle.</p>
<h2 id="syntaxanalyse-sätze-erkennen">Syntaxanalyse: Sätze erkennen</h2>
<p>In der Syntaxanalyse (auch <em>Parser</em> genannt) wird die Tokensequenz
in gültige Sätze unterteilt. Dazu werden in der Regel <em>kontextfreie
Grammatiken</em> und unterschiedliche Parsing-Methoden (<em>top-down</em>, <em>bottom-up</em>)
genutzt.</p>
<p>Dabei müssen nicht erlaubte Sätze erkannt werden.</p>
<pre><code>&lt;ID, sp&gt;, &lt;OP, =&gt;, &lt;INT, 100&gt;, &lt;SEM&gt;
</code></pre>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-lex" data-lang="lex">statement : assign SEM ;
assign : ID OP INT ;</code></pre></div>
<pre><code>                   statement                  =
                   /       \                 / \
               assign      SEM             sp  100
             /   |   \      |
           ID    OP  INT    ;
           |     |    |
           sp    =   100
</code></pre>
<p>Mit Hilfe der Produktionsregeln der Grammatik wird versucht, die Tokensequenz
zu erzeugen. Wenn dies gelingt, ist der Satz (also die Tokensequenz) ein
gültiger Satz im Sinne der Grammatik. Dabei sind die Token aus der lexikalischen
Analyse die hier betrachteten Wörter!</p>
<p>Dabei entsteht ein sogenannter <em>Parse-Tree</em> (oder auch &quot;<em>Syntax Tree</em>&quot;; in der
obigen Darstellung der linke Baum). In diesen Bäumen spiegeln sich die Regeln
der Grammatik wider, d.h. zu einem Satz kann es durchaus verschiedene
Parse-Trees geben.</p>
<p>Beim <em>AST</em> (&quot;<em>Abstract Syntax Tree</em>&quot;) werden die Knoten um alle später nicht
mehr benötigten Informationen bereinigt (in der obigen Darstellung der rechte
Baum).</p>
<p><em>Anmerkung</em>: Die Begriffe werden oft nicht eindeutig verwendet. Je nach
Anwendung ist das Ergebnis des Parsers ein AST oder ein Parse-Tree.</p>
<p><em>Anmerkung</em>: Man könnte statt <code>OP</code> auch etwa ein <code>ASSIGN</code> nutzen und müsste
dann das &quot;<code>=</code>&quot; nicht extra als Inhalt speichern, d.h. man würde die Information
im Token-Typ kodieren.</p>
<h2 id="vorschau-parser-implementieren">Vorschau: Parser implementieren</h2>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-lex" data-lang="lex">stat : assign | ifstat | ... ;
assign : ID &#39;=&#39; expr &#39;;&#39; ;</code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">stat</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span> (<span style="color:#f92672">&lt;&lt;</span>current token<span style="color:#f92672">&gt;&gt;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> ID : assign(); <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> IF : ifstat(); <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">default</span> : <span style="color:#f92672">&lt;&lt;</span>raise exception<span style="color:#f92672">&gt;&gt;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">assign</span>() {
</span></span><span style="display:flex;"><span>    match(ID);
</span></span><span style="display:flex;"><span>    match(<span style="color:#e6db74">&#39;=&#39;</span>);
</span></span><span style="display:flex;"><span>    expr();
</span></span><span style="display:flex;"><span>    match(<span style="color:#e6db74">&#39;;&#39;</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Der gezeigte Parser ist ein sogenannter &quot;LL(1)&quot;-Parser und geht von oben nach unten
vor, d.h. ist ein Top-Down-Parser.</p>
<p>Nach dem Betrachten des aktuellen Tokens wird entschieden, welche Alternative
vorliegt und in die jeweilige Methode gesprungen.</p>
<p>Die <code>match()</code>-Methode entspricht dabei dem Erzeugen von Blättern, d.h. hier
werden letztlich die Token der Grammatik erkannt.</p>
<h2 id="semantische-analyse-bedeutung-erkennen">Semantische Analyse: Bedeutung erkennen</h2>
<p>In der semantischen Analyse (auch <em>Context Handling</em> genannt) wird der AST
zusammen mit der Symboltabelle geprüft. Dabei spielen Probleme wie Scopes,
Namen und Typen eine wichtige Rolle.</p>
<p>Die semantische Analyse ist direkt vom Programmierparadigma der zu
übersetzenden Sprache abhängig, d.h. müssen wir beispielsweise das Konzept
von Klassen verstehen?</p>
<p>Als Ergebnis dieser Phase entsteht typischerweise ein <em>annotierter AST</em>.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">3</span>;    <span style="color:#75715e">// ???
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<pre><code>                                              = {type: real, loc: tmp1}
sp = 100;                                    / \
                                            /   \
                                          sp     inttofloat
                                  {type: real,       |
                                   loc: var b}      100
</code></pre>
<h2 id="zwischencode-generieren">Zwischencode generieren</h2>
<p>Aus dem annotierten AST wird in der Regel ein Zwischencode (&quot;<em>Intermediate Code</em>&quot;,
auch &quot;IC&quot;) generiert. oft findet man hier den Assembler-ähnlichen &quot;3-Adressen-Code&quot;,
in manchen Compilern wird als IC aber auch der AST selbst genutzt.</p>
<pre><code>                 = {type: real, loc: tmp1}
                / \
               /   \
             sp     inttofloat
     {type: real,       |
      loc: var b}      100
</code></pre>
<p>=&gt; <code>t1 = inttofloat(100)</code></p>
<h2 id="code-optimieren">Code optimieren</h2>
<p>An dieser Stelle verlassen wir das Compiler-Frontend und begeben uns in das
sogenannte <em>Backend</em>. Die Optimierung des Codes kann sehr unterschiedlich
ausfallen, beispielsweise kann man den Zwischencode selbst optimieren, dann
nach sogenanntem &quot;Targetcode&quot; übersetzen und diesen weiter optimieren, bevor
das Ergebnis im letzten Schritt in Maschinencode übersetzt wird.</p>
<p>Die Optimierungsphase ist sehr stark abhängig von der Zielhardware. Hier kommen
fortgeschrittene Mengen- und Graphalgorithmen zur Anwendung. Die Optimierung
stellt den wichtigsten Teil aktueller Compiler dar.</p>
<p>Aus zeitlichen und didaktischen Gründen werden wir in dieser Veranstaltung den
Fokus auf die Frontend-Phasen legen und die Optimierung nur grob streifen.</p>
<p><code>t1 = inttofloat(100)</code> =&gt; <code>t1 = 100.0</code></p>
<p><code>x = y*0;</code> =&gt; <code>x = 0;</code></p>
<h2 id="code-generieren">Code generieren</h2>
<ul>
<li>
<p>Maschinencode:</p>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-gnuassembler" data-lang="gnuassembler">STD  t1, 100.0</code></pre></div>
</li>
<li>
<p>Andere Sprache:</p>
<ul>
<li>Bytecode</li>
<li>C</li>
<li>...</li>
</ul>
</li>
</ul>
<h2 id="probleme">Probleme</h2>
<pre><code>5*4+3
</code></pre>
<p><strong>AST</strong>?</p>
<p>Problem: Vorrang von Operatoren</p>
<ul>
<li>Variante 1: <code>+(*(5, 4), 3)</code></li>
<li>Variante 2: <code>*(5, +(4, 3))</code></li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-lex" data-lang="lex">stat : expr &#39;;&#39;
     | ID &#39;(&#39; &#39;)&#39; &#39;;&#39;
     ;
expr : ID &#39;(&#39; &#39;)&#39;
     | INT
     ;</code></pre></div>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Compiler übersetzen Text in ein anderes Format</p>
</li>
<li>
<p>Typische Phasen:</p>
<ol>
<li>Lexikalische Analyse</li>
<li>Syntaxanalyse</li>
<li>Semantische Analyse</li>
<li>Generierung von Zwischencode</li>
<li>Optimierung des (Zwischen-) Codes</li>
<li>Codegenerierung</li>
</ol>
</li>
</ul>


    



    



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.<br><em>Kapitel 1 Introduction</em></li> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 1 Introduction</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>Bandbreite der Programmiersprachen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Am Beispiel des Abzählreims &quot;99 Bottles of Beer&quot; werden (ganz kurz) verschiedene
Programmiersprachen betrachtet. Jede der Sprachen hat ihr eigenes Sprachkonzept
(Programmierparadigma) und auch ein eigenes Typ-System sowie ihre eigene Strategie
zur Speicherverwaltung und Abarbeitung.</p>
<p>Auch wenn die Darstellung längst nicht vollständig ist, macht sie doch deutlich,
dass Compiler teilweise sehr unterschiedliche Konzepte &quot;verstehen&quot; müssen.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/prsc8cf4cJ8' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Programmiersprachen</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/00833ded94b0af9d20d6dc00034aeca1c2bcbbf42a8066615de06619fbd02206dfbac4a0cb447cf3cc08b615d818d49ee11cb187887eba435e81f09e6b142a9a' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Programmiersprachen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Verschiedene Beispiele für verschiedene Programmiersprachen und Paradigmen</li></ul>
  </div>
</div>




    <h2 id="99-bottles-of-beer">99 Bottles of Beer</h2>
<blockquote>
<p>99 bottles of beer on the wall, 99 bottles of beer.
Take one down and pass it around, 98 bottles of beer on the wall.</p>
<p>98 bottles of beer on the wall, 98 bottles of beer.
Take one down and pass it around, 97 bottles of beer on the wall.</p>
<p>[...]</p>
<p>2 bottles of beer on the wall, 2 bottles of beer.
Take one down and pass it around, 1 bottle of beer on the wall.</p>
<p>1 bottle of beer on the wall, 1 bottle of beer.
Take one down and pass it around, no more bottles of beer on the wall.</p>
<p>No more bottles of beer on the wall, no more bottles of beer.
Go to the store and buy some more, 99 bottles of beer on the wall.</p>
</blockquote>
<p><span class='origin'>Quelle: nach <a href="https://www.99-bottles-of-beer.net/lyrics.html" rel="external" target="_blank">&quot;Lyrics of the song 99 Bottles of Beer&quot;</a> on 99-bottles-of-beer.net</span></p>
<h2 id="imperativ-hardwarenah-c">Imperativ, Hardwarenah: C</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span> <span style="color:#75715e">#define MAXBEER (99)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">chug</span>(<span style="color:#66d9ef">int</span> beers);
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">register</span> beers;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span>(beers <span style="color:#f92672">=</span> MAXBEER; beers; <span style="color:#a6e22e">chug</span>(beers<span style="color:#f92672">--</span>))  <span style="color:#a6e22e">puts</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">puts</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Time to buy more beer!</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">chug</span>(<span style="color:#66d9ef">register</span> beers) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> howmany[<span style="color:#ae81ff">8</span>], <span style="color:#f92672">*</span>s;
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> beers <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;s&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d bottle%s of beer on the wall,</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, beers, s);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d bottle%s of beeeeer . . . ,</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, beers, s);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Take one down, pass it around,</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#f92672">--</span>beers) <span style="color:#a6e22e">sprintf</span>(howmany, <span style="color:#e6db74">&#34;%d&#34;</span>, beers); <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">strcpy</span>(howmany, <span style="color:#e6db74">&#34;No more&#34;</span>);
</span></span><span style="display:flex;"><span>    s <span style="color:#f92672">=</span> beers <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;s&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%s bottle%s of beer on the wall.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, howmany, s);
</span></span><span style="display:flex;"><span> }</span></span></code></pre></div>
<p><span class='origin'>Quelle: <a href="https://www.99-bottles-of-beer.net/language-c-116.html" rel="external" target="_blank">&quot;Language C&quot;</a> by Bill Wein on 99-bottles-of-beer.net</span></p>
<ul>
<li>
<p>Imperativ</p>
</li>
<li>
<p>Procedural</p>
</li>
<li>
<p>Statisches Typsystem</p>
</li>
<li>
<p>Resourcenschonend, aber &quot;unsicher&quot;: Programmierer muss wissen, was er tut</p>
</li>
<li>
<p>Relativ hardwarenah</p>
</li>
<li>
<p>Einsatz: Betriebssysteme, Systemprogrammierung</p>
</li>
</ul>
<h2 id="imperativ-objektorientiert-java">Imperativ, Objektorientiert: Java</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">bottles</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String args<span style="color:#f92672">[]</span>) {
</span></span><span style="display:flex;"><span>        String s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;s&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> beers<span style="color:#f92672">=</span>99; beers<span style="color:#f92672">&gt;-</span>1;) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(beers <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; bottle&#34;</span> <span style="color:#f92672">+</span> s <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; of beer on the wall, &#34;</span>);
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(beers <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; bottle&#34;</span> <span style="color:#f92672">+</span> s <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; of beer, &#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (beers<span style="color:#f92672">==</span>0) {
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Go to the store, buy some more, &#34;</span>);
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;99 bottles of beer on the wall.\n&#34;</span>);
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">exit</span>(0);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>                System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Take one down, pass it around, &#34;</span>);
</span></span><span style="display:flex;"><span>            s <span style="color:#f92672">=</span> (<span style="color:#f92672">--</span>beers <span style="color:#f92672">==</span> 1)<span style="color:#f92672">?</span><span style="color:#e6db74">&#34;&#34;</span>:<span style="color:#e6db74">&#34;s&#34;</span>;
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(beers <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; bottle&#34;</span> <span style="color:#f92672">+</span> s <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; of beer on the wall.\n&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><span class='origin'>Quelle: <a href="https://www.99-bottles-of-beer.net/language-java-4.html" rel="external" target="_blank">&quot;Language Java&quot;</a> by Sean Russell on 99-bottles-of-beer.net</span></p>
<ul>
<li>
<p>Imperativ</p>
</li>
<li>
<p>Objektorientiert</p>
</li>
<li>
<p>Multi-Threading</p>
</li>
<li>
<p>Basiert auf C/C++</p>
</li>
<li>
<p>Statisches Typsystem</p>
</li>
<li>
<p>Automatische Garbage Collection</p>
</li>
<li>
<p>&quot;Sichere&quot; Architektur: Laufzeitumgebung fängt viele Probleme ab</p>
</li>
<li>
<p>Architekturneutral: Nutzt Bytecode und eine JVM</p>
</li>
<li>
<p>Einsatz: High-Level All-Purpose Language</p>
</li>
</ul>
<h2 id="logisch-prolog">Logisch: Prolog</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-prolog" data-lang="prolog"><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span> <span style="color:#f92672">:-</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bottles</span>(<span style="color:#ae81ff">99</span>).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span>(<span style="color:#ae81ff">1</span>) :-
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39;1 bottle of beer on the wall, 1 bottle of beer,&#39;</span>), <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39;Take one down, and pass it around,&#39;</span>), <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39;Now they are all gone.&#39;</span>), <span style="color:#e6db74">nl</span>,!.
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span>(X) :-
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(X), <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39; bottles of beer on the wall,&#39;</span>), <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(X), <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39; bottles of beer,&#39;</span>), <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39;Take one down and pass it around,&#39;</span>), <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    NX <span style="color:#f92672">is</span> X <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">write</span>(NX), <span style="color:#a6e22e">write</span>(<span style="color:#e6db74">&#39; bottles of beer on the wall.&#39;</span>), <span style="color:#e6db74">nl</span>, <span style="color:#e6db74">nl</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">bottles</span>(NX).</span></span></code></pre></div>
<p><span class='origin'>Quelle: <a href="https://www.99-bottles-of-beer.net/language-prolog-965.html" rel="external" target="_blank">&quot;Language Prolog&quot;</a> by M@ on 99-bottles-of-beer.net</span></p>
<ul>
<li>
<p>Deklarativ</p>
</li>
<li>
<p>Logisch: Definition von Fakten und Regeln; eingebautes Beweissystem</p>
</li>
<li>
<p>Einsatz: Theorem-Beweisen, Natural Language Programming (NLP), Expertensysteme, ...</p>
</li>
</ul>
<h2 id="funktional-haskell">Funktional: Haskell</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-haskell" data-lang="haskell"><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;no more bottles&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1 bottle&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bottles</span> n <span style="color:#f92672">=</span> show n <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34; bottles&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">verse</span> <span style="color:#ae81ff">0</span>   <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;No more bottles of beer on the wall, no more bottles of beer.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;Go to the store and buy some more, 99 bottles of beer on the wall.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">verse</span> n   <span style="color:#f92672">=</span> bottles n <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34; of beer on the wall, &#34;</span> <span style="color:#f92672">++</span> bottles n <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34; of beer.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;Take one down and pass it around, &#34;</span> <span style="color:#f92672">++</span> bottles (n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>                                                 <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34; of beer on the wall.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">main</span>      <span style="color:#f92672">=</span> mapM (putStrLn <span style="color:#f92672">.</span> verse) [<span style="color:#ae81ff">99</span>,<span style="color:#ae81ff">98</span><span style="color:#f92672">..</span><span style="color:#ae81ff">0</span>]</span></span></code></pre></div>
<p><span class='origin'>Quelle: <a href="https://www.99-bottles-of-beer.net/language-haskell-1070.html" rel="external" target="_blank">&quot;Language Haskell&quot;</a> by Iavor on 99-bottles-of-beer.net</span></p>
<ul>
<li>
<p>Deklarativ</p>
</li>
<li>
<p>Funktional</p>
</li>
<li>
<p>Lazy, pure</p>
</li>
<li>
<p>Statisches Typsystem</p>
</li>
<li>
<p>Typinferenz</p>
</li>
<li>
<p>Algebraische Datentypen, Patternmatching</p>
</li>
<li>
<p>Einsatz: Compiler, DSL, Forschung</p>
</li>
</ul>
<h2 id="brainfuck">Brainfuck</h2>
<p><a href="#R-image-f5984b3bdfbb2455a2452a861343b6cb" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/languages/screenshot_brainfuck_99bottles.png?width=15%25&height=auto" style=" height: auto; width: 15%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f5984b3bdfbb2455a2452a861343b6cb"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/languages/screenshot_brainfuck_99bottles.png?width=15%25&height=auto"></a></p>
<p><span class='origin'>Quelle: Screenshot of <a href="https://99-bottles-of-beer.net/language-brainfuck-2542.html" rel="external" target="_blank">&quot;Language Brainfuck&quot;</a> by Michal Wojciech Tarnowski on 99-bottles-of-beer.net</span></p>
<ul>
<li>
<p>Imperativ</p>
</li>
<li>
<p>Feldbasiert (analog zum Band der Turingmaschine)</p>
</li>
<li>
<p>8 Befehle: Zeiger und Zellen inkrementieren/dekrementieren, Aus- und Eingabe, Sprungbefehle</p>
</li>
</ul>
<h2 id="programmiersprache-lox">Programmiersprache Lox</h2>
<pre><code>fun fib(x) {
    if (x == 0) {
        return 0;
    } else {
        if (x == 1) {
            return 1;
        } else {
            fib(x - 1) + fib(x - 2);
        }
    }
}

var wuppie = fib;
wuppie(4);
</code></pre>
<ul>
<li>
<p>Die Sprache &quot;Lox&quot; finden Sie hier: <a href="https://www.craftinginterpreters.com/the-lox-language.html" rel="external" target="_blank">craftinginterpreters.com/the-lox-language.html</a></p>
</li>
<li>
<p>C-ähnliche Syntax</p>
</li>
<li>
<p>Imperativ, objektorientiert, Funktionen als <em>First Class Citizens</em>, Closures</p>
</li>
<li>
<p>Dynamisch typisiert</p>
</li>
<li>
<p>Garbage Collector</p>
</li>
<li>
<p>Statements und Expressions</p>
</li>
<li>
<p>(Kleine) Standardbibliothek eingebaut</p>
</li>
</ul>
<p>Die Sprache ähnelt stark anderen modernen Sprachen und ist gut geeignet, um an ihrem
Beispiel Themen wie Scanner/Parser/AST, Interpreter, Object Code und VM zu studieren :)</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Compiler übersetzen formalen Text in ein anderes Format</p>
</li>
<li>
<p>Berücksichtigung von unterschiedlichen</p>
<ul>
<li>Sprachkonzepten (Programmierparadigmen)</li>
<li>Typ-Systemen</li>
<li>Speicherverwaltungsstrategien</li>
<li>Abarbeitungsstrategien</li>
</ul>
</li>
</ul>


    



    



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.<br><em>Kapitel 1 Introduction</em></li> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 1 Introduction</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>Anwendungen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Es gibt verschiedene Anwendungsmöglichkeiten für Compiler. Je nach Bedarf wird dabei
die komplette Toolchain durchlaufen oder es werden Stufen ausgelassen. Häufig genutzte
Varianten sind dabei:</p>
<ul>
<li>&quot;Echte&quot; Compiler: Übersetzen Sourcecode nach ausführbarem Maschinencode</li>
<li>Interpreter: Interaktive Ausführung von Sourcecode</li>
<li>Virtuelle Maschinen als Zwischending zwischen Compiler und Interpreter</li>
<li>Transpiler: Übersetzen formalen Text nach formalem Text</li>
<li>Analysetools: Parsen den Sourcecode, werten die Strukturen aus</li>
</ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/gt9ROh-qRIU' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Anwendungen</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/7fb03ad60cf2c17a163bd4a1dceae2a0afb3c70203d632062843c2518e9d2bf833a118630d0eb153cb6a451a27b396caa9b8eb5f3b46925169f43b8a9aaaf35e' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Anwendungen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Verschiedene Anwendungen für Compiler durch Einsatz bestimmter Stufen der Compiler-Pipeline</li></ul>
  </div>
</div>




    <h2 id="anwendung-compiler">Anwendung: Compiler</h2>
<p><a href="#R-image-640c003074f0ff2dda447d3629272c13" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/compiler.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-640c003074f0ff2dda447d3629272c13"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/compiler.png?width=auto&height=auto"></a></p>
<p>Wie oben diskutiert: Der Sourcecode durchläuft alle Phasen des Compilers,
am Ende fällt ein ausführbares Programm heraus. Dieses kann man starten und
ggf. mit Inputdaten versehen und erhält den entsprechenden Output. Das
erzeugte Programm läuft i.d.R. nur auf einer bestimmten Plattform.</p>
<p>Beispiele: gcc, clang, ...</p>
<h2 id="anwendung-interpreter">Anwendung: Interpreter</h2>
<p><a href="#R-image-2893a202b50cce52bc9921a2705b23a1" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/interpreter.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2893a202b50cce52bc9921a2705b23a1"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/interpreter.png?width=auto&height=auto"></a></p>
<p>Beim Interpreter durchläuft der Sourcecode nur das Frontend, also die Analyse.
Es wird kein Code erzeugt, stattdessen führt der Interpreter die Anweisungen
im AST bzw. IC aus. Dazu muss der Interpreter mit den Eingabedaten beschickt
werden. Typischerweise hat man hier eine &quot;Read-Eval-Print-Loop&quot; (<em>REPL</em>).</p>
<p>Beispiele: Python</p>
<h2 id="anwendung-virtuelle-maschinen">Anwendung: Virtuelle Maschinen</h2>
<p><a href="#R-image-f540f58d1f9c2b7f0e146f20e3965c4e" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/virtualmachine.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f540f58d1f9c2b7f0e146f20e3965c4e"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/virtualmachine.png?width=auto&height=auto"></a></p>
<p>Hier liegt eine Art Mischform aus Compiler und Interpreter vor: Der Compiler
übersetzt den Quellcode in ein maschinenunabhängiges Zwischenformat
(&quot;Byte-Code&quot;). Dieser wird von der virtuellen Maschine (&quot;VM&quot;) gelesen und
ausgeführt. Die VM kann also als Interpreter für Byte-Code betrachtet werden.</p>
<p>Beispiel: Java mit seiner JVM</p>
<h2 id="anwendung-c-toolchain">Anwendung: C-Toolchain</h2>
<p><a href="#R-image-5b760a62b71017fa41aa4796fa09286a" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/c-toolchain.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5b760a62b71017fa41aa4796fa09286a"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/c-toolchain.png?width=80%25&height=auto"></a></p>
<p>Erinnern Sie sich an die LV &quot;Systemprogrammierung&quot; im dritten Semester :-)</p>
<p>Auch wenn es so aussieht, als würde der C-Compiler aus dem Quelltext direkt das
ausführbare Programm erzeugen, finden hier dennoch verschiedene Stufen statt.
Zuerst läuft ein Präprozessor über den Quelltext und ersetzt alle <code>#include</code>
und <code>#define</code> etc., danach arbeitet der C-Compiler, dessen Ausgabe wiederum
durch einen Assembler zu ausführbarem Maschinencode transformiert wird.</p>
<p>Beispiele: gcc, clang, ...</p>
<h2 id="anwendung-c-compiler">Anwendung: C++-Compiler</h2>
<p><a href="#R-image-6e07f46da469ed9b803dddd9524a051a" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/cpp-toolchain.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6e07f46da469ed9b803dddd9524a051a"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/cpp-toolchain.png?width=80%25&height=auto"></a></p>
<p>C++ hat meist keinen eigenen (vollständigen) Compiler :-)</p>
<p>In der Regel werden die C++-Konstrukte durch <code>cfront</code> nach C übersetzt, so dass
man anschließend auf die etablierten Tools zurückgreifen kann.</p>
<p>Dieses Vorgehen werden Sie relativ häufig finden. Vielleicht sogar in Ihrem
Projekt ...</p>
<p>Beispiel: g++</p>
<h2 id="anwendung-bugfinder">Anwendung: Bugfinder</h2>
<p><a href="#R-image-aeb8739e1e0434c27106febbf6c81656" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/findbugs.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aeb8739e1e0434c27106febbf6c81656"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/00-intro/applications/findbugs.png?width=80%25&height=auto"></a></p>
<p>Tools wie FindBugs analysieren den (Java-) Quellcode und suchen nach bekannten
Fehlermustern. Dazu benötigen sie nur den Analyse-Teil eines Compilers!</p>
<p>Auf dem AST kann dann nach vorab definierten Fehlermustern gesucht werden
(Stichwort &quot;Graphmatching&quot;). Dazu fällt die semantische Analyse entsprechend
umfangreicher aus als normal.</p>
<p>Zusätzlich wird noch eine Reporting-Komponente benötigt, da die normalen
durch die Analysekette erzeugten Fehlermeldungen nicht helfen (bzw. sofern
der Quellcode wohlgeformter Code ist, würden ja keine Fehlermeldungen durch
die Analyseeinheit generiert).</p>
<p>Beispiele: SpotBugs, Checkstyle, ESLint, ...</p>
<h2 id="anwendung-pandoc">Anwendung: Pandoc</h2>
<p><a href="https://pandoc.org/" rel="external" target="_blank">Pandoc</a> ist ein universeller und modular aufgebauter
Textkonverter, der mit Hilfe verschiedener <em>Reader</em> unterschiedliche
Textformate einlesen und in ein Zwischenformat (hier JSON) transformieren
kann. Über verschiedene <em>Writer</em> können aus dem Zwischenformat dann Dokumente
in den gewünschten Zielformaten erzeugt werden.</p>
<p>Die Reader entsprechen der Analyse-Phase und die Writer der Synthese-Phase
eines Compilers. Anstelle eines ausführbaren Programms (Maschinencode) wird
ein anderes Textformat erstellt/ausgegeben.</p>
<p>Beispielsweise wird aus diesem Markdown-Schnipsel ...</p>
<pre><code>Dies ist ein Satz mit
*  einem Stichpunkt, und
*  einem zweiten Stichpunkt.
</code></pre>
<p>... dieses Zwischenformat erzeugt, ...</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;blocks&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Para&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Dies&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>           {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;ist&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;ein&#34;</span>},
</span></span><span style="display:flex;"><span>           {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Satz&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>           {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;mit&#34;</span>}]},
</span></span><span style="display:flex;"><span>           {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;BulletList&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Plain&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;einem&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Stichpunkt,&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;und&#34;</span>}]}],[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Plain&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;einem&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;zweiten&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Stichpunkt.&#34;</span>}]}]]}],<span style="color:#f92672">&#34;pandoc-api-version&#34;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">17</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">4</span>],<span style="color:#f92672">&#34;meta&#34;</span>:{}}</span></span></code></pre></div>
<p>... und daraus schließlich dieser TeX-Code.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-latex" data-lang="latex"><span style="display:flex;"><span>Dies ist ein Satz mit
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">\begin</span>{itemize}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">\tightlist</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">\item</span> einem Stichpunkt, und
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">\item</span> einem zweiten Stichpunkt.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">\end</span>{itemize}</span></span></code></pre></div>
<p>Im Prinzip ist Pandoc damit ein Beispiel für Compiler, die aus einem formalen Text nicht
ein ausführbares Programm erzeugen (Maschinencode), sondern einen anderen formalen Text.
Dieser werden häufig auch &quot;Transpiler&quot; genannt.</p>
<p>Weitere Beispiele:</p>
<ul>
<li>Lexer-/Parser-Generatoren: ANTLR, Flex, Bison, ...: formale Grammatik nach Sourcecode</li>
<li>CoffeeScript: CoffeeScript (eine Art &quot;JavaScript light&quot;) nach JavaScript</li>
<li>Emscripten: C/C++ nach LLVM nach WebAssembly (tatsächlich kann LLVM-IR auch direkt
als Input verwendet werden)</li>
<li>Fitnesse: Word/Wiki nach ausführbare Unit-Tests</li>
</ul>
<h2 id="was-bringt-mir-das">Was bringt mir das?</h2>
<div style="text-align:center;">
<span class="badge cstyle primary"><span class="badge-content"><p><span class='alert'><strong>Beschäftigung mit dem schönsten Thema in der Informatik ;-)</strong></span></p>
</span></span>
</div>
<h3 id="auswahl-einiger-gründe-für-den-besuch-des-moduls-compilerbau">Auswahl einiger Gründe für den Besuch des Moduls &quot;Compilerbau&quot;</h3>
<ul>
<li>Erstellung eigener kleiner Interpreter/Compiler
<ul>
<li>Einlesen von komplexen Daten</li>
<li>DSL als Brücke zwischen Stakeholdern</li>
<li>DSL zum schnelleren Programmieren (denken Sie etwa an <a href="http://coffeescript.org/" rel="external" target="_blank">CoffeeScript</a> ...)</li>
</ul>
</li>
<li>Wie funktionieren FindBugs, Lint und ähnliche Tools?
<ul>
<li>Statische Codeanalyse: Dead code elimination</li>
</ul>
</li>
<li>Language-theoretic Security: <a href="http://langsec.org/" rel="external" target="_blank">LangSec</a></li>
<li>Verständnis für bestimmte Sprachkonstrukte und -konzepte (etwa <code>virtual</code> in C++)</li>
<li>Vertiefung durch Besuch &quot;echter&quot; Compilerbau-Veranstaltungen an Uni möglich :-)</li>
<li>Wie funktioniert:
<ul>
<li>ein Python-Interpreter?</li>
<li>das Syntaxhighlighting in einem Editor oder in Doxygen?</li>
<li>ein Hardwarecompiler (etwa VHDL)?</li>
<li>ein Text-Formatierer (TeX, LaTeX, ...)?</li>
<li>CoffeeScript oder Emscripten?</li>
</ul>
</li>
<li>Wie kann man einen eigenen Compiler/Interpreter basteln, etwa für
<ul>
<li>MiniJava (mit C-Backend)</li>
<li>Brainfuck</li>
<li>Übersetzung von JSON nach XML</li>
</ul>
</li>
<li>Um eine profundes Kenntnis von Programmiersprachen zu erlangen, ist eine
Beschäftigung mit ihrer Implementierung unerlässlich.</li>
<li>Viele Grundtechniken der Informatik und elementare Datenstrukturen wie
Keller, Listen, Abbildungen, Bäume, Graphen, Automaten etc. finden im
Compilerbau Anwendung. Dadurch schließt sich in gewisser Weise der Kreis
in der Informatikausbildung ...</li>
<li>Aufgrund seiner Reife gibt es hervorragende Beispiele von formaler
Spezifikation im Compilerbau.</li>
<li>Mit dem Gebiet der formalen Sprachen berührt der Compilerbau interessante
Aspekte moderner Linguistik. Damit ergibt sich letztlich eine Verbindung
zur KI ...</li>
<li>Die Unterscheidung von Syntax und Semantik ist eine grundlegende Technik
in fast allen formalen Systeme.</li>
</ul>
<h3 id="parser-generatoren-auswahl">Parser-Generatoren (Auswahl)</h3>
<p>Diese Tools könnte man beispielsweise nutzen, um seine eigene Sprache zu basteln.</p>
<ul>
<li>ANTLR (ANother Tool for Language Recognition) is a powerful parser generator for reading, processing, executing, or translating structured text or binary files: <a href="https://github.com/antlr/antlr4" rel="external" target="_blank">github.com/antlr/antlr4</a></li>
<li>Grammars written for ANTLR v4; expectation that the grammars are free of actions: <a href="https://github.com/antlr/grammars-v4" rel="external" target="_blank">github.com/antlr/grammars-v4</a></li>
<li>An incremental parsing system for programmings tools: <a href="https://github.com/tree-sitter/tree-sitter" rel="external" target="_blank">github.com/tree-sitter/tree-sitter</a></li>
<li>Flex, the Fast Lexical Analyzer - scanner generator for lexing in C and C++: <a href="https://github.com/westes/flex" rel="external" target="_blank">github.com/westes/flex</a></li>
<li>Bison is a general-purpose parser generator that converts an annotated context-free grammar into a deterministic LR or generalized LR (GLR) parser employing LALR(1) parser tables: <a href="https://www.gnu.org/software/bison/" rel="external" target="_blank">gnu.org/software/bison</a></li>
<li>Parser combinators for binary formats, in C: <a href="https://github.com/UpstandingHackers/hammer" rel="external" target="_blank">github.com/UpstandingHackers/hammer</a></li>
<li>Eclipse Xtext is a language development framework: <a href="https://github.com/eclipse/xtext" rel="external" target="_blank">github.com/eclipse/xtext</a></li>
</ul>
<h3 id="statische-analyse-type-checking-und-linter">Statische Analyse, Type-Checking und Linter</h3>
<p>Als Startpunkt für eigene Ideen. Oder Verbessern/Erweitern der Projekte ...</p>
<ul>
<li>Pluggable type-checking for Java: <a href="https://github.com/typetools/checker-framework" rel="external" target="_blank">github.com/typetools/checker-framework</a></li>
<li>SpotBugs is FindBugs' successor. A tool for static analysis to look for bugs in Java code: <a href="https://github.com/spotbugs/spotbugs" rel="external" target="_blank">github.com/spotbugs/spotbugs</a></li>
<li>An extensible cross-language static code analyzer: <a href="https://github.com/pmd/pmd" rel="external" target="_blank">github.com/pmd/pmd</a></li>
<li>Checkstyle is a development tool to help programmers write Java code that adheres to a coding standard: <a href="https://github.com/checkstyle/checkstyle" rel="external" target="_blank">github.com/checkstyle/checkstyle</a></li>
<li>JaCoCo - Java Code Coverage Library: <a href="https://github.com/jacoco/jacoco" rel="external" target="_blank">github.com/jacoco/jacoco</a></li>
<li>Sanitizers: memory error detector: <a href="https://github.com/google/sanitizers" rel="external" target="_blank">github.com/google/sanitizers</a></li>
<li>JSHint is a tool that helps to detect errors and potential problems in your JavaScript code: <a href="https://github.com/jshint/jshint" rel="external" target="_blank">github.com/jshint/jshint</a></li>
<li>Haskell source code suggestions: <a href="https://github.com/ndmitchell/hlint" rel="external" target="_blank">github.com/ndmitchell/hlint</a></li>
<li>Syntax checking hacks for vim: <a href="https://github.com/vim-syntastic/syntastic" rel="external" target="_blank">github.com/vim-syntastic/syntastic</a></li>
</ul>
<h3 id="dsl-domain-specific-language">DSL (Domain Specific Language)</h3>
<ul>
<li>NVIDIA Material Definition Language SDK: <a href="https://github.com/NVIDIA/MDL-SDK" rel="external" target="_blank">github.com/NVIDIA/MDL-SDK</a></li>
<li>FitNesse -- The Acceptance Test Wiki: <a href="https://github.com/unclebob/fitnesse" rel="external" target="_blank">github.com/unclebob/fitnesse</a></li>
</ul>
<p>Hier noch ein Framework, welches auf das Erstellen von DSL spezialisiert ist:</p>
<ul>
<li>Eclipse Xtext is a language development framework: <a href="https://github.com/eclipse/xtext" rel="external" target="_blank">github.com/eclipse/xtext</a></li>
</ul>
<h3 id="konverter-von-x-nach-y">Konverter von X nach Y</h3>
<ul>
<li>Emscripten: An LLVM-to-JavaScript Compiler: <a href="https://github.com/kripken/emscripten" rel="external" target="_blank">github.com/kripken/emscripten</a></li>
<li>&quot;Unfancy JavaScript&quot;: <a href="https://github.com/jashkenas/coffeescript" rel="external" target="_blank">github.com/jashkenas/coffeescript</a></li>
<li>Universal markup converter: <a href="https://github.com/jgm/pandoc" rel="external" target="_blank">github.com/jgm/pandoc</a></li>
<li>Übersetzung von JSON nach XML</li>
</ul>
<h3 id="odds-and-ends">Odds and Ends</h3>
<ul>
<li>How to write your own compiler: <a href="http://staff.polito.it/silvano.rivoira/HowToWriteYourOwnCompiler.htm" rel="external" target="_blank">staff.polito.it/silvano.rivoira/HowToWriteYourOwnCompiler.htm</a></li>
<li>Building a modern functional compiler from first principles: <a href="https://github.com/sdiehl/write-you-a-haskell" rel="external" target="_blank">github.com/sdiehl/write-you-a-haskell</a></li>
<li>Language-theoretic Security: <a href="http://langsec.org/" rel="external" target="_blank">LangSec</a></li>
<li>Generierung von automatisierten Tests mit <a href="http://esprima.org/" rel="external" target="_blank">Esprima</a>: <a href="https://www.heise.de/developer/artikel/Generierung-von-automatisierten-Tests-mit-Esprima-4129726.html?view=print" rel="external" target="_blank">heise.de/-4129726</a></li>
<li>Eigener kleiner Compiler/Interpreter, etwa für
<ul>
<li>MiniJava mit C-Backend oder sogar <a href="http://llvm.org/" rel="external" target="_blank">LLVM</a>-Backend</li>
<li>Brainfuck</li>
</ul>
</li>
</ul>
<h3 id="als-weitere-anregung-themen-der-mini-projekte-im-w17">Als weitere Anregung: Themen der Mini-Projekte im W17</h3>
<ul>
<li>Java2UMLet</li>
<li>JavaDoc-to-Markdown</li>
<li>Validierung und Übersetzung von Google Protocol Buffers v3 nach JSON</li>
<li>svg2tikz</li>
<li>SwaggerLang -- Schreiben wie im Tagebuch</li>
<li>Markdown zu LaTeX</li>
<li>JavaDocToLaTeX</li>
<li>MySQL2REDIS-Parser</li>
</ul>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Compiler übersetzen formalen Text in ein anderes Format</p>
</li>
<li>
<p>Nicht alle Stufen kommen immer vor =&gt; unterschiedliche Anwendungen</p>
<ul>
<li>&quot;Echte&quot; Compiler: Sourcecode nach Maschinencode</li>
<li>Interpreter: Interaktive Ausführung</li>
<li>Virtuelle Maschinen als Zwischending zwischen Compiler und Interpreter</li>
<li>Transpiler: formaler Text nach formalem Text</li>
<li>Analysetools: Parsen den Sourcecode, werten die Strukturen aus</li>
</ul>
</li>
</ul>


    



    



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.<br><em>Kapitel 1 Introduction</em></li> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 1 Introduction</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="lexikalische-analyse">Lexikalische Analyse</h1>

<p>In der lexikalischen Analyse soll ein Lexer (auch &quot;Scanner&quot;) den Zeichenstrom in eine
Folge von Token zerlegen. Zur Spezifikation der Token werden in der Regel reguläre
Ausdrücke verwendet.</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/regular.html">Reguläre Sprachen, Ausdrucksstärke</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/01-lexing/antlr-lexing.html">Lexer mit ANTLR generieren</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Lexikalische Analyse</h1>
<article class="default">
<h1>Reguläre Sprachen, Ausdrucksstärke</h1>



    
    




    
    
        
        
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="far fa-file-powerpoint"></i> Annotierte Folien
  </div>
  <div class="box-content">
<ul> <li><a href='https://raw.githubusercontent.com/Compiler-CampusMinden/AnnotatedSlides/master/lexing_regular.ann.ba.pdf' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Annotierte Folien: Reguläre Sprachen, Ausdrucksstärke</a></li></ul>
  </div>
</div>




    <h1 id="motivation">Motivation</h1>
<h2 id="was-muss-ein-compiler-wohl-als-erstes-tun">Was muss ein Compiler wohl als erstes tun?</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="themen-für-heute">Themen für heute</h2>
<ul>
<li>Endliche Automaten</li>
<li>Reguläre Sprachen</li>
<li>Lexer</li>
</ul>
<h1 id="endliche-automaten">Endliche Automaten</h1>
<h2 id="alphabete">Alphabete</h2>
<p><strong>Def.:</strong> Ein <strong>Alphabet</strong> <span class="math align-center">$\Sigma$</span> ist eine endliche, nicht-leere Menge von Symbolen. Die Symbole eines Alphabets heißen <em>Buchstaben</em>.</p>
<p><strong>Def.:</strong> Ein <strong>Wort</strong> <span class="math align-center">$w$</span> <em>über einem Alphabet</em> <span class="math align-center">$\Sigma$</span> ist eine endliche Folge von Symbolen aus <span class="math align-center">$\Sigma$</span>.
<span class="math align-center">$\epsilon$</span> ist das leere Wort.
Die <em>Länge</em> <span class="math align-center">$\vert w \vert$</span> eines Wortes <span class="math align-center">$w$</span> ist die Anzahl von Buchstaben, die es enthält (Kardinalität).</p>
<p><strong>Def.:</strong> Eine <strong>Sprache</strong> <span class="math align-center">$L$</span> <em>über einem Alphabet</em> <span class="math align-center">$\Sigma$</span> ist eine Menge von Wörtern über diesem Alphabet.
Sprachen können endlich oder unendlich viele Wörter enthalten.</p>
<h2 id="beispiel">Beispiel</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="deterministische-endliche-automaten">Deterministische endliche Automaten</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="heading"></h2>
<p><strong>Def.:</strong> Ein <strong>deterministischer endlicher Automat</strong> (DFA) ist ein 5-Tupel
<span class="math align-center">$A = (Q, \Sigma, \delta, q_0, F)$</span> mit</p>
<ul>
<li>
<p><span class="math align-center">$Q$</span> : endliche Menge von <strong>Zuständen</strong></p>
</li>
<li>
<p><span class="math align-center">$\Sigma$</span> : Alphabet von <strong>Eingabesymbolen</strong></p>
</li>
<li>
<p><span class="math align-center">$\delta$</span> : die (eventuell partielle) <strong>Übergangsfunktion</strong> <span class="math align-center">$(Q \times \Sigma) \rightarrow Q$</span>,
<span class="math align-center">$\delta$</span> kann partiell sein</p>
</li>
<li>
<p><span class="math align-center">$q_0 \in Q$</span> : der <strong>Startzustand</strong></p>
</li>
<li>
<p><span class="math align-center">$F \subseteq Q$</span> : die Menge der <strong>Endzustände</strong></p>
</li>
</ul>
<h2 id="die-übergangsfunktion">Die Übergangsfunktion</h2>
<p><strong>Def.:</strong> Wir definieren <span class="math align-center">$\delta^{\ast}: (Q \times \Sigma^{\ast}) \rightarrow Q$</span>: induktiv wie folgt:</p>
<ul>
<li>
<p>Basis: <span class="math align-center">$\delta^{\ast}(q, \epsilon) = q\ \forall q \in Q$</span></p>
</li>
<li>
<p>Induktion: <span class="math align-center">$\delta^{\ast}(q, a_1, \ldots, a_n) = \delta(\delta^{\ast}(q, a_1, \ldots , a_{n-1}), a_n)$</span></p>
</li>
</ul>
<p><strong>Def.:</strong> Ein DFA akzeptiert ein Wort <span class="math align-center">$w \in \Sigma^{\ast}$</span> genau dann, wenn <span class="math align-center">$\delta^{\ast}(q_0, w) \in F.$</span></p>
<h2 id="beispiel-1">Beispiel</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="nichtdeterministische-endliche-automaten">Nichtdeterministische endliche Automaten</h2>
<p><strong>Def.:</strong> Ein <strong>nichtdeterministischer endlicher Automat</strong> (NFA) ist ein 5-Tupel
<span class="math align-center">$A = (Q, \Sigma, \delta, q_0, F)$</span> mit</p>
<ul>
<li>
<p><span class="math align-center">$Q$</span> : endliche Menge von <strong>Zuständen</strong></p>
</li>
<li>
<p><span class="math align-center">$\Sigma$</span> : Alphabet von <strong>Eingabesymbolen</strong></p>
</li>
<li>
<p><span class="math align-center">$\delta$</span> : die (eventuell partielle) <strong>Übergangsfunktion</strong> <span class="math align-center">$(Q \times \Sigma) \rightarrow Q$</span></p>
</li>
<li>
<p><span class="math align-center">$q_0 \in Q$</span> : der <strong>Startzustand</strong></p>
</li>
<li>
<p><span class="math align-center">$F \subseteq Q$</span> : die Menge der <strong>Endzustände</strong></p>
</li>
</ul>
<h2 id="akzeptierte-sprachen">Akzeptierte Sprachen</h2>
<p><strong>Def.:</strong> Sei A ein DFA oder ein NFA. Dann ist <strong>L(A)</strong> die von A akzeptierte Sprache, d. h.</p>
<span class="math align-center">$L(A) = \lbrace \text{Wörter}\ w\ |\ \delta^*(q_0, w) \in F \rbrace$</span>
<h2 id="wozu-nfas-im-compilerbau">Wozu NFAs im Compilerbau?</h2>
<p>Pattern Matching (Erkennung von Schlüsselwörtern, Bezeichnern, ...) geht mit NFAs.</p>
<p>NFAs sind so nicht zu programmieren, aber:</p>
<p><strong>Satz:</strong> Eine Sprache <span class="math align-center">$L$</span> wird von einem NFA akzeptiert <span class="math align-center">$\Leftrightarrow L$</span> wird von einem DFA akzeptiert.</p>
<p>D. h. es existieren Algorithmen zur</p>
<ul>
<li>Umwandlung von NFAs in DFAS</li>
<li>Minimierung von DFAs</li>
</ul>
<h1 id="reguläre-sprachen">Reguläre Sprachen</h1>
<h2 id="reguläre-ausdrücke-definieren-sprachen">Reguläre Ausdrücke definieren Sprachen</h2>
<p><strong>Def.:</strong> Induktive Definition von <strong>regulären Ausdrücken</strong> (regex) und der von ihnen repräsentierten Sprache <strong>L</strong>:</p>
<ul>
<li>
<p>Basis:</p>
<ul>
<li><span class="math align-center">$\epsilon$</span> und <span class="math align-center">$\emptyset$</span> sind reguläre Ausdrücke mit <span class="math align-center">$L(\epsilon) =
          \lbrace \epsilon\rbrace$</span>, <span class="math align-center">$L(\emptyset)=\emptyset$</span></li>
<li>Sei <span class="math align-center">$a$</span> ein Symbol <span class="math align-center">$\Rightarrow$</span> <span class="math align-center">$a$</span> ist ein regex mit <span class="math align-center">$L(a) = \lbrace a\rbrace$</span></li>
</ul>
</li>
<li>
<p>Induktion: Seien <span class="math align-center">$E,\ F$</span> reguläre Ausdrücke. Dann gilt:</p>
<ul>
<li><span class="math align-center">$E+F$</span> ist ein regex und bezeichnet die Vereinigung <span class="math align-center">$L(E + F) = L(E)\cup L(F)$</span></li>
<li><span class="math align-center">$EF$</span> ist ein regex und bezeichnet die Konkatenation <span class="math align-center">$L(EF) = L(E)L(F)$</span></li>
<li><span class="math align-center">$E^{\ast}$</span> ist ein regex und bezeichnet die Kleene-Hülle <span class="math align-center">$L(E^{\ast})=(L(E))^{\ast}$</span></li>
<li><span class="math align-center">$(E)$</span> ist ein regex mit <span class="math align-center">$L((E)) = L(E)$</span></li>
</ul>
</li>
</ul>
<p>Vorrangregeln der Operatoren für reguläre Ausdrücke: *, Konkatenation, +</p>
<h2 id="beispiel-2">Beispiel</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="wichtige-identitäten">Wichtige Identitäten</h2>
<p><strong>Satz:</strong> Sei <span class="math align-center">$A$</span> ein DFA <span class="math align-center">$\Rightarrow \exists$</span> regex <span class="math align-center">$R$</span> mit <span class="math align-center">$L(A) = L(R)$</span>.</p>
<p><strong>Satz:</strong> Sei <span class="math align-center">$E$</span> ein regex <span class="math align-center">$\Rightarrow \exists$</span> DFA <span class="math align-center">$A$</span> mit <span class="math align-center">$L(E) = L(A)$</span>.</p>
<h2 id="formale-grammatiken">Formale Grammatiken</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="formale-definition-formaler-grammatiken">Formale Definition formaler Grammatiken</h2>
<p><strong>Def.:</strong> Eine <em>formale Grammatik</em> ist ein 4-Tupel <span class="math align-center">$G=(N,T,P,S)$</span> aus</p>
<ul>
<li>
<p><span class="math align-center">$N$</span>: endliche Menge von <strong>Nichtterminalen</strong></p>
</li>
<li>
<p><span class="math align-center">$T$</span>: endliche Menge von <strong>Terminalen</strong>, <span class="math align-center">$N \cap T = \emptyset$</span></p>
</li>
<li>
<p><span class="math align-center">$S \in N$</span>: <strong>Startsymbol</strong></p>
</li>
<li>
<p><span class="math align-center">$P$</span>: endliche Menge von <strong>Produktionen</strong> der Form</p>
</li>
</ul>
<p><span class="math align-center">$\qquad X \rightarrow Y$</span> mit <span class="math align-center">$X \in (N \cup T)^{\ast} N  (N \cup T)^{\ast}, Y \in (N \cup T)^{\ast}$</span></p>
<h2 id="ableitungen">Ableitungen</h2>
<p><strong>Def.:</strong> Sei <span class="math align-center">$G = (N, T, P, S)$</span> eine Grammatik, sei <span class="math align-center">$\alpha A \beta$</span> eine Zeichenkette über
<span class="math align-center">$(N \cup T)^{\ast}$</span> und sei <span class="math align-center">$A$</span> <span class="math align-center">$\rightarrow \gamma$</span> eine Produktion von <span class="math align-center">$G$</span>.</p>
<p>Wir schreiben:
<span class="math align-center">$\alpha A \beta \Rightarrow \alpha \gamma \beta$</span> (<span class="math align-center">$\alpha A \beta$</span> leitet <span class="math align-center">$\alpha \gamma \beta$</span> ab).</p>
<p><strong>Def.:</strong> Wir definieren die Relation <span class="math align-center">$\overset{\ast}{\Rightarrow}$</span> induktiv wie folgt:</p>
<ul>
<li>
<p>Basis: <span class="math align-center">$\forall \alpha \in (N \cup T)^{\ast} \alpha \overset{\ast}{\Rightarrow} \alpha$</span> (Jede Zeichenkette leitet sich selbst ab.)</p>
</li>
<li>
<p>Induktion: Wenn <span class="math align-center">$\alpha \overset{\ast}{\Rightarrow} \beta$</span> und
<span class="math align-center">$\beta\Rightarrow \gamma$</span> dann <span class="math align-center">$\alpha \overset{\ast}{\Rightarrow} \gamma$</span></p>
</li>
</ul>
<p><strong>Def.:</strong> Sei <span class="math align-center">$G = (N, T ,P, S)$</span> eine formale Grammatik.
Dann ist <span class="math align-center">$L(G) = \lbrace \text{Wörter}\ w\ \text{über}\ T \mid S \overset{\ast}{\Rightarrow} w\rbrace$</span> die von <span class="math align-center">$G$</span> erzeugte Sprache.</p>
<h2 id="beispiel-3">Beispiel</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="reguläre-grammatiken">Reguläre Grammatiken</h2>
<p><strong>Def.:</strong> Eine <strong>reguläre (oder type-3-) Grammatik</strong> ist eine formale Grammatik mit den folgenden Einschränkungen:</p>
<ul>
<li>
<p>Alle Produktionen sind entweder von der Form</p>
<ul>
<li><span class="math align-center">$X \to aY$</span> mit <span class="math align-center">$X \in N, a \in T, Y \in N$</span> (<em>rechtsreguläre</em> Grammatik) oder</li>
<li><span class="math align-center">$X \to Ya$</span> mit <span class="math align-center">$X \in N, a \in T, Y \in N$</span> (<em>linksreguläre</em> Grammatik)</li>
</ul>
</li>
<li>
<p><span class="math align-center">$X\rightarrow\epsilon$</span> ist erlaubt</p>
</li>
</ul>
<h2 id="beispiel-4">Beispiel</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="reguläre-sprachen-und-ihre-grenzen">Reguläre Sprachen und ihre Grenzen</h2>
<p><strong>Satz:</strong> Die von endlichen Automaten akzeptiert Sprachklasse, die von regulären Ausdrücken beschriebene Sprachklasse und die von regulären Grammatiken erzeugte Sprachklasse sind identisch und heißen <strong>reguläre Sprachen</strong>.</p>
<p><strong>Reguläre Sprachen</strong></p>
<ul>
<li>einfache Struktur</li>
<li>Matchen von Symbolen (z. B. Klammern) nicht möglich, da die fixe Anzahl von Zuständen eines DFAs die Erkennung solcher Sprachen verhindert.</li>
</ul>
<h2 id="wozu-reguläre-sprachen-im-compilerbau">Wozu reguläre Sprachen im Compilerbau?</h2>
<ul>
<li>
<p>Reguläre Ausdrücke</p>
<ul>
<li>definieren Schlüsselwörter und alle weiteren Symbole einer Programmiersprache, z. B. den Aufbau von Gleitkommazahlen</li>
<li>werden (oft von einem Generator) in DFAs umgewandelt</li>
<li>sind die Basis des <em>Scanners</em> oder <em>Lexers</em></li>
</ul>
</li>
</ul>
<h1 id="lexer">Lexer</h1>
<h2 id="ein-lexer-ist-mehr-als-ein-dfa">Ein Lexer ist mehr als ein DFA</h2>
<ul>
<li>
<p>Ein <strong>Lexer</strong></p>
<ul>
<li>
<p>wandelt mittels DFAs aus regulären Ausdrücken die Folge von Zeichen der Quelldatei in eine Folge von sog. Token um</p>
</li>
<li>
<p>bekommt als Input eine Liste von Paaren aus regulären Ausdrücken und Tokennamen, z. B. (&quot;while&quot;, WHILE)</p>
</li>
<li>
<p>Kommentare und Strings müssen richtig erkannt werden. (Schachtelungen)</p>
</li>
<li>
<p>liefert Paare von Token und deren Werte, sofern benötigt, z. B. (WHILE, _), oder (IDENTIFIER, &quot;radius&quot;) oder (INTEGERZAHL, &quot;334&quot;)</p>
</li>
</ul>
</li>
</ul>
<h2 id="wie-geht-es-weiter">Wie geht es weiter?</h2>
<ul>
<li>
<p>Ein <strong>Parser</strong></p>
<ul>
<li>
<p>führt mit Hilfe des Tokenstreams vom Lexer die Syntaxanalyse durch</p>
</li>
<li>
<p>basiert auf einer sog. kontextfreien Grammatik, deren Terminale die Token sind</p>
</li>
<li>
<p>liefert die syntaktische Struktur in Form eines Ableitungsbaums (<strong>syntax tree</strong>, <strong>parse tree</strong>), bzw. einen <strong>AST</strong> (abstract syntax tree) ohne redundante Informationen im Ableitungsbaum (z. B. Semikolons)</p>
</li>
<li>
<p>liefert evtl. Fehlermeldungen</p>
</li>
</ul>
</li>
</ul>
<h1 id="wrap-up">Wrap-Up</h1>
<h2 id="wrap-up-1">Wrap-Up</h2>
<ul>
<li>Definition und Aufgaben von Lexern</li>
<li>DFAs und NFAs</li>
<li>Reguläre Ausdrücke</li>
<li>Reguläre Grammatiken</li>
<li>Zusammenhänge zwischen diesen Mechanismen und Lexern, bzw. Lexergeneratoren</li>
</ul>


    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.<br><em>Abschnitt 2.6 und Kapitel 3</em></li> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.</li> <li id='id_Torczon2012'>[Torczon2012] <a href='https://learning.oreilly.com/library/view/engineering-a-compiler/9780080916613/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Engineering a Compiler</strong></a><br>Torczon, L. und Cooper, K., Morgan Kaufmann, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-0-1208-8478-0' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-0-1208-8478-0</a>.<br><em>Kapitel 2</em></li></ul>
  </div>
</div>



    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) DFAs</li> <li>(K1) Reguläre Ausdrücke</li> <li>(K1) Reguläre Grammatiken</li> <li>(K2) Zusammenhänge und Gesetzmäßigkeiten bzgl. der oben genannten Konstrukte</li> <li>(K3) DFAs, reguläre Ausdrücke, reguläre Grammatiken entwickeln</li> <li>(K3) Einen DFA entwickeln, der alle Schlüsselwörter, Namen und weitere Symbole einer Programmiersprache akzeptiert</li></ul>
  </div>
</div>



    







<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>Lexer mit ANTLR generieren</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>ANTLR ist ein Parser-Generator, der aus einer Grammatik einen Parser in verschiedenen
Zielsprachen (Java, Python, C++, ...) generieren kann.</p>
<p>In der ANTLR-Grammatik werden die Parser-Regeln klein geschrieben, die Lexer-Regeln werden
mit <strong>Großbuchstaben</strong> geschrieben. Jede Lexer-Regel liefert ein Token zurück, dabei
ist der Tokenname die linke Seite der Regel. Wie bei Flex gewinnt der längste Match,
und bei Gleichstand (mehrere längste Regeln matchen) gewinnt die zuerst definierte Regel.</p>
<p>Die Lexer-Regeln können mit Aktionen annotiert werden, die beim Matchen der jeweiligen Regel
abgearbeitet werden. Diese Aktionen müssen in der Zielprogrammiersprache formuliert werden,
da sie in die generierte Lexerklasse in die jeweiligen Methoden eingebettet werden.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/dvx8RLirfp0' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Lexer mit ANTLR</a></li> <li><a href='https://youtu.be/pbjGThqVLkU' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Demo ANTLR Basics</a></li> <li><a href='https://youtu.be/vnJIm6S-898' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Demo Verhalten Lexer-Regeln</a></li> <li><a href='https://youtu.be/bNpgqctiQM8' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Demo Lexer-Regeln mit Aktionen</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/5a434cef0848efaa850e8153cba24dbe79d02f1e3423d9eb363a998024b01ed397e3fe425584fb6bb57828efbbe0e5a2b04f01e30e8fd972fc4ddc78b2b8c6f8' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Lexer mit ANTLR</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Lexer-Regeln in ANTLR formulieren und einsetzen</li> <li>(K2) Verhalten des Lexers: längste Matches, Reihenfolge</li> <li>(K3) Nutzung von Lexer-Aktionen</li></ul>
  </div>
</div>




    <h2 id="lexer-erzeugen-eines-token-stroms-aus-einem-zeichenstrom">Lexer: Erzeugen eines Token-Stroms aus einem Zeichenstrom</h2>
<p>Aus dem Eingabe(-quell-)text</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* demo */</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>  , <span style="color:#ae81ff">6</span>]     ;</span></span></code></pre></div>
<p>erstellt der Lexer (oder auch Scanner genannt) eine Sequenz von Token:</p>
<pre><code>&lt;ID, &quot;a&quot;&gt; &lt;ASSIGN&gt; &lt;LBRACK&gt; &lt;NUM, 5&gt; &lt;COMMA&gt; &lt;NUM, 6&gt; &lt;RBRACK&gt; &lt;SEMICOL&gt;
</code></pre>
<ul>
<li>Input: Zeichenstrom (Eingabedatei o.ä.)</li>
<li>Verarbeitung: Finden sinnvoller Sequenzen im Zeichenstrom (&quot;Lexeme&quot;),
Einteilung in Kategorien und Erzeugen von Token (Paare: Typ/Name, Wert)</li>
<li>Ausgabe: Tokenstrom</li>
</ul>
<p>Normalerweise werden für spätere Phasen unwichtige Elemente wie White-Space
oder Kommentare entfernt.</p>
<p>Durch diese Vorverarbeitung wird eine höhere Abstraktionsstufe erreicht und es
können erste grobe Fehler gefunden werden. Dadurch kann der Parser auf einer
abstrakteren Stufe arbeiten und muss nicht mehr den gesamten ursprünglichen
Zeichenstrom verarbeiten.</p>
<p><em>Anmerkung</em>: In dieser Phase steht die Geschwindigkeit stark im Vordergrund:
Der Lexer &quot;sieht&quot; <em>alle</em> Zeichen im Input. Deshalb findet man häufig von
Hand kodierte Lexer, obwohl die Erstellung der Lexer auch durch Generatoren
erledigt werden könnte ...</p>
<p><em>Anmerkung</em>: Die Token sind die Terminalsymbole in den Parserregeln (Grammatik).</p>
<h2 id="definition-wichtiger-begriffe">Definition wichtiger Begriffe</h2>
<ul>
<li>
<p><strong>Token</strong>: Tupel (Tokenname, optional: Wert)</p>
<p>Der Tokenname ist ein abstraktes Symbol, welches eine lexikalische
Einheit repräsentiert (Kategorie). Die Tokennamen sind die Eingabesymbole
für den Parser.</p>
<p>Token werden i.d.R. einfach über ihren Namen referenziert. Token werden
häufig zur Unterscheidung von anderen Symbolen in der Grammatik in
Fettschrift oder mit großen Anfangsbuchstaben geschrieben.</p>
<p>Ein Token kann einen Wert haben, etwa eine Zahl oder einen Bezeichner, der
auf das zum Token gehörende Pattern gematcht hatte (also das Lexem). Wenn
der Wert des Tokens eindeutig über den Namen bestimmt ist (im Beispiel oben
beim Komma oder den Klammern), dann wird häufig auf den Wert verzichtet.</p>
</li>
<li>
<p><strong>Lexeme</strong>: Sequenz von Zeichen im Eingabestrom, die auf ein Tokenpattern
matcht und vom Lexer als Instanz dieses Tokens identifiziert wird.</p>
</li>
<li>
<p><strong>Pattern</strong>: Beschreibung der Form eines Lexems</p>
<p>Bei Schlüsselwörtern oder Klammern etc. sind dies die Schlüsselwörter oder
Klammern selbst. Bei Zahlen oder Bezeichnern (Namen) werden i.d.R.
reguläre Ausdrücke zur Beschreibung der Form des Lexems formuliert.</p>
</li>
</ul>
<h2 id="typische-muster-für-erstellung-von-token">Typische Muster für Erstellung von Token</h2>
<ol>
<li>
<p>Schlüsselwörter</p>
<ul>
<li>Ein eigenes Token (RE/DFA) für jedes Schlüsselwort, oder</li>
<li>Erkennung als Name und Vergleich mit Wörterbuch
und nachträgliche Korrektur des Tokentyps</li>
</ul>
<p>Wenn Schlüsselwörter über je ein eigenes Token abgebildet werden, benötigt
man für jedes Schlüsselwort einen eigenen RE bzw. DFA. Die Erkennung als
Bezeichner und das Nachschlagen in einem Wörterbuch (geeignete Hashtabelle)
sowie die entsprechende nachträgliche Korrektur des Tokentyps kann die
Anzahl der Zustände im Lexer signifikant reduzieren!</p>
</li>
<li>
<p>Operatoren</p>
<ul>
<li>Ein eigenes Token für jeden Operator, oder</li>
<li>Gemeinsames Token für jede Operatoren-Klasse</li>
</ul>
</li>
<li>
<p>Bezeichner: Ein gemeinsames Token für alle Namen</p>
</li>
<li>
<p>Zahlen: Ein gemeinsames Token für alle numerischen Konstante
(ggf. Integer und Float unterscheiden)</p>
<p>Für Zahlen führt man oft ein Token &quot;<code>NUM</code>&quot; ein. Als Attribut speichert man
das Lexem i.d.R. als String. Alternativ kann man (zusätzlich) das Lexem in
eine Zahl konvertieren und als (zusätzliches) Attribut speichern. Dies kann
in späteren Stufen viel Arbeit sparen.</p>
</li>
<li>
<p>String-Literale: Ein gemeinsames Token</p>
</li>
<li>
<p>Komma, Semikolon, Klammern, ...: Je ein eigenes Token</p>
</li>
<li>
<p>Regeln für White-Space und Kommentare etc. ...</p>
<p>Normalerweise benötigt man Kommentare und White-Spaces in den folgenden
Stufen nicht und entfernt diese deshalb aus dem Eingabestrom. Dabei könnte
man etwa White-Spaces in den Pattern der restlichen Token berücksichtigen,
was die Pattern aber sehr komplex macht. Die Alternative sind zusätzliche
Pattern, die auf die White-Space und anderen nicht benötigten Inhalt
matchen und diesen &quot;geräuschlos&quot; entfernen. Mit diesen Pattern werden
keine Token erzeugt, d.h. der Parser und die anderen Stufen bemerken nichts
von diesem Inhalt.</p>
<p>Gelegentlich benötigt man aber auch Informationen über White-Spaces,
beispielsweise in Python. Dann müssen diese Token wie normale Token
an den Parser weitergereicht werden.</p>
</li>
</ol>
<p>Jedes Token hat i.d.R. ein Attribut, in dem das Lexem gespeichert wird. Bei
eindeutigen Token (etwa bei eigenen Token je Schlüsselwort oder bei den
Interpunktions-Token) kann man sich das Attribut auch sparen, da das Lexem
durch den Tokennamen eindeutig rekonstruierbar ist.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Token</th>
          <th style="text-align: left">Beschreibung</th>
          <th style="text-align: left">Beispiel-Lexeme</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>if</code></td>
          <td style="text-align: left">Zeichen <code>i</code> und <code>f</code></td>
          <td style="text-align: left"><code>if</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>relop</code></td>
          <td style="text-align: left"><code>&lt;</code> oder <code>&gt;</code> oder <code>&lt;=</code> oder <code>&gt;=</code> oder <code>==</code> oder <code>!=</code></td>
          <td style="text-align: left"><code>&lt;</code>, <code>&lt;=</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>id</code></td>
          <td style="text-align: left">Buchstabe, gefolgt von Buchstaben oder Ziffern</td>
          <td style="text-align: left"><code>pi</code>, <code>count</code>, <code>x3</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>num</code></td>
          <td style="text-align: left">Numerische Konstante</td>
          <td style="text-align: left"><code>42</code>, <code>3.14159</code>, <code>0</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>literal</code></td>
          <td style="text-align: left">Alle Zeichen außer <code>&quot;</code>, in <code>&quot;</code> eingeschlossen</td>
          <td style="text-align: left"><code>&quot;core dumped&quot;</code></td>
      </tr>
  </tbody>
</table>
<p><em>Anmerkung</em>: Wenn es mehrere matchende REs gibt, wird in der Regel das längste
Lexem bevorzugt. Wenn es mehrere gleich lange Alternativen gibt, muss man mit
Vorrangregeln bzgl. der Token arbeiten.</p>
<h2 id="hello-world">Hello World</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span><span style="color:#66d9ef">grammar</span> <span style="color:#a6e22e">Hello</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>start       : <span style="color:#e6db74">&#39;hello&#39;</span> <span style="color:#66d9ef">GREETING</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>GREETING    : [a-zA-Z]<span style="color:#f92672">+</span> ;
</span></span><span style="display:flex;"><span>WHITESPACE  : [ \t\n]<span style="color:#f92672">+</span> <span style="color:#f92672">-&gt;</span> skip ;</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/01-lexing/src/Hello.g4" target="_blank"><span class="title">Konsole: Hello (Classpath, Aliase, grun, Main, Dateien, Ausgabe)</span></a></span></div>
<h3 id="hinweis-zur-grammatik-regeln">Hinweis zur Grammatik (Regeln)</h3>
<ul>
<li><code>start</code> ist eine <span class='alert'>Parser-Regel</span>
=&gt; Eine Parser-Regel pro Grammatik wird benötigt, damit man den generierten
Parser am Ende auch starten kann ...</li>
<li>Die anderen beiden Regeln (mit großem Anfangsbuchstaben) aus der obigen Grammatik
zählen zum Lexer</li>
</ul>
<h3 id="antlr-einrichten">ANTLR einrichten</h3>
<ul>
<li>Aktuelle Version herunterladen: <a href="https://www.antlr.org/download.html" rel="external" target="_blank">antlr.org</a>,
für Java als Zielsprache: <a href="https://www.antlr.org/download/antlr-4.11.1-complete.jar" rel="external" target="_blank">&quot;Complete ANTLR 4.x Java binaries jar&quot;</a></li>
<li>CLASSPATH setzen: <code>export CLASSPATH=&quot;.:/&lt;pathToJar&gt;/antlr-4.11.1-complete.jar:$CLASSPATH&quot;</code></li>
<li>Aliase einrichten (<code>.bashrc</code>):
<ul>
<li><code>alias antlr='java org.antlr.v4.Tool'</code></li>
<li><code>alias grun='java org.antlr.v4.gui.TestRig'</code></li>
</ul>
</li>
<li>Alternativ über den Python-Installer: <code>pip install antlr4-tools</code></li>
<li>Im Web ohne lokale Installation: <a href="http://lab.antlr.org/" rel="external" target="_blank">ANTLR Lab</a></li>
</ul>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/getting-started.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/getting-started.md</a>)</p>
<h3 id="hello-world-übersetzen-und-ausführen">&quot;Hello World&quot; übersetzen und ausführen</h3>
<ol>
<li>Grammatik übersetzen und Code generieren: <code>antlr Hello.g4</code></li>
<li>Java-Code kompilieren: <code>javac *.java</code></li>
<li>Lexer ausführen:
<ul>
<li>
<p><code>grun Hello start -tokens</code> (Grammatik &quot;Hello&quot;, Startregel &quot;start&quot;)</p>
</li>
<li>
<p>Alternativ mit kleinem Java-Programm:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.antlr.v4.runtime.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        Lexer l <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HelloLexer(CharStreams.<span style="color:#a6e22e">fromStream</span>(System.<span style="color:#a6e22e">in</span>));
</span></span><span style="display:flex;"><span>        Token t <span style="color:#f92672">=</span> l.<span style="color:#a6e22e">nextToken</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (t.<span style="color:#a6e22e">getType</span>() <span style="color:#f92672">!=</span> Token.<span style="color:#a6e22e">EOF</span>) {
</span></span><span style="display:flex;"><span>            System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(t);
</span></span><span style="display:flex;"><span>            t <span style="color:#f92672">=</span> l.<span style="color:#a6e22e">nextToken</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
</li>
</ol>
<h3 id="generierte-dateien-und-klassen">Generierte Dateien und Klassen</h3>
<p>Nach dem Übersetzen finden sich folgende Dateien und Klassen vor:</p>
<pre><code>.
├── bin
│   ├── HelloBaseListener.class
│   ├── HelloBaseVisitor.class
│   ├── HelloLexer.class
│   ├── HelloListener.class
│   ├── HelloParser.class
│   ├── HelloParser$RContext.class
│   ├── HelloVisitor.class
│   └── Main.class
├── Hello.g4
└── src
    ├── HelloBaseListener.java
    ├── HelloBaseVisitor.java
    ├── HelloLexer.java
    ├── HelloLexer.tokens
    ├── HelloListener.java
    ├── HelloParser.java
    ├── Hello.tokens
    ├── HelloVisitor.java
    └── Main.java
</code></pre>
<p><em>Anmerkung</em>: Die Ordnerstruktur wurde durch ein ANTLR-Plugin für Eclipse
erzeugt. Bei Ausführung in der Konsole liegen alle Dateien in einem Ordner.</p>
<p><em>Anmerkung</em>: Per Default werden nur die Listener angelegt, für die Visitoren
muss eine extra Option mitgegeben werden.</p>
<p>Die Dateien <code>Hello.tokens</code> und <code>HelloLexer.tokens</code> enthalten die Token samt
einer internen Nummer. (Der Inhalt beider Dateien ist identisch.)</p>
<p>Die Datei <code>HelloLexer.java</code> enthält den generierten Lexer, der eine
Spezialisierung der abstrakten Basisklasse <code>Lexer</code> darstellt. Über den
Konstruktor wird der zu scannende <code>CharStream</code> gesetzt. Über die Methode
<code>Lexer#nextToken()</code> kann man sich die erkannten Token der Reihe nach
zurückgeben lassen. (Diese Methode wird letztlich vom Parser benutzt.)</p>
<p>Die restlichen Dateien werden für den Parser und verschiedene Arten der
Traversierung des AST generiert (vgl.
<a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1.html">AST-basierte Interpreter</a>).</p>
<h3 id="bedeutung-der-ausgabe">Bedeutung der Ausgabe</h3>
<p>Wenn man dem Hello-Lexer die Eingabe</p>
<pre><code>hello world
&lt;EOF&gt;
</code></pre>
<p>(das <code>&lt;EOF&gt;</code> wird durch die Tastenkombination <code>STRG-D</code> erreicht) gibt, dann
lautet die Ausgabe</p>
<pre><code>$ grun Hello start -tokens
hello world
&lt;EOF&gt;
[@0,0:4='hello',&lt;'hello'&gt;,1:0]
[@1,6:10='world',&lt;GREETING&gt;,1:6]
[@2,12:11='&lt;EOF&gt;',&lt;EOF&gt;,2:0]
</code></pre>
<p>Die erkannten Token werden jeweils auf einer eigenen Zeile ausgegeben.</p>
<ul>
<li><code>@0</code>: Das erste Token (fortlaufend nummeriert, beginnend mit 0)</li>
<li><code>0:4</code>: Das Token umfasst die Zeichen 0 bis 4 im Eingabestrom</li>
<li><code>='hello'</code>: Das gefundene Lexem (Wert des Tokens)</li>
<li><code>&lt;'hello'&gt;</code>: Das Token (Name/Typ des Tokens)</li>
<li><code>1:0</code>: Das Token wurde in Zeile 1 gefunden (Start der Nummerierung mit
Zeile 1), und startet in dieser Zeile an Position 0</li>
</ul>
<p>Entsprechend bekommt man mit</p>
<pre><code>$ grun Hello start -tokens
hello
  world

&lt;EOF&gt;
[@0,0:4='hello',&lt;'hello'&gt;,1:0]
[@1,8:12='world',&lt;GREETING&gt;,2:2]
[@2,15:14='&lt;EOF&gt;',&lt;EOF&gt;,4:0]
</code></pre>
<h3 id="antlr-grammatik-für-die-lexer-generierung">ANTLR-Grammatik für die Lexer-Generierung</h3>
<ul>
<li>
<p>Start der Grammatik mit dem Namen &quot;<code>XYZ</code>&quot; mit</p>
<pre><code>grammar XYZ;
</code></pre>
<p>oder (nur Lexer)</p>
<pre><code>lexer grammar XYZ;
</code></pre>
</li>
<li>
<p>Token und Lexer-Regeln starten mit <em>großen Anfangsbuchstaben</em>
(Ausblick: Parser-Regeln starten mit kleinen Anfangsbuchstaben)</p>
<p>Format: <code>TokenName : Alternative1 | ... | AlternativeN ;</code></p>
<p>Rekursive Lexer-Regeln sind erlaubt. <strong>Achtung</strong>: Es dürfen keine
<em>links-rekursiven</em> Regeln genutzt werden, etwa wie <code>ID : ID '*' ID ;</code> ...
(Eine genauere Definition und die Transformation in nicht-linksrekursive
Regeln siehe <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg.html">CFG</a>).</p>
</li>
<li>
<p>Alle Literale werden in <em>einfache</em> Anführungszeichen eingeschlossen
(es erfolgt keine Unterscheidung zwischen einzelnen Zeichen und Strings
wie in anderen Sprachen)</p>
</li>
<li>
<p>Zeichenmengen: <code>[a-z\n]</code> umfasst alle Zeichen von <code>'a'</code> bis <code>'z'</code> sowie
<code>'\n'</code></p>
<p><code>'a'..'z'</code> ist identisch zu <code>[a-z]</code></p>
</li>
<li>
<p>Schlüsselwörter: Die folgenden Strings stellen reservierte Schlüsselwörter
dar und dürfen nicht als Token, Regel oder Label genutzt werden:</p>
<pre><code>import, fragment, lexer, parser, grammar, returns, locals, throws, catch, finally, mode, options, tokens
</code></pre>
<p><em>Anmerkung</em>: <code>rule</code> ist zwar kein Schlüsselwort, wird aber als Methodenname
bei der Codegenerierung verwendet. =&gt; Wie ein Schlüsselwort behandeln!</p>
</li>
</ul>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/lexicon.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/lexicon.md</a>)</p>
<h3 id="greedy-und-non-greedy-lexer-regeln">Greedy und Non-greedy Lexer-Regeln</h3>
<p>Die regulären Ausdrücke <code>(...)?</code>, <code>(...)*</code> und <code>(...)+</code> sind <em>greedy</em> und
versuchen soviel Input wie möglich zu matchen.</p>
<p>Falls dies nicht sinnvoll sein sollte, kann man mit einem weiteren <code>?</code> das
Verhalten auf <em>non-greedy</em> umschalten. Allerdings können non-greedy Regeln
das Verhalten des Lexers u.U. schwer vorhersehbar machen!</p>
<p>Die Empfehlung ist, non-greedy Lexer-Regeln nur sparsam einzusetzen
(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/wildcard.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/wildcard.md</a>).</p>
<h2 id="verhalten-des-lexers-1-längster-match">Verhalten des Lexers: 1. Längster Match</h2>
<p>Primäres Ziel: Erkennen der längsten Zeichenkette</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>CHARS   : [a-z]<span style="color:#f92672">+</span> ;
</span></span><span style="display:flex;"><span>DIGITS  : [0-9]<span style="color:#f92672">+</span> ;
</span></span><span style="display:flex;"><span>FOO     : [a-z]<span style="color:#f92672">+</span> [0-9]<span style="color:#f92672">+</span> ;</span></span></code></pre></div>
<p>Die Regel, die den längsten Match für die aktuelle Eingabesequenz produziert,
&quot;gewinnt&quot;.</p>
<p>Im Beispiel würde ein &quot;foo42&quot; als <code>FOO</code> erkannt und nicht als <code>CHARS DIGITS</code>.</p>
<h2 id="verhalten-des-lexers-2-reihenfolge">Verhalten des Lexers: 2. Reihenfolge</h2>
<p>Reihenfolge in Grammatik definiert Priorität</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>FOO     : <span style="color:#e6db74">&#39;f&#39;</span> <span style="color:#f92672">.*?</span> <span style="color:#e6db74">&#39;r&#39;</span> ;
</span></span><span style="display:flex;"><span>BAR     : <span style="color:#e6db74">&#39;foo&#39;</span> <span style="color:#f92672">.*?</span> <span style="color:#e6db74">&#39;bar&#39;</span> ;</span></span></code></pre></div>
<p>Falls mehr als eine Lexer-Regel die selbe Inputsequenz matcht, dann
hat die in der Grammatik zuerst genannte Regel Priorität.</p>
<p>Im Beispiel würden für die Eingabe &quot;foo42bar&quot; beide Regeln den selben längsten
Match liefern - die Regel <code>FOO</code> ist in der Grammatik früher definiert und
&quot;gewinnt&quot;.</p>
<h2 id="verhalten-des-lexers-3-non-greedy-regeln">Verhalten des Lexers: 3. Non-greedy Regeln</h2>
<p>Non-greedy Regeln versuchen <em>so wenig</em> Zeichen wie möglich zu matchen</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>FOO     : <span style="color:#e6db74">&#39;foo&#39;</span> <span style="color:#f92672">.*?</span> <span style="color:#e6db74">&#39;bar&#39;</span> ;
</span></span><span style="display:flex;"><span>BAR     : <span style="color:#e6db74">&#39;bar&#39;</span> ;</span></span></code></pre></div>
<p>Hier würde ein &quot;foo42barbar&quot; zu <code>FOO</code> gefolgt von <code>BAR</code> erkannt werden.</p>
<p><span class='alert'>Achtung</span>: Nach dem Abarbeiten einer non-greedy Sub-Regel in einer Lexer-Regel
gilt &quot;<em>first match wins</em>&quot;</p>
<p><code>.*? ('4' | '42')</code></p>
<p>=&gt; Der Teil <code>'42'</code> auf der rechten Seite ist
&quot;toter Code&quot; (wegen der non-greedy Sub-Regel <code>.*?</code>)!</p>
<p>Die Eingabe &quot;x4&quot; würde korrekt erkannt, währende &quot;x42&quot; nur als &quot;x4&quot; erkannt wird und für
die verbleibende &quot;2&quot; würde ein <em>token recognition error</em> geworfen.</p>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/wildcard.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/wildcard.md</a>)</p>
<h2 id="attribute-und-aktionen">Attribute und Aktionen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span><span style="color:#66d9ef">grammar</span> <span style="color:#a6e22e">Demo</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@header {
</span></span><span style="display:flex;"><span>import java.util.*;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>@members {
</span></span><span style="display:flex;"><span>String s = &#34;&#34;;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>start   : <span style="color:#66d9ef">TYPE</span> <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#66d9ef">INT</span> <span style="color:#e6db74">&#39;;&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TYPE    : <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;int&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;float&#39;</span><span style="color:#f92672">)</span> {s = getText();} ;
</span></span><span style="display:flex;"><span>INT     : [0-9]<span style="color:#f92672">+</span>            {System.out.println(s+&#34;:&#34;+Integer.valueOf(getText()));};
</span></span><span style="display:flex;"><span>ID      : [a-z]<span style="color:#f92672">+</span>            {setText(String.valueOf(getText().charAt(0)));} ;
</span></span><span style="display:flex;"><span>WS      : [ \t\n]<span style="color:#f92672">+</span> <span style="color:#f92672">-&gt;</span> skip ;</span></span></code></pre></div>
<h3 id="attribute-bei-token-auswahl">Attribute bei Token (Auswahl)</h3>
<p>Token haben Attribute, die man abfragen kann. Dies umfasst u.a. folgende Felder:</p>
<ul>
<li><code>text</code>: Das gefundene Lexem als String</li>
<li><code>type</code>: Der Token-Typ als Integer</li>
<li><code>index</code>: Das wievielte Token (als Integer)</li>
</ul>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/actions.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/actions.md</a>)</p>
<p>Zur Auswertung in den Lexer-Regeln muss man anders vorgehen als in
Parser-Regeln: Nach der Erstellung eines Tokens kann man die zum Attribut
gehörenden <code>getX()</code> und <code>setX()</code>-Methoden aufrufen, um die Werte abzufragen
oder zu ändern.</p>
<p>Dies passiert im obigen Beispiel für das Attribut <code>text</code>: Abfrage mit
<code>getText()</code>, Ändern/Setzen mit <code>setText()</code>.</p>
<p>Die Methodenaufrufe wirken sich immer auf das gerade erstellte Token aus.</p>
<p><em>Achtung</em>: Bei Aktionen in Parser-Regeln gelten andere Spielregeln!</p>
<h3 id="aktionen-mit-den-lexer-regeln">Aktionen mit den Lexer-Regeln</h3>
<p>Aktionen für Lexer-Regeln sind Code-Blöcke in der Zielsprache, eingeschlossen
in geschweifte Klammern. Die Code-Blöcke werden direkt in die generierten
Lexer-Methoden kopiert.</p>
<p>Zusätzlich:</p>
<ul>
<li><code>@header</code>: Package-Deklarationen und/oder Importe (wird vor der
Klassendefinition eingefügt)</li>
<li><code>@members</code>: zusätzliche Attribute für die generierten Lexer- (und
Parser-) Klassen.</li>
</ul>
<p>Mit <code>@lexer::header</code> bzw. <code>@lexer::members</code> werden diese Codeblöcke nur in den
generierten Lexer eingefügt.</p>
<p><em>Anmerkung</em>: Lexer-Aktionen müssen am Ende der äußersten Alternative erscheinen.
Wenn eine Lexer-Regel mehr als eine Alternative hat, müssen diese in runde
Klammern eingeschlossen werden.</p>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/grammars.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/grammars.md</a>)</p>
<h2 id="wrap-up">Wrap-Up</h2>
<p>Lexer mit ANTLR generieren: Lexer-Regeln werden mit <strong>Großbuchstaben</strong> geschrieben</p>
<ul>
<li>Längster Match gewinnt, Gleichstand: zuerst definierte Regel</li>
<li><em>non greedy</em>-Regeln: versuche so <em>wenig</em> Zeichen zu matchen wie möglich</li>
<li>Aktionen beim Matchen</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Token und Lexer-Regeln mit ANTLR</strong></p>
<p>Formulieren Sie für ANTLR Lexer-Regeln, mit denen folgende Token erkannt werden:</p>
<ul>
<li>White-Space: Leerzeichen, Tabs, Zeilenumbrüche</li>
<li>Vergleichsoperatoren: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>&lt;&gt;</code></li>
<li>If: <code>if</code></li>
<li>Then: <code>then</code></li>
<li>Else: <code>else</code></li>
<li>Namen: Ein Buchstabe, gefolgt von beliebig vielen weiteren Buchstaben und/oder Ziffern</li>
<li>Numerische Konstanten: Mindestens eine Ziffer, gefolgt von maximal einem Paar bestehend aus einem Punkt und mindestens einer Ziffer, gefolgt von maximal einem Paar bestehend aus dem Buchstaben &quot;E&quot; gefolgt von einem &quot;+&quot; oder &quot;-&quot; und mindestens einer Ziffer.</li>
</ul>
<p>Formulieren Sie Hilfskonstrukte zur Verwendung in mehreren Lexer-Regeln als ANTLR-Fragmente.</p>
<p>White-Spaces sollen entfernt werden und nicht als Token weitergereicht werden.</p>
<p><strong>Real-World-Lexer mit ANTLR: Programmiersprache Lox</strong></p>
<p>Betrachten Sie folgenden Code-Schnipsel in der Sprache <a href="https://www.craftinginterpreters.com/the-lox-language.html" rel="external" target="_blank">&quot;Lox&quot;</a>:</p>
<pre><code>fun fib(x) {
    if (x == 0) {
        return 0;
    } else {
        if (x == 1) {
            return 1;
        } else {
            fib(x - 1) + fib(x - 2);
        }
    }
}

var wuppie = fib(4);
</code></pre>
<p>Erstellen Sie für diese fiktive Sprache einen Lexer mit ANTLR. Die genauere Sprachdefinition finden Sie unter <a href="https://www.craftinginterpreters.com/the-lox-language.html" rel="external" target="_blank">craftinginterpreters.com/the-lox-language.html</a>.</p>
<p><strong>Pig-Latin mit ANTLR-Lexer</strong></p>
<p>Schreiben Sie eine Lexer-Grammatik mit eingebetteten Aktionen für ANTLR sowie ein passendes Programm zur Einbindung des generierten Lexers, welches einen Text nach <a href="https://de.wikipedia.org/wiki/Pig_Latin" rel="external" target="_blank">Pig Latin</a> übersetzt:</p>
<ul>
<li>Ist der erste Buchstabe eines Wortes ein Konsonant, schiebe ihn ans Ende des Wortes und füge &quot;ay&quot; an.</li>
<li>Ist der erste Buchstabe eines Wortes ein Vokal, hänge an das Wort ein &quot;ay&quot; an.</li>
</ul>
<p><strong>Lexing mit ANTLR</strong></p>
<p>In einem Telefonbuch sind zeilenweise Namen und Telefonnummern gespeichert.</p>
<p>Definieren Sie eine Lexer-Grammatik für ANTLR, mit der Sie die Zeilen einlesen können. Können Sie dabei verschiedene Formate der Telefonnummern berücksichtigen?</p>
<pre><code>Heinz 030 5346 983
Kalle +49 30 1234 567
Lina +49.571.8385-255
Rosi (0571) 8385-268
</code></pre>
<p>Können Sie die Grammatik so anpassen, dass Sie nur möglichst wenige verschiedene Token an den Parser weitergeben?</p>
<p>Ergänzen Sie Ihre Grammatik um Lexer-Aktionen, so dass Sie die Zeilen, die Zeichen (in den Namen) und die Ziffern (in den Telefonnummern) zählen können.</p>
<p><strong>Lexing mit ANTLR</strong></p>
<p>IBAN für Deutschland bestehen aus dem Kürzel &quot;DE&quot; sowie einer zweistelligen Checksumme, gefolgt von 2x 4 Ziffern für die
Bank (ehemalige Bankleitzahl) sowie 2x 4 Ziffern für die ehemalige Kontonummer sowie zwei weiteren Ziffern. Typisch sind
zwei Formate:</p>
<ul>
<li>Menschenlesbares Format: <code>DEcc bbbb bbbb kkkk kkkk xx</code></li>
<li>Maschinenlesbares Format: <code>DEccbbbbbbbbkkkkkkkkxx</code></li>
</ul>
<p>Definieren Sie eine Lexer-Grammatik für ANTLR, mit der Sie die verschiedenen IBAN-Formate für Deutschland einlesen können.</p>
  </div>
</div>



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 01: Reguläre Sprachen</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="syntaktische-analyse">Syntaktische Analyse</h1>

<p>In der syntaktischen Analyse arbeitet ein Parser mit dem Tokenstrom, der vom Lexer kommt.
Mit Hilfe einer Grammatik wird geprüft, ob gültige Sätze im Sinne der Sprache/Grammatik
gebildet wurden. Der Parser erzeugt dabei den Parse-Tree. Man kann verschiedene Parser
unterscheiden, beispielsweise die LL- und die LR-Parser.</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg.html">CFG</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing.html">Parser mit ANTLR generieren</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Syntaktische Analyse</h1>
<article class="default">
<h1>CFG</h1>



    
    




    
    
        
        
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="far fa-file-powerpoint"></i> Annotierte Folien
  </div>
  <div class="box-content">
<ul> <li><a href='https://raw.githubusercontent.com/Compiler-CampusMinden/AnnotatedSlides/master/frontend_parsing_cfg.ann.ba.pdf' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Annotierte Folien: CFG, LL-Parser</a></li></ul>
  </div>
</div>




    <h1 id="wiederholung">Wiederholung</h1>
<h2 id="endliche-automaten-reguläre-ausdrücke-reguläre-grammatiken-reguläre-sprachen">Endliche Automaten, reguläre Ausdrücke, reguläre Grammatiken, reguläre Sprachen</h2>
<ul>
<li>Wie sind DFAs und NFAs definiert?</li>
<li>Was sind reguläre Ausdrücke?</li>
<li>Was sind formale und reguläre Grammatiken?</li>
<li>In welchem Zusammenhang stehen all diese Begriffe?</li>
<li>Wie werden DFAs und reguläre Ausdrücke im Compilerbau eingesetzt?</li>
</ul>
<h1 id="motivation">Motivation</h1>
<h2 id="wofür-reichen-reguläre-sprachen-nicht">Wofür reichen reguläre Sprachen nicht?</h2>
<p>Für z. B. alle Sprachen, in deren Wörtern Zeichen über eine Konstante hinaus gezählt werden müssen. Diese Sprachen lassen sich oft mit Variablen im Exponenten beschreiben, die unendlich viele Werte annehmen können.</p>
<ul>
<li>
<p><span class="math align-center">$a^ib^{2*i}$</span> ist nicht regulär</p>
</li>
<li>
<p><span class="math align-center">$a^ib^{2*i}$</span> für <span class="math align-center">$0 \leq i \leq 3$</span> ist regulär</p>
</li>
<li>
<p>Wo finden sich die oben genannten Variablen bei einem DFA wieder?</p>
</li>
<li>
<p>Warum ist die erste Sprache oben nicht regulär, die zweite aber?</p>
</li>
</ul>
<h2 id="themen-für-heute">Themen für heute</h2>
<ul>
<li>PDAs: mächtiger als DFAs, NFAs</li>
<li>kontextfreie Grammatiken und Sprachen: mächtiger als reguläre Grammatiken und Sprachen</li>
<li>DPDAs und deterministisch kontextfreie Grammatiken: die Grundlage der Syntaxanalyse im Compilerbau</li>
<li>Der Einsatz kontextfreier Grammatiken zur Syntaxanalyse mittels Top-Down-Techniken</li>
</ul>
<h2 id="einordnung-erweiterung-der-automatenklasse-dfa-um-komplexere-sprachen-als-die-regulären-akzeptieren-zu-können">Einordnung: Erweiterung der Automatenklasse DFA, um komplexere Sprachen als die regulären akzeptieren zu können</h2>
<p>Wir spendieren den DFAs einen möglichst einfachen, aber beliebig großen, Speicher, um zählen und matchen zu können. Wir suchen dabei konzeptionell die &quot;kleinstmögliche&quot; Erweiterung, die die akzeptierte Sprachklasse gegenüber DFAs vergrößert.</p>
<ul>
<li>
<p>Der konzeptionell einfachste Speicher ist ein Stack. Wir haben keinen wahlfreien Zugriff auf die gespeicherten Werte.</p>
</li>
<li>
<p>Es soll eine deterministische und eine indeterministische Variante der neuen Automatenklasse geben.</p>
</li>
<li>
<p>In diesem Zusammenhang wird der Stack auch Keller genannt.</p>
</li>
</ul>
<h2 id="kellerautomaten-push-down-automata-pdas">Kellerautomaten (Push-Down-Automata, PDAs)</h2>
<p><strong>Def.:</strong> Ein Kellerautomat (PDA) <span class="math align-center">$P = (Q,\ \Sigma,\ \Gamma,\  \delta,\ q_0,\ \perp,\ F)$</span>
ist ein Septupel mit:</p>
<figure class="center">
    <img src="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg/Def_PDA.png" alt="Definition eines PDAs" width="60%" height="auto">
    <figcaption><p>Definition eines PDAs</p></figcaption>
</figure>
<p>Ein PDA ist per Definition nichtdeterministisch und kann spontane Zustandsübergänge durchführen.</p>
<h2 id="was-kann-man-damit-akzeptieren">Was kann man damit akzeptieren?</h2>
<p>Strukturen mit paarweise zu matchenden Symbolen.</p>
<p>Bei jedem Zustandsübergang wird ein Zeichen (oder <span class="math align-center">$\epsilon$</span>) aus der Eingabe gelesen, ein Symbol von Keller genommen. Diese und das Eingabezeichen bestimmen den Folgezustand und eine Zeichenfolge, die auf den Stack gepackt wird. Dabei wird ein Symbol, (z. B. eines, das später mit einem Eingabesymbol zu matchen ist,) auf den Stack gepackt. Soll das automatisch vom Stack genommene Symbol auf dem Stack bleiben, muss es wieder gepusht werden.</p>
<h2 id="beispiel">Beispiel</h2>
<p>Ein PDA für <span class="math align-center">$L=\lbrace ww^{R}\mid w\in \lbrace a,b\rbrace^{\ast}\rbrace$</span>:</p>
<p><a href="#R-image-91665825043224079ed3cf144c88c3e6" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg/pda2.png?width=45%25&height=auto" style=" height: auto; width: 45%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-91665825043224079ed3cf144c88c3e6"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg/pda2.png?width=45%25&height=auto"></a></p>
<h2 id="deterministische-pdas">Deterministische PDAs</h2>
<p><strong>Def.</strong> Ein PDA <span class="math align-center">$P = (Q, \Sigma, \Gamma, \delta, q_0, \perp, F)$</span> ist <em>deterministisch</em>
<span class="math align-center">$: \Leftrightarrow$</span></p>
<ul>
<li>
<p><span class="math align-center">$\delta(q, a, X)$</span> hat höchstens ein Element für jedes <span class="math align-center">$q \in Q, a \in\Sigma$</span> oder <span class="math align-center">$(a = \epsilon$</span> und <span class="math align-center">$X \in \Gamma)$</span>.</p>
</li>
<li>
<p>Wenn <span class="math align-center">$\delta (q, a, x)$</span> nicht leer ist für ein <span class="math align-center">$a \in \Sigma$</span>, dann muss <span class="math align-center">$\delta (q, \epsilon, x)$</span> leer sein.</p>
</li>
</ul>
<p>Deterministische PDAs werden auch <em>DPDAs</em> genannt.</p>
<h2 id="der-kleine-unterschied">Der kleine Unterschied</h2>
<p><strong>Satz:</strong> Die von DPDAs akzeptierten Sprachen sind eine echte Teilmenge der von
PDAs akzeptierten Sprachen.</p>
<p>Die regulären Sprachen sind eine echte Teilmenge der von DPDAs akzeptierten Sprachen.</p>
<h1 id="kontextfreie-grammatiken-und-sprachen">Kontextfreie Grammatiken und Sprachen</h1>
<h2 id="kontextfreie-grammatiken">Kontextfreie Grammatiken</h2>
<p><strong>Def.</strong> Eine <em>kontextfreie (cf-)</em> Grammatik ist ein 4-Tupel <span class="math align-center">$G = (N, T, P, S)$</span> mit <span class="math align-center">$N, T, S$</span> wie in
(formalen) Grammatiken und <span class="math align-center">$P$</span> ist eine endliche Menge von Produktionen der Form:</p>
<p><span class="math align-center">$X \rightarrow Y$</span> mit <span class="math align-center">$X \in N, Y \in {(N \cup T)}^{\ast}$</span>.</p>
<p><span class="math align-center">$\Rightarrow, \overset{\ast}{\Rightarrow}$</span> sind definiert wie bei regulären Sprachen. Bei cf-Grammatiken nennt man die Ableitungsbäume oft <em>Parse trees</em>.</p>
<h2 id="beispiel-1">Beispiel</h2>
<span class="math align-center">$S \rightarrow a \mid S\ +\  S\ |\  S \ast S$</span>
<p>Ableitungsbäume für <span class="math align-center">$a + a \ast a$</span>:</p>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="nicht-jede-kontextfreie-grammatik-ist-eindeutig">Nicht jede kontextfreie Grammatik ist eindeutig</h2>
<p><strong>Def.:</strong> Gibt es in einer von einer kontextfreien Grammatik erzeugten Sprache ein
Wort, für das mehr als ein Ableitungsbaum existiert, so heißt diese Grammatik
<em>mehrdeutig</em>. Anderenfalls heißt sie <em>eindeutig</em>.</p>
<p><strong>Satz:</strong> Es ist nicht entscheidbar, ob eine gegebene kontextfreie Grammatik eindeutig ist.</p>
<p><strong>Satz:</strong> Es gibt kontextfreie Sprachen, für die keine eindeutige Grammatik existiert.</p>
<h2 id="kontextfreie-grammatiken-und-pdas">Kontextfreie Grammatiken und PDAs</h2>
<p><strong>Satz:</strong> Die kontextfreien Sprachen und die Sprachen, die von PDAs akzeptiert werden, sind dieselbe Sprachklasse.</p>
<p><strong>Satz:</strong> Eine von einem DPDA akzeptierteSprache hat eine eindeutige Grammatik.</p>
<p>Vorgehensweise im Compilerbau: Eine Grammatik für die gewünschte Sprache definieren und schauen, ob sich daraus ein DPDA generieren lässt (automatisch).</p>
<h1 id="syntaxanalyse">Syntaxanalyse</h1>
<h2 id="was-brauchen-wir-für-die-syntaxanalyse-von-programmen">Was brauchen wir für die Syntaxanalyse von Programmen?</h2>
<ul>
<li>
<p>einen Grammatiktypen, aus dem sich manuell oder automatisiert ein Programm zur deterministischen Syntaxanalyse (=Parser) erstellen lässt</p>
</li>
<li>
<p>einen Algorithmus zum Parsen von Programmen mit Hilfe einer solchen Grammatik</p>
</li>
</ul>
<h2 id="syntax">Syntax</h2>
<p>Wir verstehen unter Syntax eine Menge von Regeln, die die Struktur von Daten (z. B. Programmen) bestimmen.</p>
<p>Diese vorgegebene Syntax wird im Compilerbau mit einer kontextfreien Grammatik beschrieben und mit einem sogenannten <strong>Parser</strong> analysiert.</p>
<p>Heute: LL-Parsing, mit dem man eine Teilmenge der eindeutigen kontextfreien Grammatiken syntaktich analysieren kann.</p>
<p>Dabei wird der Ableitungsbaum von oben nach unten aufgebaut.</p>
<h2 id="ziele-der-syntaxanalyse">Ziele der Syntaxanalyse</h2>
<ul>
<li>
<p>Bestimmung der syntaktischen Struktur eines Programms</p>
</li>
<li>
<p>aussagekräftige Fehlermeldungen, wenn ein Eingabeprogramm syntaktisch nicht korrekt ist</p>
</li>
<li>
<p>Erstellung des AST (abstrakter Syntaxbaum): Der Parse Tree ohne Symbole, die nach der Syntaxanalyse inhaltlich irrelevant sind (z. B. Semikolons, manche Schlüsselwörter)</p>
</li>
<li>
<p>die Symboltablelle(n) mit Informationen bzgl. Bezeichner (Variable, Funktionen und Methoden, Klassen, benutzerdefinierte Typen, Parameter, ...), aber auch die Gültigkeitsbereiche.</p>
</li>
</ul>
<h1 id="llk-grammatiken">LL(k)-Grammatiken</h1>
<h2 id="first-mengen">First-Mengen</h2>
<span class="math align-center">$S \rightarrow A \ \vert \ B \ \vert \ C$</span>
<p>Welche Produktion nehmen?</p>
<p>Wir brauchen die &quot;terminalen k-Anfänge&quot; von Ableitungen von Nichtterminalen, um eindeutig die nächste zu benutzende Produktion festzulegen. <span class="math align-center">$k$</span> ist dabei die Anzahl der Vorschautoken.</p>
<p><strong>Def.:</strong> Wir definieren <span class="math align-center">$First$</span> - Mengen einer Grammatik wie folgt:</p>
<ul>
<li><span class="math align-center">$a \in T^\ast, |a| \leq k: {First}_k (a) = \lbrace a \rbrace$</span></li>
<li><span class="math align-center">$a \in T^\ast, |a| > k: {First}_k (a) = \lbrace v \in T^\ast \mid a = vw, |v| = k \rbrace$</span></li>
<li><span class="math align-center">$\alpha \in (N \cup T)^\ast \backslash T^\ast: {First}_k (\alpha) = \lbrace v \in T^\ast \mid  \alpha \overset{\ast}{\Rightarrow} w,\text{mit}\ w \in T^\ast, First_k(w) = \lbrace v \rbrace \rbrace$</span></li>
</ul>
<h2 id="linksableitungen">Linksableitungen</h2>
<p><strong>Def.:</strong> Bei einer kontextfreien Grammatik <span class="math align-center">$G$</span> ist die <em>Linksableitung</em> von <span class="math align-center">$\alpha \in (N \cup T)^{\ast}$</span> die Ableitung, die man erhält, wenn in jedem Schritt das am weitesten links stehende Nichtterminal in <span class="math align-center">$\alpha$</span> abgeleitet wird.</p>
<p>Man schreibt <span class="math align-center">$\alpha \overset{\ast}{\Rightarrow}_l \beta.$</span></p>
<h2 id="llk-grammatiken-1">LL(k)-Grammatiken</h2>
<p><strong>Def.:</strong> Eine kontextfreie Grammatik <span class="math align-center">$G = (N, T, P, S)$</span> ist genau dann eine <em>LL(k)</em>-Grammatik, wenn für alle Linksableitungen der Form:</p>
<span class="math align-center">$S \overset{\ast}{\Rightarrow}_l\ wA \gamma\ {\Rightarrow}_l\ w\alpha\gamma \overset{\ast}{\Rightarrow}_l wx$</span>
<p>und</p>
<span class="math align-center">$S \overset{\ast}{\Rightarrow}_l wA \gamma {\Rightarrow}_l w\beta\gamma \overset{\ast}{\Rightarrow}_l wy$</span>
<p>mit <span class="math align-center">$(w, x, y \in T^\ast, \alpha, \beta, \gamma \in (N \cup T)^\ast, A \in N)$</span> und <span class="math align-center">$First_k(x) = First_k(y)$</span>
gilt:</p>
<span class="math align-center">$\alpha = \beta$</span>
<h2 id="ll1-grammatiken">LL(1)-Grammatiken</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="llk-sprachen">LL(k)-Sprachen</h2>
<p>Die von <em>LL(k)</em>-Grammatiken erzeugten Sprachen sind eine echte Teilmenge der deterministisch parsbaren Sprachen.</p>
<p>Die von <em>LL(k)</em>-Grammatiken erzeugten Sprachen sind eine echte Teilmenge der von <em>LL(k+1)</em>-Grammatiken erzeugten Sprachen.</p>
<p>Für eine kontextfreie Grammatik <span class="math align-center">$G$</span> ist nicht entscheidbar, ob es eine <em>LL(1)</em> - Grammatik <span class="math align-center">$G'$</span> gibt mit <span class="math align-center">$L(G) = L(G')$</span>.</p>
<p>In der Praxis reichen <em>LL(1)</em> - Grammatiken oft. Hier gibt es effiziente Parsergeneratoren (hier: ANTLR), deren Eingabe eine LL-Grammatik ist, und die als Ausgabe den Quellcode eines (effizienten) tabellengesteuerten Parsers generieren.</p>
<h2 id="was-brauchen-wir-zur-erzeugung-eines-llk-parsers">Was brauchen wir zur Erzeugung eines LL(k)-Parsers?</h2>
<ul>
<li>eine <em>LL(k)</em>-Grammatik</li>
<li>die <span class="math align-center">$First_k$</span>-Mengen der rechten Seiten aller Produktionsregeln</li>
<li>die <span class="math align-center">$Follow_k$</span>-Mengen aller Nichtterminale und der rechten Seiten aller Produktionsregeln</li>
<li>das Endezeichen <span class="math align-center">$\perp$</span> hinter dem Eingabewort</li>
</ul>
<p><strong>Def.:</strong> Wir definieren <span class="math align-center">$Follow$</span> - Mengen einer Grammatik wie folgt:</p>
<span class="math align-center">$Follow_k(\beta) = \lbrace w \in T^\ast\ |\ \exists \alpha, \gamma \in (N \cup T)^\ast\ \text{mit}\ S \overset{\ast}{\Rightarrow}_l\ \alpha \beta \gamma\ \text{und}\ w \in First_k(\gamma) \rbrace$</span>
<h2 id="beispiel-first--und-follow-mengen">Beispiel: First- und Follow-Mengen</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="algorithmus-konstruktion-einer-ll-parsertabelle" class="fragile">Algorithmus: Konstruktion einer LL-Parsertabelle</h2>
<p><strong>Eingabe:</strong> Eine Grammatik <span class="math align-center">$G = (N, T, P, S)$</span></p>
<p><strong>Ausgabe:</strong> Eine Parsertabelle <span class="math align-center">$P$</span></p>
<figure class="center">
    <img src="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg/LL-Parsertabelle.png" alt="Algorithmus zur Generierung einer LL-Parsertabelle" width="60%" height="auto">
    <figcaption><p>Algorithmus zur Generierung einer LL-Parsertabelle</p></figcaption>
</figure>
<p>Statt <span class="math align-center">$First_1(\alpha)$</span> wird oft nur <span class="math align-center">$First(\alpha)$</span> geschrieben.</p>
<h2 id="beispiel-ll-parsertabellen">Beispiel: LL-Parsertabellen</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="ll-parser">LL-Parser</h2>
<p>Rekursive Programmierung bedeutet, dass das Laufzeitsystem einen Stack benutzt. Diesen Stack kann man auch &quot;selbst programmieren&quot;, d. h. einen PDA implementieren. Dabei wird ebenfalls die oben genannte Tabelle zur Bestimmung der nächsten anzuwendenden Produktion benutzt. Der Stack enthält die zu erwartenden Eingabezeichen, wenn immer eine Linksableitung gebildet wird. Diese Zeichen im Stack werden mit dem Input gematcht.</p>
<h2 id="algorithmus-tabellengesteuertes-ll-parsen-mit-einem-pda" class="fragile">Algorithmus: Tabellengesteuertes LL-Parsen mit einem PDA</h2>
<p><strong>Eingabe:</strong> Eine Grammatik <span class="math align-center">$G = (N, T, P, S)$</span>, eine Parsertabelle <span class="math align-center">$P$</span> mit &quot;<span class="math align-center">$w\perp$</span>&quot; als initialem Kellerinhalt</p>
<p><strong>Ausgabe:</strong> Wenn <span class="math align-center">$w \in L(G)$</span>, eine Linksableitung von <span class="math align-center">$w$</span>, Fehler sonst</p>
<figure class="center">
    <img src="https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/cfg/LL-Parser.png" alt="Algorithmus zum tabellengesteuerten LL-Parsen" width="49%" height="auto">
    <figcaption><p>Algorithmus zum tabellengesteuerten LL-Parsen</p></figcaption>
</figure>
<h2 id="beispiel-ll-parsen">Beispiel: LL-Parsen</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h2 id="ergebnisse-der-syntaxanalyse">Ergebnisse der Syntaxanalyse</h2>
<ul>
<li>
<p>eventuelle Syntaxfehler mit Angabe der Fehlerart und des -Ortes</p>
</li>
<li>
<p>Format für die Weiterverarbeitung:</p>
<ul>
<li>Ableitungsbaum oder Syntaxbaum oder Parse Tree</li>
<li>abstrakter Syntaxbaum (AST): Der Parse Tree ohne Symbole, die nach der Syntaxanalyse inhaltlich irrelevant sind (z. B. ;, Klammern, manche Schlüsselwörter, <span class="math align-center">$\ldots$</span>)</li>
</ul>
</li>
</ul>
<h1 id="wrap-up">Wrap-Up</h1>
<h2 id="das-sollen-sie-mitnehmen">Das sollen Sie mitnehmen</h2>
<ul>
<li>Die Struktur von gängigen Programmiersprachen lässt sich nicht mit regulären Ausdrücken beschreiben und damit nicht mit DFAs akzeptieren.</li>
<li>Das Automatenmodell der DFAs wird um einen endlosen Stack erweitert, das ergibt PDAs.</li>
<li>Kontextfreie Grammatiken (CFGs) erweitern die regulären Grammatiken.</li>
<li>Deterministisch parsebare Sprachen haben eine eindeutige kontextfreie Grammatik.</li>
<li>Es ist nicht entscheidbar, ob eine gegebene kontextfreie Grammatik eindeutig ist.</li>
<li>Syntaxanalyse wird mit deterministisch kontextfreien Grammatiken durchgeführt.</li>
<li>Eine Teilmenge der dazu gehörigen Sprachen lässt sich top-down parsen.</li>
<li>Ein effizienter LL(k)-Parser realisiert einen DPDA und kann automatisch aus einer LL(k)-Grammatik generiert werden.</li>
<li>Der Parser liefert in der Regel einen abstrakten Syntaxbaum.</li>
</ul>


    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.</li> <li id='id_hopcroft2003'>[hopcroft2003] <strong>Einführung in die Automatentheorie, formale Sprachen und Komplexitätstheorie</strong><br>Hopcroft, J. E. und Motwani, R. und Ullman, J. D., Pearson Education Deutschland GmbH, 2003. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-8273-7020-4' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-8273-7020-4</a>.</li></ul>
  </div>
</div>



    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) PDAs</li> <li>(K1) Deterministische PDAs</li> <li>(K1) Kontextfreie Grammatiken</li> <li>(K1) Deterministisch kontextfreie Grammatiken</li> <li>(K1) Top-Down-Analyse</li> <li>(K1) LL-Parser</li> <li>(K2) Zusammenhang zwischen PDAs und kontextfreien Grammatiken</li></ul>
  </div>
</div>



    







<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>Parser mit ANTLR generieren</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Mit ANTLR kann aus einer Grammatik ein LL(*)-Parser generiert werden. Die Parser-Regeln
in der Grammatik fangen dabei mit einem <strong>Kleinbuchstaben</strong> an (Erinnerung: Lexer-Regel
starten mit einem Großbuchstaben).</p>
<p>Regeln haben einen Namen (linke Seite) und eine Produktion (rechte Seite). Dabei
können beliebige Abfolgen von Lexer- und Parser-Regeln auf der rechten Seite
einer Parser-Regel auftauchen. Die Token müssen jeweils matchen, die Parser-Regeln
werden in einen Aufruf der jeweiligen generierten Funktion übersetzt.</p>
<p>Parser-Regeln können aus mehreren Alternativen bestehen, diese werden per <code>|</code> separiert.
Dabei hat bei Mehrdeutigkeiten die erste passende Alternative Vorrang. Wie bei Lexer-Regeln
können Teile per <code>?</code> ein- oder keinmal vorkommen, per <code>*</code> beliebig oft oder per <code>+</code> ein-
oder mehrfach.</p>
<p>ANTLR erlaubt im Gegensatz zu allgemeinen LL-Parsern direkte Links-Rekursion. (Indirekte
Links-Rekursion funktioniert allerdings nicht.)</p>
<p>Der von ANTLR generierte Parser erzeugt auf der Eingabe einen Parse-Tree, der die Strukturen
der Grammatik widerspiegelt: Die Token bilden die Blätter und jede erfolgreich durchlaufene
Parser-Regel bildet einen entsprechenden Knoten im Baum.</p>
<p>Für die Traversierung des Parse-Tree kann man die generierten Listener- oder Visitor-Klassen
nutzen. Beim Einsatz der Listener nutzt man die vorgegebene Klasse <code>ParseTreeWalker</code>, die
mit dem Parse-Tree und dem Listener den Baum per Tiefensuche traversiert und immer die
jeweiligen <code>enterRegel</code>- und <code>exitRegel</code>-Methoden aufruft. Beim Visitor muss die Traversierung
selbst erledigt werden, hier steht die aus der Klassenhierarchie geerbte Methode <code>visit</code>
als Startpunkt zur Verfügung. In dieser Methode wird basierend auf dem Knotentyp die in den
Visitor-Klassen implementierte <code>visitRegel</code>-Methode aufgerufen und man muss darauf achten,
die Kindknoten durch passende Aufrufe zu traversieren. Sowohl bei den generierten Listener-
als auch den Visitor-Klassen kann man die leeren Defaultmethoden bei Bedarf selbst überschreiben.
Für den Zugriff auf die Regel-Elemente werden die sogenannten Kontextobjekte als Parameter
übergeben.</p>
<p>Benannte Alternativen und Regel-Elemente sind nützlich, weil für die benannten Alternativen
zusätzliche Kontextklassen erzeugt werden, über die dann auf die Bestandteile der Alternativen
zugegriffen werden kann. Außerdem werden zusätzlich passende <code>enterAlternative</code>- und <code>exitAlternative</code>-
bzw. <code>visitAlternative</code>-Methoden generiert. Für benannte Regel-Elemente wird ein entsprechend
benanntes Attribut im Kontextobjekt angelegt, welches <code>public</code> sichtbar ist.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/YuUHBvPUS4k' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Parser mit ANTLR</a></li> <li><a href='https://youtu.be/FJOEPY-TMmw' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Demo ANTLR Parser</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/19925b756d6fc934bfe0b5107eb5fa58373a53af49c690ebce86e15f2b212c89c80ea7665e42c78abdc8dfe0718ea46f6a9817eeba4ad1293bdb4c84f7c8f084' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Parser mit ANTLR</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Aufbau der Parser-Regeln</li> <li>(K3) Alternativen und optionale/mehrfache Regelteile in Parser-Regeln</li> <li>(K3) Vorrang von Alternativen (bei Mehrdeutigkeiten)</li> <li>(K3) Benannte Alternativen und Regel-Elemente</li> <li>(K2) Aufbau des Parse-Tree</li> <li>(K3) Umgang mit Kontext-Objekten</li> <li>(K3) Traversierung des Parse-Tree mit den generierten Listenern oder Visitors</li></ul>
  </div>
</div>




    <h2 id="hello-world">Hello World</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span><span style="color:#66d9ef">grammar</span> <span style="color:#a6e22e">Hello</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>start : stmt<span style="color:#f92672">*</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stmt  : <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;=&#39;</span> expr <span style="color:#e6db74">&#39;;&#39;</span> <span style="color:#f92672">|</span> expr <span style="color:#e6db74">&#39;;&#39;</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>expr  : term <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;+&#39;</span> term<span style="color:#f92672">)*</span> ;
</span></span><span style="display:flex;"><span>term  : atom <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;*&#39;</span> atom<span style="color:#f92672">)*</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>atom  : <span style="color:#66d9ef">ID</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NUM</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ID    : [a-z][a-zA-Z]<span style="color:#f92672">*</span> ;
</span></span><span style="display:flex;"><span>NUM   : [0-9]<span style="color:#f92672">+</span> ;
</span></span><span style="display:flex;"><span>WS    : [ \t\n]<span style="color:#f92672">+</span> <span style="color:#f92672">-&gt;</span> skip ;</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/02-parsing/src/Hello.g4" target="_blank"><span class="title">Konsole: Hello (grun, Parse-Tree)</span></a></span></div>
<h3 id="starten-des-parsers">Starten des Parsers</h3>
<ol>
<li>Grammatik übersetzen und Code generieren: <code>antlr Hello.g4</code></li>
<li>Java-Code kompilieren: <code>javac *.java</code></li>
<li>Parser ausführen:
<ul>
<li>
<p><code>grun Hello start -tree</code> oder <code>grun Hello start -gui</code> (Grammatik &quot;Hello&quot;, Startregel &quot;start&quot;)</p>
</li>
<li>
<p>Alternativ mit kleinem Java-Programm:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.antlr.v4.runtime.CharStreams;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.antlr.v4.runtime.CommonTokenStream;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.antlr.v4.runtime.tree.ParseTree;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        HelloLexer lexer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HelloLexer(CharStreams.<span style="color:#a6e22e">fromStream</span>(System.<span style="color:#a6e22e">in</span>));
</span></span><span style="display:flex;"><span>        CommonTokenStream tokens <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CommonTokenStream(lexer);
</span></span><span style="display:flex;"><span>        HelloParser parser <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HelloParser(tokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ParseTree tree <span style="color:#f92672">=</span> parser.<span style="color:#a6e22e">start</span>();  <span style="color:#75715e">// Start-Regel</span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(tree.<span style="color:#a6e22e">toStringTree</span>(parser));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
</li>
</ol>
<h3 id="startregeln">Startregeln</h3>
<ul>
<li><code>start</code> ist eine <span class='alert'>Parser-Regel</span>
=&gt; Eine Parser-Regel pro Grammatik wird benötigt, damit man den generierten
Parser am Ende auch starten kann ...</li>
<li>Alle Regeln mit kleinem Anfangsbuchstaben sind Parser-Regeln</li>
<li>Alle Regeln mit großem Anfangsbuchstaben sind Lexer-Regeln</li>
</ul>
<h3 id="formen-der-subregeln">Formen der Subregeln</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>stmt  : <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;=&#39;</span> expr <span style="color:#e6db74">&#39;;&#39;</span> ;</span></span></code></pre></div>
<p>Um die Regel <code>stmt</code> anwenden zu können, müssen alle Elemente auf der rechten
Seite der Regel erfüllt werden. Dabei müssen die Token wie <code>ID</code>, <code>=</code> und <code>;</code>
matchen und die Subregel <code>expr</code> muss erfüllt werden können. Beachten Sie das
abschließende Semikolon am Ende einer ANTLR-Regel!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>stmt  : <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;=&#39;</span> expr <span style="color:#e6db74">&#39;;&#39;</span> <span style="color:#f92672">|</span> expr <span style="color:#e6db74">&#39;;&#39;</span> ;</span></span></code></pre></div>
<p>Alternativen werden durch ein <code>|</code> getrennt. Hier muss genau eine Alternative
erfüllt werden. Falls nötig, trennt man die Alternativen durch Einschließung
in runden Klammern vom Rest der Regel ab: <code>r : a (b | c) d ;</code>.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>expr  : term <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;+&#39;</span> term<span style="color:#f92672">)*</span> ;</span></span></code></pre></div>
<p>Der durch den <code>*</code> gekennzeichnete Teil kann beliebig oft vorkommen oder auch
fehlen. Bei einem <code>+</code> müsste der Teil mind. einmal vorkommen und bei einem
<code>?</code> entsprechend einmal oder keinmal.</p>
<p>Auch hier kann man die Operatoren durch ein zusätzliches <code>?</code> auf non-greedy
umschalten (analog zu den Lexer-Regeln).</p>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/parser-rules.md#subrules" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/parser-rules.md</a>)</p>
<h3 id="reihenfolge-in-grammatik-definiert-priorität">Reihenfolge in Grammatik definiert Priorität</h3>
<p>Falls mehr als eine Parser-Regel die selbe Input-Sequenz matcht, löst ANTLR
diese Mehrdeutigkeit auf, indem es die erste Alternative nimmt, die an der
Entscheidung beteiligt ist.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>start : stmt ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stmt  : expr <span style="color:#f92672">|</span> <span style="color:#66d9ef">ID</span>  ;
</span></span><span style="display:flex;"><span>expr  : <span style="color:#66d9ef">ID</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NUM</span> ;</span></span></code></pre></div>
<p>Bei der Eingabe &quot;foo&quot; würde die Alternative <code>ID</code> in der Regel <code>expr</code> &quot;gewinnen&quot;,
weil sie in der Grammatik vor der Alternative <code>ID</code> in der Regel <code>stmt</code> kommt und
damit Vorrang hat.</p>
<h3 id="parse-tree">Parse-Tree</h3>
<p>Betrachten wir erneut die obige Grammatik.</p>
<p>Die Eingabe von &quot;<code>a = 42;</code>&quot; führt zu folgendem Parse-Tree:</p>
<p><a href="#R-image-6243093ba2f3986266bbb0132a657bd9" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/hello_ex1.png?width=60%25&height=auto" style=" height: auto; width: 60%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6243093ba2f3986266bbb0132a657bd9"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/hello_ex1.png?width=60%25&height=auto"></a></p>
<p>Diese Eingabe führt zur Erkennung der Token <code>[ID, WS, =, WS, NUM, ;]</code>, wobei die
<code>WS</code>-Token verworfen werden und der Parser den Tokenstream <code>[ID, =, NUM, ;]</code>
erhält.</p>
<p>Die Startregel hat auf der rechten Seite kein oder mehrere <code>stmt</code>-Regeln. Die
<code>stmt</code>-Regel fordert auf der rechten Seite entweder die Token <code>ID</code>und <code>=</code> sowie
die Regel <code>expr</code> gefolgt vom Token <code>;</code>, oder die Regel <code>expr</code> gefolgt vom Token
<code>;</code>. In unserem Beispiel kann für das &quot;a&quot; das Token <code>ID</code> produziert werden, das
&quot;=&quot; matcht ebenfalls. Die &quot;42&quot; wird erklärt, indem für <code>expr</code> ein <code>term</code> und
dort ein <code>atom</code> aufgerufen wird. Für das <code>atom</code> muss entweder ein Token <code>ID</code>
oder <code>NUM</code> als nächstes Token kommen - hier wird die &quot;42&quot; wird als Token <code>NUM</code>
verarbeitet. Da die weiteren Regelteile in <code>term</code> und <code>expr</code> optional sind,
haben wir damit ein <code>expr</code> erfüllt und das nachfolgende <code>;</code>-Token schließt die
erste Alternative der Regel <code>stmt</code> erfolgreich ab.</p>
<p>Im entstehenden Parse-Tree sind diese Abläufe und grammatikalischen Strukturen
direkt erkennbar. Jede erfolgreich durchlaufene Parserregel wird zu einem
Knoten im Parse-Tree. Die Token werden als Terminale (Blätter) in den Baum
eingehängt.</p>
<p><em>Anmerkung</em>: Der Parse-Tree ist das Ergebnis der Parsers-Phase im Compiler und
dient damit als Input für die folgenden Compilerstufen. In der Regel benötigt
man die oft recht komplexen Strukturen aber später nicht mehr und vereinfacht
den Baum zu einem <em>Abstract Syntax Tree</em> (AST). Im Beispiel könnte man den Zweig
<code>stmt - expr - term - atom - 42</code> zu <code>stmt - 42</code> vereinfachen.</p>
<p>Betrachten wir nun die Eingabe <code>foo = 2+3*4; bar = 3*4+2;</code>. Diese führt zu
folgendem Parse-Tree:</p>
<p><a href="#R-image-a0c4c87c1027b1b0d38e7cb0d6770b35" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/hello_ex2.png?width=60%25&height=auto" style=" height: auto; width: 60%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a0c4c87c1027b1b0d38e7cb0d6770b35"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/hello_ex2.png?width=60%25&height=auto"></a></p>
<p>Wie man sehen kann, sind in der Grammatik die üblichen Vorrangregeln für die
Operationen <code>+</code> und <code>*</code> berücksichtigt - die Multiplikation wird in beiden
Fällen korrekt &quot;unter&quot; der Addition im Baum eingehängt.</p>
<h3 id="to-eof-not-to-eof">To EOF not to EOF?</h3>
<p>Startregeln müssen nicht unbedingt den gesamten Input &quot;konsumieren&quot;. Sie müssen
per Default nur eine der Alternativen in der Startregel erfüllen.</p>
<p>Betrachten wir noch einmal einen leicht modifizierten Ausschnitt aus der obigen
Grammatik:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>start : stmt ;</span></span></code></pre></div>
<p>Die Startregel wurde so geändert, dass sie nur noch genau ein Statement
akzeptieren soll.</p>
<p>In diesem Fall würde die Startregel bei der Eingabe &quot;aa; bb;&quot; nur den ersten
Teil &quot;aa;&quot; konsumieren (als Token <code>ID</code>) und das folgende &quot;bb;&quot; ignorieren.
Das wäre in diesem Fall aber auch kein Fehler.</p>
<p>Wenn der gesamte Eingabestrom durch die Startregel erklärt werden soll,
dann muss das vordefinierte Token <code>EOF</code> am Ende der Startregel eingesetzt
werden:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>start : stmt <span style="color:#66d9ef">EOF</span>;</span></span></code></pre></div>
<p>Hier würde die Eingabe &quot;aa; bb;&quot; zu einem Fehler führen, da nur der Teil &quot;aa;&quot;
durch die Startregel abgedeckt ist (Token <code>ID</code>), und der Rest &quot;bb;&quot; zwar sogar
ein gültiges Token wären (ebenfalls <code>ID</code> und <code>;</code>), aber eben nicht mehr von der
Startregel akzeptiert. Durch das <code>EOF</code> soll die Startregel aber den gesamten
Input konsumieren und erklären, was hier nicht geht und entsprechend zum Fehler
führt.</p>
<p>(vgl. <a href="https://github.com/antlr/antlr4/blob/master/doc/parser-rules.md#start-rules-and-eof" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/parser-rules.md</a>)</p>
<h2 id="expressions-und-vorrang-operatoren">Expressions und Vorrang (Operatoren)</h2>
<p>Betrachten wir noch einmal den Ausschnitt für die Ausdrücke (<em>Expressions</em>) in
der obigen Beispielgrammatik:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>expr  : term <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;+&#39;</span> term<span style="color:#f92672">)*</span> ;
</span></span><span style="display:flex;"><span>term  : atom <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;*&#39;</span> atom<span style="color:#f92672">)*</span> ;
</span></span><span style="display:flex;"><span>atom  : <span style="color:#66d9ef">ID</span> ;</span></span></code></pre></div>
<p>Diese typische, etwas komplex anmutende Struktur soll sicher stellen, dass die
Vorrangregeln für Addition und Multiplikation korrekt beachtet werden, d.h. dass
<code>2+3*4</code> als <code>2+(3*4)</code> geparst wird und nicht fälschlicherweise als <code>(2+3)*4</code>
erkannt wird.</p>
<p>Zusätzlich muss bei LL-Parsern Links-Rekursion vermieden werden: Die Parser-Regeln
werden in Funktionsaufrufe übersetzt, d.h. bei einer Links-Rekursion würde man die
selbe Regel immer wieder aufrufen, ohne ein Token aus dem Token-Strom zu entnehmen.</p>
<p>ANTLR (ab Version 4) kann mit beiden Aspekten automatisch umgehen:</p>
<ul>
<li>ANTLR kann direkte Linksrekursion automatisch auflösen. Die Regel <code>r : r T U | V ;</code>
kann also in ANTLR verarbeitet werden.</li>
<li>ANTLR besitzt einen Mechanismus zur Auflösung von Mehrdeutigkeiten. Wie oben
geschrieben, wird bei der Anwendbarkeit von mehreren Alternativen die erste
Alternative genutzt.</li>
</ul>
<p>Damit lässt sich die typische Struktur für Expression-Grammatiken deutlich lesbarer
gestalten:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>expr  : expr <span style="color:#e6db74">&#39;*&#39;</span> expr
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">|</span> expr <span style="color:#e6db74">&#39;+&#39;</span> expr
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">|</span> <span style="color:#66d9ef">ID</span>
</span></span><span style="display:flex;"><span>      ;</span></span></code></pre></div>
<p>Die Regel <code>expr</code> ist links-rekursiv, was normalerweise bei LL-Parsern problematisch
ist. ANTLR löst diese Links-Rekursion automatisch auf (vgl.
<a href="https://github.com/antlr/antlr4/blob/master/doc/left-recursion.md" rel="external" target="_blank">github.com/antlr/antlr4/blob/master/doc/left-recursion.md</a>).</p>
<p>Da bei Mehrdeutigkeit in der Grammatik, also bei der Anwendbarkeit mehrerer Alternativen
stets die erste Alternative genommen wird, lassen sich die Vorrangregeln durch die
Reihenfolge der Alternativen in der <code>expr</code>-Regel implementieren: Die Multiplikation
hat Vorrang von der Addition, und diese hat wiederum Vorrang von einer einfachen <code>ID</code>.</p>
<h3 id="direkte-vs-indirekte-links-rekursion">Direkte vs. indirekte Links-Rekursion</h3>
<p>ANTLR kann nur <em>direkte</em> Links-Rekursion auflösen. Regeln wie <code>r : r T U | V ;</code> stellen
in ANTLR also kein Problem dar.</p>
<p><em>Indirekte</em> Links-Rekursion erkennt ANTLR dagegen nicht:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>r : s <span style="color:#66d9ef">T</span> <span style="color:#66d9ef">U</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">V</span> ;
</span></span><span style="display:flex;"><span>s : r <span style="color:#66d9ef">W</span> <span style="color:#66d9ef">X</span> ;</span></span></code></pre></div>
<p>Hier würden sich die Regeln <code>r</code> und <code>s</code> gegenseitig aufrufen und kein Token aus dem
Tokenstrom entfernen, so dass der generierte LL-Parser hier in einer Endlosschleife
stecken bleiben würde. Mit indirekter Links-Rekursion kann ANTLR nicht umgehen.</p>
<h3 id="konflikte-in-regeln">Konflikte in Regeln</h3>
<p>Wenn mehrere Alternativen einer Regel anwendbar sind, entscheidet sich ANTLR für die
erste Alternative.</p>
<p>Wenn sich mehrere Tokenregeln überlappen, &quot;gewinnt&quot; auch hier die zuerst definierte
Regel.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>def : <span style="color:#e6db74">&#39;func&#39;</span> <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#e6db74">&#39;)&#39;</span> block ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>FOR : <span style="color:#e6db74">&#39;for&#39;</span> ;
</span></span><span style="display:flex;"><span>ID  : [a-z][a-zA-Z]<span style="color:#f92672">*</span> ;</span></span></code></pre></div>
<p>Hier werden ein implizites Token <code>'func'</code> sowie die expliziten Token <code>FOR</code> und <code>ID</code>
definiert. Dabei sind die Lexeme für <code>'func'</code> und <code>FOR</code> auch in <code>ID</code> enthalten.
Dennoch werden <code>'func'</code> und <code>FOR</code> erkannt und nicht über <code>ID</code> gematcht, weil sie
<em>vor</em> der Regel <code>ID</code> definiert sind.</p>
<p>Tatsächlich sortiert ANTLR die Regeln intern um, so dass alle Parser-Regeln <em>vor</em> den
Lexer-Regeln definiert sind. Die impliziten Token werden dabei noch vor den expliziten
Token-Regeln angeordnet. Im obigen Beispiel hat also <code>'func'</code> eine höhere Priorität
als <code>FOR</code>, und <code>FOR</code> hat eine höhere Priorität als <code>ID</code>. Aus diesem Grund gibt es die
Konvention, die Parser-Regeln in der Grammatik vor den Lexer-Regeln zu definieren - dies
entspricht quasi der Anordnung, die ANTLR bei der Verarbeitung sowieso erzeugen würde.</p>
<p>Aus diesem Grund würde auch eine Umsortierung der obigen Grammatik funktionieren:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>FOR : <span style="color:#e6db74">&#39;for&#39;</span> ;
</span></span><span style="display:flex;"><span>ID  : [a-z][a-zA-Z]<span style="color:#f92672">*</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>def : <span style="color:#e6db74">&#39;func&#39;</span> <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> <span style="color:#e6db74">&#39;)&#39;</span> block ;</span></span></code></pre></div>
<p>Intern würde ANTLR die Parser-Regel <code>def</code> wieder vor den beiden Lexer-Regeln anordnen,
und zwischen den Parser-Regeln und den Lexer-Regeln die impliziten Token (hier <code>'func'</code>).</p>
<h2 id="kontext-objekte-für-parser-regeln">Kontext-Objekte für Parser-Regeln</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>s    : expr         {List&lt;EContext&gt; x = $expr.ctx.e();}
</span></span><span style="display:flex;"><span>     ;
</span></span><span style="display:flex;"><span>expr : e <span style="color:#e6db74">&#39;*&#39;</span> e ;</span></span></code></pre></div>
<p><a href="#R-image-886da70dc03d31acb9d94a28dd12ba64" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParserRuleContext.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-886da70dc03d31acb9d94a28dd12ba64"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParserRuleContext.png?width=80%25&height=auto"></a></p>
<p>Jede Regel liefert ein passend zu dieser Regel generiertes Kontext-Objekt
zurück. Darüber kann man das/die Kontextobjekt(e) der Sub-Regeln abfragen.</p>
<p>Die Regel <code>s</code> liefert entsprechend ein <code>SContext</code>-Objekt und die Regel
<code>expr</code> liefert ein <code>ExprContext</code>-Objekt zurück.</p>
<p>In der Aktion fragt man das Kontextobjekt über <code>ctx</code> ab, in den Listener-
und Visitor-Methoden erhält man die Kontextobjekte als Parameter.</p>
<p>Für einfache Regel-Aufrufe liefert die parameterlose Methode nur ein
einziges Kontextobjekt (statt einer Liste) zurück.</p>
<p><strong>Anmerkung</strong>: ANTLR generiert nur dann <em>Felder</em> für die Regel-Elemente im
Kontextobjekt, wenn diese in irgendeiner Form referenziert werden. Dies
kann beispielsweise durch Benennung (Definition eines Labels, siehe nächste
Folie) oder durch Nutzung in einer Aktion (siehe obiges Beispiel) geschehen.</p>
<h2 id="benannte-regel-elemente-oder-alternativen">Benannte Regel-Elemente oder Alternativen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>stat  : <span style="color:#e6db74">&#39;return&#39;</span> value<span style="color:#f92672">=</span>e <span style="color:#e6db74">&#39;;&#39;</span>    <span style="color:#f92672">#</span> <span style="color:#66d9ef">Return</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;break&#39;</span> <span style="color:#e6db74">&#39;;&#39;</span>             <span style="color:#f92672">#</span> <span style="color:#66d9ef">Break</span>
</span></span><span style="display:flex;"><span>      ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StatContext</span> <span style="color:#66d9ef">extends</span> ParserRuleContext { ... }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReturnContext</span> <span style="color:#66d9ef">extends</span> StatContext {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> EContext value;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> EContext <span style="color:#a6e22e">e</span>() { ... }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BreakContext</span> <span style="color:#66d9ef">extends</span> StatContext { ... }</span></span></code></pre></div>
<p>Mit <code>value=e</code> wird der Aufruf der Regel <code>e</code> mit dem Label <code>value</code> belegt,
d.h. man kann mit <code>$e.text</code> oder <code>$value.text</code> auf das <code>text</code>-Attribut von
<code>e</code> zugreifen. Falls es in einer Produktion mehrere Aufrufe einer anderen
Regel gibt, <strong>muss</strong> man für den Zugriff auf die Attribute eindeutige Label
vergeben.</p>
<p>Analog wird für die beiden Alternativen je ein eigener Kontext erzeugt.</p>
<h2 id="arbeiten-mit-antlr-listeners">Arbeiten mit ANTLR-Listeners</h2>
<p>ANTLR (generiert auf Wunsch) zur Grammatik passende Listener (Interface und
leere Basisimplementierung). Beim Traversieren mit dem Default-<code>ParseTreeWalker</code>
wird der Parse-Tree mit Tiefensuche abgelaufen und jeweils beim Eintritt in
bzw. beim Austritt aus einen/m Knoten der passende Listener mit dem passenden
Kontext-Objekt aufgerufen.</p>
<p>Damit kann man die Grammatik &quot;für sich&quot; halten, d.h. unabhängig von einer
konkreten Zielsprache und die Aktionen über die Listener (oder Visitors, s.u.)
ausführen.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>expr : e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#39;*&#39;</span> e2<span style="color:#f92672">=</span>expr      <span style="color:#f92672">#</span> <span style="color:#66d9ef">MULT</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">|</span> e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#39;+&#39;</span> e2<span style="color:#f92672">=</span>expr      <span style="color:#f92672">#</span> <span style="color:#66d9ef">ADD</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">DIGIT</span>                    <span style="color:#f92672">#</span> <span style="color:#66d9ef">ZAHL</span>
</span></span><span style="display:flex;"><span>     ;</span></span></code></pre></div>
<p>ANTLR kann zu dieser Grammatik <code>calc.g4</code> einen passenden Listener (Interface
<code>calcListener</code>) generieren (Option <code>-listener</code> beim Aufruf von <code>antlr</code>).
Weiterhin generiert ANTLR eine leere Basisimplementierung (Klasse <code>calcBaseListener</code>):</p>
<p><a href="#R-image-4b1ed13aa0f1fc1ca01aef777451e70d" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParseTreeListener.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4b1ed13aa0f1fc1ca01aef777451e70d"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParseTreeListener.png?width=80%25&height=auto"></a></p>
<p>(Nur &quot;interessante&quot; Methoden gezeigt.)</p>
<p>Von dieser Basisklasse leitet man einen eigenen Listener ab und implementiert
die Methoden, die man benötigt.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyListener</span> <span style="color:#66d9ef">extends</span> calcBaseListener {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exitMULT</span>(calcParser.<span style="color:#a6e22e">MULTContext</span> ctx) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exitADD</span>(calcParser.<span style="color:#a6e22e">ADDContext</span> ctx) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exitZAHL</span>(calcParser.<span style="color:#a6e22e">ZAHLContext</span> ctx) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Anschließend baut man das alles in eine Traversierung des Parse-Trees ein:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestMyListener</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyListener</span> <span style="color:#66d9ef">extends</span> calcBaseListener {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        calcLexer lexer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> calcLexer(CharStreams.<span style="color:#a6e22e">fromStream</span>(System.<span style="color:#a6e22e">in</span>));
</span></span><span style="display:flex;"><span>        CommonTokenStream tokens <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CommonTokenStream(lexer);
</span></span><span style="display:flex;"><span>        calcParser parser <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> calcParser(tokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ParseTree tree <span style="color:#f92672">=</span> parser.<span style="color:#a6e22e">s</span>();    <span style="color:#75715e">// Start-Regel</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ParseTreeWalker walker <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ParseTreeWalker();
</span></span><span style="display:flex;"><span>        MyListener eval <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyListener();
</span></span><span style="display:flex;"><span>        walker.<span style="color:#a6e22e">walk</span>(eval, tree);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/02-parsing/src/TestMyListener.java" target="_blank"><span class="title">Beispiel: TestMyListener.java und calc.g4</span></a></span></div>
<h2 id="arbeiten-mit-dem-visitor-pattern">Arbeiten mit dem Visitor-Pattern</h2>
<p>ANTLR (generiert ebenfalls auf Wunsch) zur Grammatik passende Visitoren
(Interface und leere Basisimplementierung).</p>
<p>Hier muss man im Gegensatz zu den Listeners allerdings selbst für eine geeignete
Traversierung des Parse-Trees sorgen. Dafür hat man mehr Freiheiten im Vergleich
zum Einsatz von Listeners, insbesondere im Hinblick auf Rückgabewerte.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>expr : e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#39;*&#39;</span> e2<span style="color:#f92672">=</span>expr      <span style="color:#f92672">#</span> <span style="color:#66d9ef">MULT</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">|</span> e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#39;+&#39;</span> e2<span style="color:#f92672">=</span>expr      <span style="color:#f92672">#</span> <span style="color:#66d9ef">ADD</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">|</span> <span style="color:#66d9ef">DIGIT</span>                    <span style="color:#f92672">#</span> <span style="color:#66d9ef">ZAHL</span>
</span></span><span style="display:flex;"><span>     ;</span></span></code></pre></div>
<p>ANTLR kann zu dieser Grammatik einen passenden Visitor (Interface <code>calcVisitor&lt;T&gt;</code>)
generieren (Option <code>-visitor</code> beim Aufruf von <code>antlr</code>). Weiterhin generiert ANTLR
eine leere Basisimplementierung (Klasse <code>calcBaseVisitor&lt;T&gt;</code>):</p>
<p><a href="#R-image-edb013aa509e94cd96f908589d0c6022" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParseTreeVisitor.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-edb013aa509e94cd96f908589d0c6022"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/02-parsing/antlr-parsing/ParseTreeVisitor.png?width=80%25&height=auto"></a></p>
<p>(Nur &quot;interessante&quot; Methoden gezeigt.)</p>
<p>Von dieser Basisklasse leitet man einen eigenen Visitor ab und überschreibt
die Methoden, die man benötigt. Wichtig ist, dass man selbst für das &quot;Besuchen&quot;
der Kindknoten sorgen muss (rekursiver Aufruf der geerbten Methode <code>visit()</code>).</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyVisitor</span> <span style="color:#66d9ef">extends</span> calcBaseVisitor<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">visitMULT</span>(calcParser.<span style="color:#a6e22e">MULTContext</span> ctx) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">visitADD</span>(calcParser.<span style="color:#a6e22e">ADDContext</span> ctx) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Integer <span style="color:#a6e22e">visitZAHL</span>(calcParser.<span style="color:#a6e22e">ZAHLContext</span> ctx) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Anschließend baut man das alles in eine manuelle Traversierung des Parse-Trees ein:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestMyVisitor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyVisitor</span> <span style="color:#66d9ef">extends</span> calcBaseVisitor<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        calcLexer lexer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> calcLexer(CharStreams.<span style="color:#a6e22e">fromStream</span>(System.<span style="color:#a6e22e">in</span>));
</span></span><span style="display:flex;"><span>        CommonTokenStream tokens <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CommonTokenStream(lexer);
</span></span><span style="display:flex;"><span>        calcParser parser <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> calcParser(tokens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        ParseTree tree <span style="color:#f92672">=</span> parser.<span style="color:#a6e22e">s</span>();    <span style="color:#75715e">// Start-Regel</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        MyVisitor eval <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyVisitor();
</span></span><span style="display:flex;"><span>        eval.<span style="color:#a6e22e">visit</span>(tree);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/02-parsing/src/TestMyVisitor.java" target="_blank"><span class="title">Beispiel: TestMyVisitor.java und calc.g4</span></a></span></div>
<h2 id="eingebettete-aktionen-und-attribute">Eingebettete Aktionen und Attribute</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>s   : expr                      {System.err.println($expr.v);}
</span></span><span style="display:flex;"><span>    ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>expr <span style="color:#66d9ef">returns</span> [int v]
</span></span><span style="display:flex;"><span>    : e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#39;*&#39;</span> e2<span style="color:#f92672">=</span>expr       {$v = $e1.v * $e2.v;}
</span></span><span style="display:flex;"><span>    ;</span></span></code></pre></div>
<p>Auch die Parser-Regeln können mit eingebetteten Aktionen ergänzt werden, die
in die (für die jeweilige Regel) generierte Methode eingefügt werden und bei
erfolgreicher Anwendung der Parser-Regel ausgeführt werden.</p>
<p>Über <code>returns [int v]</code> fügt man der Regel <code>expr</code> ein Attribut <code>v</code> (Integer)
hinzu, welches man im jeweiligen Kontext abfragen bzw. setzen kann (agiert
als Rückgabewert der generierten Methode). Auf diesen Wert kann in den
Aktionen mit <code>$v</code> zugegriffen werden.</p>
<p><em>Anmerkung</em>: Durch den Einsatz von eingebetteten Aktionen und Attributen wird
die Grammatik abhängig von der Zielsprache des generierten Lexers/Parsers!</p>
<h2 id="ausblick">Ausblick</h2>
<p>Damit haben wir die sprichwörtliche &quot;Spitze des Eisbergs&quot; gesehen. Mit ANTLR
sind noch viele weitere Dinge möglich. Bitte nutzen Sie aktiv die Dokumentation
auf <a href="https://github.com/antlr/antlr4" rel="external" target="_blank">github.com/antlr/antlr4</a>.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<p>Parser mit ANTLR generieren: Parser-Regeln werden mit <strong>Kleinbuchstaben</strong> geschrieben</p>
<ul>
<li>Regeln können Lexer- und Parser-Regeln &quot;aufrufen&quot;</li>
<li>Regeln können Alternativen haben</li>
<li>Bei Mehrdeutigkeit: Vorrang für erste Alternative</li>
<li>ANTLR erlaubt direkte Links-Rekursion</li>
<li>ANTLR erzeugt Parse-Tree</li>
<li>Benannte Alternativen und Regel-Elemente</li>
<li>Traversierung des Parse-Tree: Listener oder Visitoren, Zugriff auf Kontextobjekte</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Lexer und Parser mit ANTLR: Programmiersprache Lox</strong></p>
<p>Betrachten Sie folgenden Code-Schnipsel in der Sprache <a href="https://www.craftinginterpreters.com/the-lox-language.html" rel="external" target="_blank">&quot;Lox&quot;</a>:</p>
<pre><code>fun fib(x) {
    if (x == 0) {
        return 0;
    } else {
        if (x == 1) {
            return 1;
        } else {
            fib(x - 1) + fib(x - 2);
        }
    }
}

var wuppie = fib(4);
</code></pre>
<p>Erstellen Sie für diese fiktive Sprache einen Lexer+Parser mit ANTLR.
Implementieren Sie mit Hilfe des Parse-Trees und der Listener oder Visitoren einen einfachen Pretty-Printer.</p>
<p>(Die genauere Sprachdefinition finden Sie bei Bedarf unter <a href="https://www.craftinginterpreters.com/the-lox-language.html" rel="external" target="_blank">craftinginterpreters.com/the-lox-language.html</a>.)</p>
  </div>
</div>



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet01.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 01: Reguläre Sprachen</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="semantische-analyse">Semantische Analyse</h1>

<p>Auf die lexikalische Analyse und die Syntaxanalyse folgt die semantische Analyse. Nach dem
Parsen steht fest, dass ein Programm syntaktisch korrekt ist. Nun muss geprüft werden, ob
es auch semantisch korrekt ist. Dazu gehören u.a. die Identifikation und Sammlung von
Bezeichnern und die Zuordnung zur richtigen Ebene (Scopes) sowie die die Typ-Prüfung
und -Inferenz.</p>
<p>In dieser Phase zeigen sich die Eigenschaften der zu verarbeitenden Sprache sehr deutlich,
beispielsweise müssen Bezeichner deklariert sein vor der ersten Benutzung, welche Art von
Scopes soll es geben, gibt es Klassen und Vererbung ...</p>
<p>Da hier der Kontext der Symbole eine Rolle spielt, wird diese Phase oft auch &quot;Context Handling&quot;
oder &quot;Kontext Analyse&quot; bezeichnet. Neben attributierten Grammatiken sind die Symboltabellen
wichtige Werkzeuge.</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro.html">SymbTab0: Überblick Symboltabellen</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes.html">SymbTab1: Nested Scopes</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions.html">SymbTab2: Funktionen</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html">SymbTab3: Strukturen und Klassen</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Semantische Analyse</h1>
<article class="default">
<h1>SymbTab0: Überblick Symboltabellen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Auf die lexikalische Analyse und die Syntaxanalyse folgt die semantische Analyse. Nach dem
Parsen steht fest, dass ein Programm syntaktisch korrekt ist. Nun muss geprüft werden, ob
es auch semantisch korrekt ist. Dies umfasst in der Regel die Identifikation und Sammlung
von Bezeichnern und die Zuordnung zur richtigen Ebene (Scopes). Außerdem muss die Nutzung
von Symbolen validiert werden: Je nach Sprache müssen beispielsweise Variablen und Funktionen
vor ihrer Benutzung zumindest deklariert sein; Funktionen sollten sich nicht wie Variablen
benutzen lassen, ...</p>
<p>Als Werkzeug werden (hierarchische) Tabellen eingesetzt, um die verschiedenen Symbole und
Informationen darüber zu verwalten. Dabei werden die Symboltabelleneinträge oft an verschiedenen
Stellen im Compiler generiert und benutzt.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/5637iNH0wWk' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Symboltabellen (Intro)</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/af37ca12a1e720f50544efd742b34a297da3e96b74904cb521e51cf42138b083510c8e4456377c945a6e9def30c039b207d572b8dae163b02f8509c137eb6446' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Symboltabellen (Intro)</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Aufgaben der semantischen Analyse</li> <li>(K2) Bedeutung von Symboltabellen: Aufgaben, Verbindung zu Compiler-Phasen</li></ul>
  </div>
</div>




    <h2 id="was-passiert-nach-der-syntaxanalyse">Was passiert nach der Syntaxanalyse?</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> y<span style="color:#f92672">+</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#a6e22e">f</span>(x);</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-3b15da21ddd506991ce3cccdb62c302f" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/parsetree.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3b15da21ddd506991ce3cccdb62c302f"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/parsetree.png?width=80%25&height=auto"></a></p>
</div>
</div>
<p>Nach der Syntaxanalyse braucht der Compiler für die darauf folgenden Phasen
<strong>semantische Analyse</strong>, Optimierung und Codegenerierung <strong>Informationen
über Bezeichner</strong>, z.B.</p>
<ul>
<li>Welcher Bezeichner ist gemeint?</li>
<li>Welchen Typ hat ein Bezeichner?</li>
</ul>
<p>Auf dem Weg zum Interpreter/Compiler müssen die Symbole im AST korrekt zugeordnet
werden. Dies geschieht über Symboltabellen. Im Folgenden werden wir verschiedene
Aspekte von Symboltabellen betrachten und eine mögliche Implementierung erarbeiten,
bevor wir uns um die Auswertung (Interpretation) des AST kümmern können.</p>
<h3 id="logische-compilierungsphasen">Logische Compilierungsphasen</h3>
<ul>
<li>
<p>Die lexikalische Analyse generiert eine Folge von Token.</p>
</li>
<li>
<p>Die Syntaxanalyse generiert einen Parse Tree.</p>
</li>
<li>
<p>Die semantische Analyse macht folgendes:</p>
<ul>
<li>Der Parse Tree wird in einen abstrakten Syntaxbaum (AST) umgewandelt.</li>
<li>Dieser wird häufig mit Attributen annotiert.</li>
<li>Dabei sind oft mehrere Baumdurchläufe nötig (z.B. wegen der Abhängigkeiten
der Attribute).</li>
</ul>
</li>
<li>
<p>Nachfolgende Stufen:</p>
<ul>
<li>Der AST wird in einen Zwischencode umgewandelt mit Registern und virtuellen
Adressen.</li>
<li>Der Zwischencode wird optimiert.</li>
<li>Aus dem optimierten Zwischencode wird der endgültige Code, aber immer noch
mit virtuellen Adressen, generiert.</li>
<li>Der generierte Code wird nachoptimiert.</li>
<li>Der Linker ersetzt die virtuellen Adressen durch reale Adressen.</li>
</ul>
</li>
</ul>
<h3 id="abgrenzung-der-phasen">Abgrenzung der Phasen</h3>
<p>Diese Phasen sind oft nicht klar unterscheidbar. Schon allein zur Verbesserung der
Laufzeit baut der Parser oft schon den abstrakten Syntaxbaum auf, der Lexer trägt schon
Bezeichner in Symboltabellen ein, der Parser berechnet beim Baumaufbau schon Attribute,
...</p>
<p>Oft werden gar nicht alle Phasen und alle Zwischendarstellungen benötigt.</p>
<h2 id="semantische-analyse-und-symboltabellen">Semantische Analyse und Symboltabellen</h2>
<p><a href="#R-image-dc77da30ac57329ee76e9fb16012b4c8" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/architektur_cb.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dc77da30ac57329ee76e9fb16012b4c8"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/architektur_cb.png?width=80%25&height=auto"></a></p>
<h2 id="syntax-und-semantik">Syntax und Semantik</h2>
<ul>
<li>
<p><strong>Syntaxregeln</strong>: Formaler Aufbau eines Programms</p>
</li>
<li>
<p><strong>Semantik</strong>: Bedeutung eines (syntaktisch korrekten) Programms</p>
</li>
</ul>
<p>=&gt; Keine Codegenerierung für syntaktisch/semantisch inkorrekte Programme!</p>
<p>Zur Erinnerung: Die <em>Syntaxregeln</em> einer Programmiersprache bestimmen den formalen
Aufbau eines zu übersetzenden Programms. Die <em>Semantik</em> gibt die Bedeutung eines
syntaktisch richtigen Programms an.</p>
<p>Lexikalische und syntaktische Analyse können formalisiert mit regulären Ausdrücken und
endlichen Automaten, sowie mit CFG und Parsern durchgeführt werden.</p>
<p>Die Durchführung der semantischen Analyse ist stark von den Eigenschaften der zu
übersetzenden Sprache, sowie der Zielsprache abhängig und kann hier nur beispielhaft
für einige Eigenschaften erklärt werden.</p>
<p>Es darf kein lauffähiges Programm erstellt werden können, dass nicht syntaktisch und
semantisch korrekt ist. Ein lauffähiges Programm muss syntaktisch und semantisch korrekt
sein!</p>
<h2 id="aufgaben-der-semantischen-analyse">Aufgaben der semantischen Analyse</h2>
<ul>
<li>
<p>Identifikation und Sammlung der Bezeichner</p>
</li>
<li>
<p>Zuordnung zur richtigen Ebene (Scopes)</p>
</li>
<li>
<p>Typ-Inferenz</p>
</li>
<li>
<p>Typkonsistenz (Ausdrücke, Funktionsaufrufe, ...)</p>
</li>
<li>
<p>Validieren der Nutzung von Symbolen</p>
<ul>
<li>Vermeidung von Mehrfachdefinition</li>
<li>Zugriff auf nicht definierte Bezeichner</li>
<li>(Lesender) Zugriff auf nicht initialisierte Bezeichner</li>
<li>Funktionen werden nicht als Variablen genutzt</li>
<li>...</li>
</ul>
</li>
</ul>
<p>Die semantische Analyse überprüft die Gültigkeit eines syntaktisch korrekten Programms
bzgl. statischer semantischer Eigenschaften und liefert die Grundlage für die (Zwischen-)
Codeerzeugung und -optimierung. Insbesondere wird hier die Typkonsistenz (in Ausdrücken,
von Parametern, ...) überprüft, und implizite Typumwandlungen werden vorgenommen. Oft
müssen Typen automatisch bestimmt werden (z.B. bei Polymorphie, Typinferenz). Damit
Typen bestimmt oder angepasst werden können, müssen Bezeichner zunächst identifiziert
werden, d.h. bei namensgleichen Bezeichnern der richtige Bezug bestimmt werden.</p>
<p>=&gt; Ein wichtiges Hilfsmittel dazu sind <strong>Symboltabellen</strong></p>
<h3 id="identifizierung-von-objekten">Identifizierung von Objekten</h3>
<p>Beim Compiliervorgang müssen Namen immer wieder den dazugehörigen Definitionen
zugeordnet, ihre Eigenschaften gesammelt und geprüft und darauf zugegriffen werden.
Symboltabellen werden im Compiler fast überall gebraucht (siehe Abbildung unter
&quot;Einordnung&quot;).</p>
<p>Welche Informationen zu einem Bezeichner gespeichert und ermittelt werden, ist dann
abhängig von der Klasse des Bezeichners.</p>
<h3 id="validieren-der-nutzung-von-symbolen">Validieren der Nutzung von Symbolen</h3>
<p>Hier sind unendlich viele Möglichkeiten denkbar. Dies reicht von den unten aufgeführten
Basisprüfungen bis hin zum Prüfen der Typkompatibilität bei arithmetischen Operationen.
Dabei müssen für alle Ausdrücke die Ergebnistypen berechnet werden und ggf. automatische
Konvertierungen vorgenommen werden, etwa bei <code>3+4.1</code> ...</p>
<ul>
<li>Zugriff auf Variablen: Müssen sichtbar sein</li>
<li>Zugriff auf Funktionen: Vorwärtsreferenzen sind OK</li>
<li>Variablen werden nicht als Funktionen genutzt</li>
<li>Funktionen werden nicht als Variablen genutzt</li>
</ul>
<p>Da Funktionen bereits vor dem Bekanntmachen der Definition aufgerufen werden dürfen, bietet
sich ein <strong>zweimaliger Durchlauf</strong> (<em>pass</em>) an: Beim ersten Traversieren des AST werden alle
Definitionen in der Symboltabelle gesammelt. Beim zweiten Durchlauf werden dann die Referenzen
aufgelöst.</p>
<h3 id="das-mittel-der-wahl-tabellen-für-die-symbole--bezeichner">Das Mittel der Wahl: Tabellen für die Symbole (= Bezeichner)</h3>
<p><strong>Def.:</strong> <em>Symboltabellen</em> sind die zentrale Datenstruktur zur Identifizierung und
Verwaltung von bezeichneten Elementen.</p>
<p>Die Organisation der Symboltabellen ist stark anwendungsabhängig. Je nach Sprachkonzept
gibt es eine oder mehrere Symboltabellen, deren Einträge vom Lexer oder Parser angelegt
werden. Die jeweiligen Inhalte jedes einzelnen Eintrags kommen aus den verschiedenen
Phasen der Compilierung. Symboltabellen werden oft als Hashtables oder auch als Bäume
implementiert, manchmal als verkettete Listen. In seltenen Fällen kommt man auch mit
einem Stack aus.</p>
<p>Eine Symboltabelle enthält benutzerdefinierte Bezeichner (oder Verweise in eine Hashtable
mit allen vorkommenden Namen), manchmal auch die Schlüsselwörter der Programmiersprache.
Die einzelnen Felder eines Eintrags variieren stark, abhängig vom Typ des Bezeichners
(= Bezeichnerklasse).</p>
<p>Manchmal gibt es für Datentypen eine Extra-Tabelle, ebenso eine für die Werte von Konstanten.</p>
<p>Manchmal werden die Namen selbst in eine (Hash-) Tabelle geschrieben. Die Symboltabelle
enthält dann statt der Namen Verweise in diese (Hash-) Tabelle.</p>
<h2 id="einfache-verwaltung-von-variablen-primitiven-typs">Einfache Verwaltung von Variablen primitiven Typs</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-77e6c2b27a90078116c4c5f286c5f07c" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/simpletable.png?width=20%25&height=auto" style=" height: auto; width: 20%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-77e6c2b27a90078116c4c5f286c5f07c"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab0-intro/simpletable.png?width=20%25&height=auto"></a></p>
</div>
</div>
<p><strong>Bsp.:</strong> Die zu übersetzende Sprache hat nur einen (den globalen) Scope und kennt nur
Bezeichner für Variablen.</p>
<ul>
<li><strong>Eine</strong> Symboltabelle für <strong>alle</strong> Bezeichner</li>
<li>Jeder Bezeichner ist der Name einer Variablen</li>
<li>Symboltabelle wird evtl. mit Einträgen aller Schlüsselwörter initialisiert -- warum?</li>
<li>Scanner erkennt Bezeichner und sucht ihn in der Symboltabelle</li>
<li>Ist der Bezeichner nicht vorhanden, wird ein (bis auf den Namen leerer) Eintrag angelegt</li>
<li>Scanner übergibt dem Parser das erkannte Token und einen Verweis auf den
Symboltabelleneintrag</li>
</ul>
<p>Die Symboltabelle könnte hier eine (Hash-) Tabelle oder eine einfache verkettete Liste sein.</p>
<h2 id="was-kann-jetzt-weiter-passieren">Was kann jetzt weiter passieren?</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;</span></span></code></pre></div>
<p>In vielen Sprachen muss überprüft werden, ob es ein definierendes Vorkommen des Bezeichners oder
ein angewandtes Vorkommen ist.</p>
<h3 id="definitionen-und-deklarationen-von-bezeichnern">Definitionen und Deklarationen von Bezeichnern</h3>
<p><strong>Def.:</strong> Die <em>Definition</em> eines (bisher nicht existenten) Bezeichners in einem Programm
generiert einen neuen Bezeichner und legt für ihn seinem Typ entsprechend Speicherplatz an.</p>
<p><strong>Def.:</strong> Unter der <em>Deklaration</em> eines (bereits existierenden) Bezeichners verstehen wir
seine Bekanntmachung, damit er benutzt werden kann. Er ist oft in einem anderen Scope
definiert und bekommt dort Speicherplatz zugeteilt.</p>
<p>Insbesondere werden auch Typen deklariert. Hier gibt es in der Regel gar keine
Speicherplatzzuweisung.</p>
<p>Ein Bezeichner kann beliebig oft deklariert werden, während er in einem Programm nur einmal
definiert werden kann. Oft wird bei der Deklarationen eines Elements sein Namensraum mit
angegeben.</p>
<p><strong>Vorsicht</strong>: Die Begriffe werden auch anders verwendet. Z.B. findet sich in der
Java-Literatur der Begriff <em>Deklaration</em> anstelle von <em>Definition</em>.</p>
<p><strong>Anmerkung</strong>:
Deklarationen beziehen sich auf Definitionen, die woanders in einer Symboltabelle stehen, evtl.
in einer anderen Datei, also in diesem Compilerlauf nicht zugänglich sind und erst von Linker
aufgelöst werden können. Beim Auftreten einer Deklaration muss die dazugehörige Definition gesucht
werden,und wenn vorhanden, im Symboltabelleneintrag für den deklarierten Bezeichner festgehalten
werden. Hier ist evtl. ein zweiter Baumdurchlauf nötig, um alle offenen Deklarationen, die sich
auf Definitionen in derselben Datei beziehen, aufzulösen.</p>
<p>Wird bei objektorientierten Sprachen ein Objekt definiert, dessen Klassendefinition in einer anderen
Datei liegt, kann man die Definition des Objekts gleichzeitig als Deklaration der Klasse auffassen
(Java).</p>
<h2 id="wo-werden-verweise-in-symboltabellen-gebraucht">Wo werden Verweise in Symboltabellen gebraucht?</h2>
<p>=&gt; Parse Tree und AST enthalten Verweise auf Symboltabelleneinträge</p>
<ul>
<li>Im Parse Tree enthält der Knoten für einen Bezeichner einen Verweis auf den
Symboltabelleneintrag.</li>
<li>Parser und semantische Analyse (AST) vervollständigen die Einträge.</li>
<li>Attribute des AST können Feldern der Symboltabelle entsprechen, bzw. sich aus
ihnen berechnen.</li>
<li>Für Debugging-Zwecke können die Symboltabellen die ganze Compilierung und das
Linken überleben.</li>
</ul>
<h2 id="grenzen-der-semantischen-analyse">Grenzen der semantischen Analyse</h2>
<p><strong>Welche semantischen Eigenschaften einer Sprache kann die semantische Analyse nicht überprüfen?</strong></p>
<ul>
<li>Wer ist dann dafür verantwortlich?</li>
<li>Wie äußert sich das im Fehlerfall?</li>
</ul>
<p>Dinge, die erst durch eine Ausführung/Interpretation eines Programms berechnet werden können.</p>
<p>Beispielsweise können Werte von Ausdrücken oft erst zur Laufzeit bestimmt werden. Insbesondere
kann die semantische Analyse in der Regel nicht feststellen, ob ein Null-Pointer übergeben wird
und anschließend dereferenziert wird.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Semantische Analyse:</p>
<ul>
<li>Identifikation und Sammlung der Bezeichner</li>
<li>Zuordnung zur richtigen Ebene (Scopes)</li>
<li>Validieren der Nutzung von Symbolen</li>
<li>Typ-Inferenz</li>
<li>Typkonsistenz (Ausdrücke, Funktionsaufrufe, ...)</li>
</ul>
</li>
<li>
<p>Symboltabellen: Verwaltung von Symbolen und Typen (Informationen über Bezeichner)</p>
</li>
<li>
<p>Symboltabelleneinträge werden an verschiedenen Stellen des Compilers generiert und benutzt</p>
</li>
</ul>


    



    



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 02: CFG</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 3</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.<br><em>Kapitel 6, 7 und 8</em></li> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.<br><em>Kapitel 6.4 und 8.4</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>SymbTab1: Nested Scopes</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>In Symboltabellen werden Informationen über Bezeichner verwaltet. Wenn es in der zu
übersetzenden Sprache <em>Nested Scopes</em> gibt, spiegelt sich dies in den Symboltabellen
wider: Auch hier wird eine entsprechende hierarchische Organisation notwendig. In der
Regel nutzt man Tabellen, die untereinander verlinkt sind.</p>
<p>Eine wichtige Aufgabe ist das Binden von Bezeichner gleichen Namens an ihren jeweiligen
Scope =&gt; <code>bind()</code>. Zusätzlich müssen Symboltabellen auch das Abrufen von Bezeichnern
aus dem aktuellen Scope oder den Elternscopes unterstützen =&gt; <code>resolve()</code>.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/CdM1gvsi6P0' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Nested Scopes</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/1ce547df40e91e7a07497e6a070076157868b7d4b1fa18c2f1e17ee5c348e9063582da157de251ae1eb5daff45cfa97efdff7367b4bdd4634da0c00498c876ab' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Nested Scopes</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Aufbau von Symboltabellen für Nested Scopes inkl. Strukturen/Klassen mit einem Listener</li> <li>(K3) Auflösen von Symbolen über die Scopes</li> <li>(K3) Einfache statische Prüfungen anhand der Symboltabellen</li></ul>
  </div>
</div>




    <h2 id="scopes-und-name-spaces">Scopes und Name Spaces</h2>
<p><strong>Def.:</strong> Unter dem <em>Gültigkeitsbereich</em> (Sichtbarkeitsbereich, Scope) eines
Bezeichners versteht man den Programmabschnitt, in dem der Bezeichner sichtbar
und nutzbar ist. Das ist oft der kleinste umgebende Block, außer darin enthaltene
Scopes, die ein eigenes Element dieses Namens benutzen.</p>
<p>Scopes sind fast immer hierarchisch angeordnet.</p>
<p><strong>Def.:</strong> Unter einem <em>Namensraum</em> (name space) versteht man die Menge der zu
einem Zeitpunkt sichtbaren Bezeichner.</p>
<p>Es gibt Sprachen, in denen man eigene Namensräume explizit definieren kann (z.B.
C++).</p>
<p>Vorsicht: Diese Begriffe werden nicht immer gleich definiert und auch gerne
verwechselt.</p>
<h2 id="symbole-und-nested-scopes">Symbole und (nested) Scopes</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> y;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    { <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-2e0fd987de05f8066dc376507bb35a48" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes/nestedscopes.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2e0fd987de05f8066dc376507bb35a48"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes/nestedscopes.png?width=auto&height=auto"></a></p>
</div>
</div>
<p><strong>Aufgaben</strong>:</p>
<ul>
<li><code>bind()</code>: Symbole im Scope definieren</li>
<li><code>resolve()</code>: Symbole aus Scope oder Eltern-Scope abrufen</li>
</ul>
<h3 id="hinzunahme-von-scopes">Hinzunahme von Scopes</h3>
<p><strong>Bsp.:</strong> Die zu übersetzende Sprache ist scope-basiert und kennt nur Bezeichner
für Variablen</p>
<p>Scopes können ineinander verschachtelt sein. Die Spezifikation der zu übersetzenden
Sprache legt fest, in welcher Reihenfolge Scopes zu durchsuchen sind, wenn auf einen
Bezeichner Bezug genommen wird, der nicht im aktuellen Scope definiert ist.</p>
<p>Insgesamt bilden die Scopes oft eine Baumstruktur, wobei jeder Knoten einen Scope
repräsentiert und seine Kinder die direkt in ihm enthaltenen Scopes sind. Dabei ist
es in der Regel so, dass Scopes sich entweder vollständig überlappen oder gar nicht.
Wenn ein Bezeichner nicht im aktuellen Scope vorhanden ist, muss er in der Regel in
umschließenden Scopes gesucht werden. Hier kann ein Stack aller &quot;offenen&quot; Scopes
benutzt werden.</p>
<h3 id="grundlegendes-vorgehen">Grundlegendes Vorgehen</h3>
<p>Das Element, das einen neuen Scope definiert, steht selbst in dem aktuell
behandelten Scope. Wenn dieses Element selbst ein Bezeichner ist, gehört
dieser in den aktuellen Scope. Nur das, was nur innerhalb des oben genannten
Elements oder Bezeichners definiert wird, gehört in den Scope des Elements
oder Bezeichners.</p>
<h2 id="nested-scopes-symbole-und-scopes">Nested Scopes: Symbole und Scopes</h2>
<h3 id="implementierung-mit-hierarchischen-verketteten-tabellen">Implementierung mit hierarchischen (verketteten) Tabellen</h3>
<p>Pro Scope wird eine Symboltabelle angelegt, dabei enthält jede Symboltabelle zusätzlich
einen Verweis auf ihre Vorgängersymboltabelle für den umgebenden Scope. Die globale
Symboltabelle wird typischerweise mit allen Schlüsselwörtern initialisiert.</p>
<ul>
<li>Wenn ein neuer Scope betreten wird, wird eine neue Symboltabelle erzeugt.</li>
<li>Scanner: Erkennt Bezeichner und sucht ihn in der Symboltabelle des aktuellen
Scopes bzw. trägt ihn dort ein und übergibt dem Parser das erkannte Token und
einen Verweis auf den Symboltabelleneintrag (<strong>Erinnerung</strong>: Der Scanner wird
i.d.R. vom Parser aus aufgerufen, d.h. der Parser setzt den aktuellen Scope!)</li>
<li>Parser:
<ul>
<li>Wird ein neues Element (ein Bezeichner) definiert, muss bestimmt werden, ob
es einen eigenen Scope hat. Wenn ja, wird eine neue Symboltabelle für den
Scope angelegt. Sie enthält alle Definitionen von Elementen, die in diesem
Scope liegen. Der Bezeichner selbst wird in die aktuelle Symboltabelle eingetragen
mit einem Verweis auf die neue Tabelle, die all die Bezeichner beinhaltet, die
außerhalb dieses Scopes nicht sichtbar sein sollen. Die Tabellen werden untereinander
verzeigert.</li>
<li>Wird ein Element deklariert oder benutzt, muss sein Eintrag in allen sichtbaren
Scopes in der richtigen Reihenfolge entlang der Verzeigerung gesucht (und je nach
Sprachdefinition auch gefunden) werden.</li>
</ul>
</li>
<li>Der Parse-Tree enthält im Knoten für den Bezeichner den Verweis in die Symboltabelle</li>
</ul>
<h3 id="klassenhierarchie-für-scopes">Klassenhierarchie für Scopes</h3>
<p>Für die Scopes wird eine Klasse <code>Scope</code> definiert mit den Methoden <code>bind()</code> (zum
Definieren von Symbolen im Scope) und <code>resolve()</code> (zum Abrufen von Symbolen aus
dem Scope oder dem umgebenden Scope).</p>
<p>Für lokale Scopes wird eine Instanz dieser Klasse angelegt, die eine Referenz auf
den einschließenden Scope im Attribut <code>enclosingScope</code> hält. Für den globalen Scope
ist diese Referenz einfach leer (<code>None</code>).</p>
<h3 id="klassen-und-interfaces-für-symbole">Klassen und Interfaces für Symbole</h3>
<p>Für die Symbole gibt es die Klasse <code>Symbol</code>, wo für jedes Symbol Name und Typ gespeichert
wird. Variablensymbole leiten direkt von dieser Klasse ab. Für die eingebauten Typen wird
ein &quot;Marker-Interface&quot; <code>Type</code> erstellt, um Variablen- und Typ-Symbole unterscheiden zu
können.</p>
<p><a href="#R-image-d55001d0676ed6766e96ebc5fa02e2d5" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes/nestedscopesuml.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d55001d0676ed6766e96ebc5fa02e2d5"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes/nestedscopesuml.png?width=80%25&height=auto"></a></p>
<p><span class='origin'>Quelle: Eigene Modellierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes.html#id_Parr2010">[Parr2010, p. 142]</a></span></p>
<h3 id="alternative-implementierung-über-einen-stack">Alternative Implementierung über einen Stack</h3>
<ul>
<li>Der Parse Tree bzw. der AST enthalten an den Knoten, die jeweils einen ganzen
Scope repräsentieren, einen Verweis auf die Symboltabelle dieses Scopes.</li>
<li>Die Scopes werden in einem Stack verwaltet.</li>
<li>Wird ein Scope betreten beim Baumdurchlauf, wird ein Verweis auf seine
Symboltabelle auf den Stack gepackt.</li>
<li>Die Suche von Bezeichnern in umliegenden Scopes erfordert ein Durchsuchen
des Stacks von oben nach unten.</li>
<li>Beim Verlassen eines Scopes beim Baumdurchlauf wird der Scope vom Stack entfernt.</li>
</ul>
<h2 id="nested-scopes-definieren-und-auflösen-von-namen">Nested Scopes: Definieren und Auflösen von Namen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Scope</span>:
</span></span><span style="display:flex;"><span>    Scope enclosingScope    <span style="color:#75715e"># None if global (outermost) scope</span>
</span></span><span style="display:flex;"><span>    Symbol<span style="color:#f92672">&lt;</span>String, Symbol<span style="color:#f92672">&gt;</span> symbols
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">resolve</span>(name):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># do we know &#34;name&#34; here?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> symbols[name]: <span style="color:#66d9ef">return</span> symbols[name]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># if not here, check any enclosing scope</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> enclosingScope: <span style="color:#66d9ef">return</span> enclosingScope<span style="color:#f92672">.</span>resolve(name)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>: <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>     <span style="color:#75715e"># not found</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bind</span>(symbol):
</span></span><span style="display:flex;"><span>        symbols[symbol<span style="color:#f92672">.</span>name] <span style="color:#f92672">=</span> symbol
</span></span><span style="display:flex;"><span>        symbol<span style="color:#f92672">.</span>scope <span style="color:#f92672">=</span> self     <span style="color:#75715e"># track the scope in each symbol</span></span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigene Implementierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab1-scopes.html#id_Parr2010">[Parr2010, p. 169]</a></span></p>
<p><strong>Anmerkung</strong>: In der Klasse <code>Symbol</code> kann man ein Feld <code>scope</code> vom Typ <code>Scope</code>
implementieren. Damit &quot;weiss&quot; jedes Symbol, in welchem Scope es definiert ist und
man muss sich auf der Suche nach dem Scope eines Symbols ggf. nicht erst durch
die Baumstruktur hangeln. Aus technischer Sicht verhindert das Attribut das
Aufräumen eines lokalen Scopes durch den Garbage Collector, wenn man den lokalen
Scope wieder verlässt: Jeder Scope hat eine Referenz auf den umgebenden (Eltern-)
Scope (Feld <code>enclosingScope</code>). Wenn man den aktuellen Scope &quot;nach oben&quot; verlässt,
würde der eben verlassene lokale Scope bei nächster Gelegenheit aufgeräumt, wenn
es keine weiteren Referenzen auf diesen gäbe. Da nun aber die Symbole, die in
diesem Scope definiert wurden, auf diesen verweisen, passiert das nicht :)</p>
<h2 id="nested-scopes-listener">Nested Scopes: Listener</h2>
<p>Mit einem passenden Listener kann man damit die nötigen Scopes aufbauen:</p>
<ul>
<li><code>enterStart</code>:
<ul>
<li>erzeuge neuen globalen Scope</li>
<li>definiere und pushe die eingebauten Typen</li>
</ul>
</li>
<li><code>exitVarDecl</code>:
<ul>
<li>löse den Typ der Variablen im aktuellen Scope auf</li>
<li>definiere ein neues Variablensymbol im aktuellen Scope</li>
</ul>
</li>
<li><code>exitVar</code>:
<ul>
<li>löse die Variable im aktuellen Scope auf</li>
</ul>
</li>
<li><code>enterBlock</code>:
<ul>
<li>erzeuge neuen lokalen Scope, wobei der aktuelle Scope der Elternscope ist</li>
<li>ersetze den aktuellen Scope durch den lokalen Scope</li>
</ul>
</li>
<li><code>exitBlock</code>:
<ul>
<li>ersetze den aktuellen Scope durch dessen Elternscope</li>
</ul>
</li>
</ul>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-yacc" data-lang="yacc">start   :   stat+ ;

stat    : block | varDecl | expr &#39;;&#39; ;
block   : &#39;{&#39; stat* &#39;}&#39; ;

varDecl : type ID (&#39;=&#39; expr)? &#39;;&#39; ;
expr    : var &#39;=&#39; INT ;

var     : ID ;
type    : &#39;float&#39; | &#39;int&#39; ;</code></pre></div>
<p>Relevanter Ausschnitt aus der Grammatik</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{ <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>; x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>; }</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyListener</span>(BaseListener):
</span></span><span style="display:flex;"><span>    Scope scope
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">enterStart</span>(Parser<span style="color:#f92672">.</span>FileContext ctx):
</span></span><span style="display:flex;"><span>        globals <span style="color:#f92672">=</span> Scope()
</span></span><span style="display:flex;"><span>        globals<span style="color:#f92672">.</span>bind(BuiltIn(<span style="color:#e6db74">&#34;int&#34;</span>))
</span></span><span style="display:flex;"><span>        globals<span style="color:#f92672">.</span>bind(BuiltIn(<span style="color:#e6db74">&#34;float&#34;</span>))
</span></span><span style="display:flex;"><span>        scope <span style="color:#f92672">=</span> globals
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">enterBlock</span>(Parser<span style="color:#f92672">.</span>BlockContext ctx):
</span></span><span style="display:flex;"><span>        scope <span style="color:#f92672">=</span> Scope(scope)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitBlock</span>(Parser<span style="color:#f92672">.</span>BlockContext ctx):
</span></span><span style="display:flex;"><span>        scope <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>enclosingScope
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitVarDecl</span>(Parser<span style="color:#f92672">.</span>VarDeclContext ctx):
</span></span><span style="display:flex;"><span>        t <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>resolve(ctx<span style="color:#f92672">.</span>type()<span style="color:#f92672">.</span>getText())
</span></span><span style="display:flex;"><span>        var <span style="color:#f92672">=</span> Variable(ctx<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText(), t)
</span></span><span style="display:flex;"><span>        scope<span style="color:#f92672">.</span>bind(var)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitVar</span>(Parser<span style="color:#f92672">.</span>VarContext ctx):
</span></span><span style="display:flex;"><span>        name <span style="color:#f92672">=</span> ctx<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()
</span></span><span style="display:flex;"><span>        var <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>resolve(name)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> var <span style="color:#f92672">==</span> <span style="color:#66d9ef">None</span>: error(<span style="color:#e6db74">&#34;no such var: &#34;</span> <span style="color:#f92672">+</span> name)</span></span></code></pre></div>
<p><em>Anmerkung</em>: Um den Code auf die Folie zu bekommen, ist dies ein Mix aus Java und Python geworden. Sry ;)</p>
</div>
</div>
<p>In der Methode <code>exitVar()</code> wird das Variablensymbol beim Ablaufen des AST
lediglich aufgelöst und ein Fehler geworfen, wenn das Variablensymbol (noch)
nicht bekannt ist. Hier könnte man weiteres Type-Checking und/oder -Propagation
ansetzen.</p>
<p>Später im Interpreter muss an dieser Stelle dann aber auch der <strong>Wert</strong> der
Variablen abgerufen werden ...</p>
<h2 id="löschen-von-symboltabellen">Löschen von Symboltabellen</h2>
<p>Möglicherweise sind die Symboltabellen nach der Identifizierungsphase der Elemente
überflüssig, weil die zusammengetragenen Informationen als Attribute im AST stehen.
Die Knoten enthalten dann Verweise auf definierende Knoten von Elementen, nicht mehr
auf Einträge in den Symboltabellen. In diesem Fall können die Symboltabellen nach der
Identifizierung gelöscht werden, wenn sie nicht z.B. für einen symbolischen Debugger
noch gebraucht werden.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Symboltabellen: Verwaltung von Symbolen und Typen (Informationen über Bezeichner)</p>
</li>
<li>
<p>Blöcke: Nested Scopes =&gt; hierarchische Organisation</p>
</li>
<li>
<p>Binden von Bezeichner gleichen Namens an ihren jeweiligen Scope =&gt; <code>bind()</code></p>
</li>
<li>
<p>Abrufen von Bezeichnern aus dem aktuellen Scope oder den Elternscopes =&gt; <code>resolve()</code></p>
</li>
</ul>


    



    



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 02: CFG</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 3</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.<br><em>Kapitel 6, 7 und 8</em></li> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.<br><em>Kapitel 6.4 und 8.4</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>SymbTab2: Funktionen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Eine Funktion sind selbst ein Symbol, welches in einem Scope gilt und entsprechend
in der Symboltabelle eingetragen wird. Darüber hinaus bildet sie einen neuen
verschachtelten Scope, in dem die Funktionsparameter und der Funktionskörper definiert
werden müssen.</p>
<p>Entsprechend müssen die Strukturen für die Symboltabellen sowie das Eintragen und das
Auflösen von Symbolen erweitert werden.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/yk2x6WGhgVg' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Funktionen</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/eddc0526dca0dd506e7f1a4ea426319fca05126ebacadb328ab8ccf68f2d0b038bc58b98ab51fdf3774db1b3a4ffe5b3d2279c7db4a37fe277ed2f3b27b9e495' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Funktionen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Aufbau von Symboltabellen für Nested Scopes inkl. Strukturen/Klassen mit einem Listener</li> <li>(K3) Attribute von Klassen und Strukturen auflösen</li></ul>
  </div>
</div>




    <h2 id="funktionen-und-scopes">Funktionen und Scopes</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    { <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x; }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">g</span>(<span style="color:#66d9ef">int</span> z){}</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-e31b503efb7975ac3307d12c5cf07b61" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions/functionscopes.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e31b503efb7975ac3307d12c5cf07b61"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions/functionscopes.png?width=auto&height=auto"></a></p>
</div>
</div>
<h3 id="behandlung-von-funktionsdefinitionen">Behandlung von Funktionsdefinitionen</h3>
<ul>
<li>Jeder Symboltabelleneintrag braucht ein Feld, das angibt, ob es sich um eine
Variable, eine Funktion, ... handelt. Alternativ eine eigene Klasse ableiten ...</li>
<li>Der Name der Funktion steht als Bezeichner in der Symboltabelle des Scopes, in dem
die Funktion definiert wird.</li>
<li>Der Symboltabelleneintrag für den Funktionsnamen enthält Verweise auf die Parameter.</li>
<li>Der Symboltabelleneintrag für den Funktionsnamen enthält Angaben über den Rückgabetypen.</li>
<li>Jede Funktion wird grundsätzlich wie ein neuer Scope behandelt.</li>
<li>Die formalen Parameter werden als Einträge in der Symboltabelle für den Scope der
Funktion angelegt and entsprechend als Parameter gekennzeichnet.</li>
</ul>
<h3 id="behandlung-von-funktionsaufrufen">Behandlung von Funktionsaufrufen</h3>
<ul>
<li>Der Name der Funktion steht als Bezeichner in der Symboltabelle des Scopes, in dem
die Funktion aufgerufen wird und wird als Aufruf gekennzeichnet.</li>
<li>Der Symboltabelleneintrag für den Funktionsnamen enthält Verweise auf die aktuellen
Parameter.</li>
<li>Die Definition der Funktion wird in den zugänglichen Scopes gesucht (wie oben) und
ein Verweis darauf in der Symboltabelle gespeichert.</li>
</ul>
<h2 id="erweiterung-des-klassendiagramms-für-funktions-scopes">Erweiterung des Klassendiagramms für Funktions-Scopes</h2>
<p><a href="#R-image-993851857d9bd4dc0470d9909c9cc6a9" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions/functionscopesuml.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-993851857d9bd4dc0470d9909c9cc6a9"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions/functionscopesuml.png?width=80%25&height=auto"></a></p>
<p><span class='origin'>Quelle: Eigene Modellierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab2-functions.html#id_Parr2010">[Parr2010, p. 147]</a></span></p>
<h2 id="funktionen-sind-symbole-und-scopes">Funktionen sind Symbole <em>und</em> Scopes</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Function</span>(Scope, Symbol):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(name, retType, enclScope):
</span></span><span style="display:flex;"><span>        Symbol<span style="color:#f92672">.</span>__init__(name, retType)      <span style="color:#75715e"># we are &#34;Symbol&#34; ...</span>
</span></span><span style="display:flex;"><span>        enclosingScope <span style="color:#f92672">=</span> enclScope          <span style="color:#75715e"># ... and &#34;Scope&#34;</span></span></span></code></pre></div>
<h2 id="funktionen-listener">Funktionen: Listener</h2>
<p>Den Listener zum Aufbau der Scopes könnte man entsprechend erweitern:</p>
<ul>
<li><code>enterFuncDecl</code>:
<ul>
<li>löse den Typ der Funktion im aktuellen Scope auf</li>
<li>lege neues Funktionssymbol an, wobei der aktuelle Scope der Elternscope ist</li>
<li>definiere das Funktionssymbol im aktuellen Scope</li>
<li>ersetze den aktuellen Scope durch das Funktionssymbol</li>
</ul>
</li>
<li><code>exitFuncDecl</code>:
<ul>
<li>ersetze den aktuellen Scope durch dessen Elternscope</li>
</ul>
</li>
<li><code>exitParam</code>: analog zu <code>exitVarDecl</code>
<ul>
<li>löse den Typ der Variablen im aktuellen Scope auf</li>
<li>definiere ein neues Variablensymbol im aktuellen Scope</li>
</ul>
</li>
<li><code>exitCall</code>: analog zu <code>exitVar</code>
<ul>
<li>löse das Funktionssymbol (und die Argumente) im aktuellen Scope auf</li>
</ul>
</li>
</ul>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-yacc" data-lang="yacc">funcDecl : type ID &#39;(&#39; params? &#39;)&#39; block ;
params   : param (&#39;,&#39; param)* ;
param    : type ID ;

call     : ID &#39;(&#39; exprList? &#39;)&#39; ;
exprList : expr (&#39;,&#39; expr)* ;</code></pre></div>
<p>Relevanter Ausschnitt aus der Grammatik</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#a6e22e">f</span>(x);</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">enterFuncDecl</span>(Parser<span style="color:#f92672">.</span>FuncDeclContext ctx):
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> ctx<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>resolve(ctx<span style="color:#f92672">.</span>type()<span style="color:#f92672">.</span>getText())
</span></span><span style="display:flex;"><span>    func <span style="color:#f92672">=</span> Function(name, type, scope)
</span></span><span style="display:flex;"><span>    scope<span style="color:#f92672">.</span>bind(func)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># change current scope to function scope</span>
</span></span><span style="display:flex;"><span>    scope <span style="color:#f92672">=</span> func
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitFuncDecl</span>(Parser<span style="color:#f92672">.</span>FuncDeclContext ctx):
</span></span><span style="display:flex;"><span>    scope <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>enclosingScope
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitParam</span>(Parser<span style="color:#f92672">.</span>ParamContext ctx):
</span></span><span style="display:flex;"><span>    t <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>resolve(ctx<span style="color:#f92672">.</span>type()<span style="color:#f92672">.</span>getText())
</span></span><span style="display:flex;"><span>    var <span style="color:#f92672">=</span> Variable(ctx<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText(), t)
</span></span><span style="display:flex;"><span>    scope<span style="color:#f92672">.</span>bind(var)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">exitCall</span>(Parser<span style="color:#f92672">.</span>CallContext ctx):
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> ctx<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()
</span></span><span style="display:flex;"><span>    func <span style="color:#f92672">=</span> scope<span style="color:#f92672">.</span>resolve(name)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> func <span style="color:#f92672">==</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>        error(<span style="color:#e6db74">&#34;no such function: &#34;</span> <span style="color:#f92672">+</span> name)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> func<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Variable:
</span></span><span style="display:flex;"><span>        error(name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; is not a function&#34;</span>)</span></span></code></pre></div>
<p><em>Anmerkung</em>: Um den Code auf die Folie zu bekommen, ist dies wieder ein Mix aus Java und Python geworden. Sry ;)</p>
</div>
</div>
<p>Im Vergleich zu den einfachen <em>nested scopes</em> kommt hier nur ein weiterer
Scope für den Funktionskopf dazu. Dieser spielt eine Doppelrolle: Er ist
sowohl ein Symbol (welches im Elternscope bekannt ist) als auch ein eigener
(lokaler) Scope für die Funktionsparameter.</p>
<p>Um später im Interpreter eine Funktion tatsächlich auswerten zu können, muss
im Scope der Funktion zusätzlich der AST-Knoten der Funktionsdefinition
gespeichert werden (weiteres Feld/Attribut in <code>Function</code>)!</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Symboltabellen: Verwaltung von Symbolen und Typen (Informationen über Bezeichner)</p>
</li>
<li>
<p>Funktionen: Nested Scopes =&gt; hierarchische Organisation</p>
</li>
<li>
<p>Umgang mit dem Funktionsnamen, den Parametern und dem Funktionskörper</p>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p>Diskutieren Sie folgende Fragen:</p>
<ul>
<li>Warum werden überhaupt Symboltabellen eingesetzt?</li>
<li>Warum muss man zwischen Deklaration und Definition unterscheiden?</li>
<li>Erklären Sie die Verbindung einer Symboltabelle zu den einzelnen Phasen einer Compiler-Pipeline.</li>
<li>Wo liegen die Grenzen der semantischen Analyse?</li>
<li>Warum kann man im Allgemeinen nicht die Symboltabellen nutzen, um die Werte von Symbolen mit zu speichern?</li>
<li>Wieso sind Funktionen Scope und Symbol gleichzeitig?</li>
<li>Skizzieren Sie für eine Funktionsdeklaration mit Parametern die resultierende Symboltabelle.</li>
<li>Erklären Sie, wie man beim Funktionsaufruf vorgehen würde. Werden dabei Einträge in der Symboltabelle erzeugt?</li>
</ul>
  </div>
</div>



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 02: CFG</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 3</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.<br><em>Kapitel 6, 7 und 8</em></li> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.<br><em>Kapitel 6.4 und 8.4</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>SymbTab3: Strukturen und Klassen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Strukturen und Klassen bilden jeweils einen eigenen verschachtelten Scope, worin
die Attribute und Methoden definiert werden.</p>
<p>Bei der Namensauflösung muss man dies beachten und darf beim Zugriff auf Attribute
und Methoden nicht einfach in den übergeordneten Scope schauen. Zusätzlich müssen
hier Vererbungshierarchien in der Struktur der Symboltabelle berücksichtigt werden.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/-w9ljeFGq3k' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Strukturen und Klassen</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/61bbea5570ec17a741c3899f0822085deee317d4f5f34268eb6bcc1cc4ce6b443eb2ac397791e1fbeb5ba7a9d6c46cf08307bf3be2ccde9b7d2fc0a6ee9cfcc9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Strukturen und Klassen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Aufbau von Symboltabellen für Nested Scopes inkl. Strukturen/Klassen mit einem Listener</li> <li>(K3) Attribute von Klassen und Strukturen auflösen</li></ul>
  </div>
</div>




    <h2 id="strukturen">Strukturen</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> A {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">struct</span> B {<span style="color:#66d9ef">int</span> x;};
</span></span><span style="display:flex;"><span>    B b;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">struct</span> C {<span style="color:#66d9ef">int</span> z;};
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>A a;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>() {
</span></span><span style="display:flex;"><span>    A a;
</span></span><span style="display:flex;"><span>    a.b.x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-2f4bf33e78753b61ace20274d3fe4cc7" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/structscopes.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2f4bf33e78753b61ace20274d3fe4cc7"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/structscopes.png?width=auto&height=auto"></a></p>
</div>
</div>
<h2 id="strukturen-erweiterung-der-symbole-und-scopes">Strukturen: Erweiterung der Symbole und Scopes</h2>
<p><a href="#R-image-273cfa766ca3e07e440eff3b3bbb138d" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/structscopesuml.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-273cfa766ca3e07e440eff3b3bbb138d"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/structscopesuml.png?width=80%25&height=auto"></a></p>
<p><span class='origin'>Quelle: Eigene Modellierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html#id_Parr2010">[Parr2010, p. 162]</a></span></p>
<p>Strukturen stellen wie Funktionen sowohl einen Scope als auch ein Symbol dar.</p>
<p>Zusätzlich stellt eine Struktur (-definition) aber auch einen neuen Typ
dar, weshalb <code>Struct</code> auch noch das Interface <code>Type</code> &quot;implementiert&quot;.</p>
<h2 id="strukturen-auflösen-von-namen">Strukturen: Auflösen von Namen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Struct</span>(Scope, Symbol, Type):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">resolveMember</span>(name):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> symbols[name]</span></span></code></pre></div>
<p>=&gt; Auflösen von &quot;<code>a.b</code>&quot; (im Listener in <code>exitMember()</code>):</p>
<ul>
<li><code>a</code> im &quot;normalen&quot; Modus mit <code>resolve()</code> über den aktuellen Scope</li>
<li>Typ von <code>a</code> ist <code>Struct</code> mit Verweis auf den eigenen Scope</li>
<li><code>b</code> nur innerhalb des <code>Struct</code>-Scopes mit <code>resolveMember()</code></li>
</ul>
<p>In der Grammatik würde es eine Regel <code>member</code> geben, die auf eine Struktur
der Art <code>ID.ID</code> anspricht (d.h. eigentlich den Teil <code>.ID</code>), und entsprechend
zu Methoden <code>enterMember()</code> und <code>exitMember()</code> im Listener führt.</p>
<p>Das Symbol für <code>a</code> hat als <code>type</code>-Attribut eine Referenz auf die <code>Struct</code>,
die ja einen eigenen Scope hat (<code>symbols</code>-Map). Darin muss dann <code>b</code> aufgelöst
werden.</p>
<h2 id="klassen">Klassen</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() { ; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> A {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> z <span style="color:#f92672">=</span> x<span style="color:#f92672">+</span>y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-b3cda3da1ae8aaeea8353352988dd622" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/classscopes.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b3cda3da1ae8aaeea8353352988dd622"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/classscopes.png?width=auto&height=auto"></a></p>
</div>
</div>
<h2 id="klassen-erweiterung-der-symbole-und-scopes">Klassen: Erweiterung der Symbole und Scopes</h2>
<p><a href="#R-image-0d40f142d428f61dbca54e0975c11f38" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/classscopesuml.png?width=80%25&height=auto" style=" height: auto; width: 80%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0d40f142d428f61dbca54e0975c11f38"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes/classscopesuml.png?width=80%25&height=auto"></a></p>
<p><span class='origin'>Quelle: Eigene Modellierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html#id_Parr2010">[Parr2010, p. 167]</a></span></p>
<p>Bei Klassen kommt in den Tabellen ein weiterer Pointer <code>parentClazz</code> auf die
Elternklasse hinzu (in der Superklasse ist der Wert <code>None</code>).</p>
<h2 id="klassen-auflösen-von-namen">Klassen: Auflösen von Namen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Clazz</span>(Struct):
</span></span><span style="display:flex;"><span>    Clazz parentClazz   <span style="color:#75715e"># None if base class</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">resolve</span>(name):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># do we know &#34;name&#34; here?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> symbols[name]: <span style="color:#66d9ef">return</span> symbols[name]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># NEW: if not here, check any parent class ...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> parentClazz <span style="color:#f92672">and</span> parentClazz<span style="color:#f92672">.</span>resolve(name): <span style="color:#66d9ef">return</span> parentClazz<span style="color:#f92672">.</span>resolve(name)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># ... or enclosing scope if base class</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> enclosingScope: <span style="color:#66d9ef">return</span> enclosingScope<span style="color:#f92672">.</span>resolve(name)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span>: <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>     <span style="color:#75715e"># not found</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">resolveMember</span>(name):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> symbols[name]: <span style="color:#66d9ef">return</span> symbols[name]
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># NEW: check parent class</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> parentClazz: <span style="color:#66d9ef">return</span> parentClazz<span style="color:#f92672">.</span>resolveMember(name)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>: <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span></span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigene Implementierung nach einer Idee in <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/03-semantics/symbtab3-classes.html#id_Parr2010">[Parr2010, p. 172]</a></span></p>
<p><strong>Hinweis</strong>: Die obige Implementierungsskizze soll vor allem das Prinzip demonstrieren - sie ist aus
Gründen der Lesbarkeit nicht besonders effizient: beispielsweise wird <code>parentClazz.resolve(name)</code>
mehrfach evaluiert ...</p>
<p>Beim Auflösen von Attributen oder Methoden muss zunächst in der Klasse selbst gesucht werden,
anschließend in der Elternklasse.</p>
<p>Beispiel (mit den obigen Klassen <code>A</code> und <code>B</code>):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>B foo;
</span></span><span style="display:flex;"><span>foo.x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;</span></span></code></pre></div>
<p>Hier wird analog zu den Structs zuerst <code>foo</code> mit <code>resolve()</code> im lokalen Scope aufgelöst. Der Typ
des Symbols <code>foo</code> ist ein <code>Clazz</code>, was zugleich ein Scope ist. In diesem Scope wird nun mit
<code>resolveMember()</code> nach dem Symbol <code>x</code> gesucht. Falls es hier nicht gefunden werden kann, wird in
der Elternklasse (sofern vorhanden) weiter mit<code>resolveMember()</code> gesucht.</p>
<p>Die normale Namensauflösung wird ebenfalls erweitert um die Auflösung in der Elternklasse.</p>
<p>Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> wuppie;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() { ; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> A {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> z <span style="color:#f92672">=</span> x<span style="color:#f92672">+</span>y<span style="color:#f92672">+</span>wuppie;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Hier würde <code>wuppie</code> als Symbol im globalen Scope definiert werden. Beim Verarbeiten von
<code>int z = x+y+wuppie;</code> würde mit <code>resolve()</code> nach <code>wuppie</code> gesucht: Zuerst im lokalen Scope
unterhalb der Funktion, dann im Funktions-Scope, dann im Klassen-Scope von <code>B</code>. Hier sucht
<code>resolve()</code> auch zunächst lokal, geht dann aber die Vererbungshierarchie entlang (sofern
wie hier vorhanden). Erst in der Superklasse (wenn der <code>parentClazz</code>-Zeiger <code>None</code> ist),
löst <code>resolve()</code> wieder normal auf und sucht um umgebenden Scope. Auf diese Weise kann man
wie gezeigt in Klassen (Methoden) auf globale Variablen verweisen ...</p>
<p><em>Anmerkung</em>: Durch dieses Vorgehen wird im Prinzip in Methoden aus dem Zugriff auf ein Feld
<code>x</code> implizit ein <code>this.x</code> aufgelöst, wobei <code>this</code> die Klasse auflöst und <code>x</code> als Attribut darin.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Symboltabellen: Verwaltung von Symbolen und Typen (Informationen über Bezeichner)</p>
</li>
<li>
<p>Strukturen und Klassen bilden eigenen Scope</p>
</li>
<li>
<p>Strukturen/Klassen lösen etwas anders auf: Zugriff auf Attribute und Methoden</p>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Symboltabellen praktisch</strong></p>
<p>Betrachten Sie folgenden Java-Code:</p>
<ol>
<li>Umkreisen Sie alle Symbole.</li>
<li>Zeichen Sie Pfeile von Symbol-Referenzen zur jeweiligen Definition (falls vorhanden).</li>
<li>Identifizieren Sie alle benannten Scopes.</li>
<li>Identifizieren Sie alle anonymen Scopes.</li>
<li>Geben Sie die resultierende Symboltabelle an (Strukturen wie in VL besprochen).</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> a.b;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> u.Y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">X</span> <span style="color:#66d9ef">extends</span> Y {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> x,y;
</span></span><span style="display:flex;"><span>        { <span style="color:#66d9ef">int</span> x; x <span style="color:#f92672">-</span> y <span style="color:#f92672">+</span> 1; }
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">=</span> y <span style="color:#f92672">+</span> 1;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Z</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">W</span> <span style="color:#66d9ef">extends</span> X {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() { f(34); }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x,z;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span>        y <span style="color:#f92672">=</span> x;
</span></span><span style="display:flex;"><span>        z <span style="color:#f92672">=</span> x;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  </div>
</div>



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet02.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 02: CFG</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 3</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.<br><em>Kapitel 6, 7 und 8</em></li> <li id='id_Parr2014'>[Parr2014] <a href='https://learning.oreilly.com/library/view/the-definitive-antlr/9781941222621/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The Definitive ANTLR 4 Reference</strong></a><br>Parr, T., Pragmatic Bookshelf, 2014. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5699-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5699-9</a>.<br><em>Kapitel 6.4 und 8.4</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="zwischencode">Zwischencode</h1>

<p>Die Schnittstelle zwischen dem &quot;Frontend&quot; und dem &quot;Backend&quot; ist der &quot;Zwischencode&quot;
(<em>intermediate code</em> (<em>IC</em>), auch <em>intermediate representation</em> (<em>IR</em>) genannt).</p>
<p>Für den Zwischencode gibt es kein allgemein definiertes Format. In der Praxis
trifft man auf eine große Bandbreite an verschiedenen Formaten, besonders verbreitet
sind beispielsweise die Formate AST, SSA, LLVM-IR und MLIR.</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir.html">Überblick Zwischencode</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/llvm-ir.html">LLVM als IR</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Zwischencode</h1>
<article class="default">
<h1>Überblick Zwischencode</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>
Für den Zwischencode (<strong>IR</strong>) gibt es kein allgemein definiertes Format. In der Praxis
trifft man auf eine große Bandbreite an Formaten, wobei teilweise bereits der AST selbst
als &quot;Zwischencode&quot; betrachtet/benutzt wird. Typische Vertreter für IR sind beispielsweise
der <strong>LLVM IR</strong>, diverse Arten von Bytecode (nebst passender virtueller Maschine) und
schließlich als Vorstufe für die Erzeugung von Maschinencode der sogenannte &quot;Drei-Adressen-Code&quot;
und Assemblercode.
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/EVTtPkOwhJ8' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Überblick Zwischencode</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/b9562e9230f0c3174c434445bc4d8bc63fa232001933a7f553b36db9e002f4dcaed1e0952eddc9de9d31c4de805f493cafa03b0eed03567b0ce952564de4fdd9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Überblick Zwischencode</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Varianten von Zwischencode, Vor- und Nachteile</li></ul>
  </div>
</div>




    <h2 id="einordnung">Einordnung</h2>
<p><a href="#R-image-e07b87fd4cc21d85b030527707b9fc83" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir/architektur_cb.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e07b87fd4cc21d85b030527707b9fc83"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir/architektur_cb.png?width=auto&height=auto"></a></p>
<p>Die Schritte in der letzten Phase der Compiler-Pipeline können <em>sehr</em> unterschiedlich
ausfallen.</p>
<p>Beispielsweise könnte direkt aus dem AST der Ziel-Machine-Code erzeugt werden. Auf
der anderen Seite könnte aus dem AST ein <strong>Zwischenformat</strong> erzeugt werden, darauf
Optimierungen vorgenommen werden, daraus ein weiteres Zwischenformat erzeugt werden,
darauf weitere Optimierungen vorgenommen werden, ..., bis schließlich nach mehreren
Zwischenstufen das Zielformat erzeugt wird.</p>
<p>Nachfolgend betrachten wir verschiedene Beispiele, wie das Zwischenformat aussehen
kann.</p>
<h2 id="ast-als-zwischencode-beispiel-pandoc">AST als Zwischencode (Beispiel Pandoc)</h2>
<p>Häufig wird der AST selbst als Zwischencode verwendet. Ein Beispiel dafür ist
<a href="https://pandoc.org/" rel="external" target="_blank">Pandoc</a>.</p>
<p><a href="#R-image-aeb285bd3f8c222584a894aa58687dee" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir/pandoc.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aeb285bd3f8c222584a894aa58687dee"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/intro-ir/pandoc.png?width=auto&height=auto"></a></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>Dies ist ein Absatz mit
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">*</span>  einem Stichpunkt, und
</span></span><span style="display:flex;"><span>*  einem zweiten Stichpunkt.</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;blocks&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Para&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Dies&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;ist&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;ein&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Absatz&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                            {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;mit&#34;</span>}]},
</span></span><span style="display:flex;"><span>           {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;BulletList&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[
</span></span><span style="display:flex;"><span>               [{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Plain&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;einem&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Stichpunkt,&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;und&#34;</span>}]}],
</span></span><span style="display:flex;"><span>               [{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Plain&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:[{<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;einem&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;zweiten&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Space&#34;</span>},
</span></span><span style="display:flex;"><span>                                  {<span style="color:#f92672">&#34;t&#34;</span>:<span style="color:#e6db74">&#34;Str&#34;</span>,<span style="color:#f92672">&#34;c&#34;</span>:<span style="color:#e6db74">&#34;Stichpunkt.&#34;</span>}]}]]}],
</span></span><span style="display:flex;"><span><span style="color:#f92672">&#34;pandoc-api-version&#34;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">17</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">4</span>],<span style="color:#f92672">&#34;meta&#34;</span>:{}}</span></span></code></pre></div>
<p>Der Pandoc-AST spiegelt direkt die Dokumentstruktur wider. Im obigen Beispiel
haben wir einen Absatz mit dem Text &quot;<code>Dies ist ein Absatz mit</code>&quot;, der als <code>Para</code>
repräsentiert wird mit einer Liste von Strings (<code>Str</code>) und Leerzeichen (<code>Space</code>).</p>
<p>Die Stichpunktliste besteht pro Stichpunkt aus einem <code>Plain</code>-Knoten mit dem
eigentlichen Inhalt (wieder Strings und Leerzeichen).</p>
<p>Dieser AST ist der Dreh- und Angelpunkt in Pandoc. Verschiedene <em>Reader</em> können
unterschiedliche Textformate parsen und in einen AST überführen.</p>
<p>Auf diesem kann man mit <a href="https://pandoc.org/filters.html" rel="external" target="_blank">Filtern</a> Transformationen
vornehmen.</p>
<p>Anschließend können diverse <em>Writer</em> den AST in das gewünschte Zielformat überführen.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/04-intermediate/src/hello.md" target="_blank"><span class="title">Konsole: pandoc hello.md -s -t native</span></a></span></div>
<h2 id="zwischenformat-drei-adressen-code">Zwischenformat: Drei-Adressen-Code</h2>
<p>Eine weitere häufig eingesetzte Zwischenform kurz vor der Code-Generierung ist der sogenannte
&quot;Drei-Adressen-Code&quot;. Dieser besteht jeweils aus einer Operation auf bis zu drei Adressen.</p>
<p>Im Prinzip handelt es sich hier um eine Art &quot;High-Level Assembler&quot; mit beliebig vielen Registern ...</p>
<p>Adressen sind dabei Namen, Konstanten oder vom Compiler generierte temporäre Werte. Die typische Form
ist <code>x = y op z</code> (binäre Operationen) oder <code>x = op z</code> (unäre Operationen). Werte werden mit <code>x = y</code>
kopiert. Jeder Teilausdruck erhält typischerweise eine eigene temporäre Variable zur Speicherung des
Ergebnisses. Weiterhin gibt es bedingte und unbedingte Sprünge und Prozedur-Aufrufe.</p>
<p>Index-Zugriffe werden über Pointerarithmetik aufgelöst (s.u.).</p>
<p>Eine Spezialform ist die sogenannte &quot;Static Single-Assignment&quot;-Form (<em>SSA</em>). Hierbei wird für jede
Zuweisung eine neue temporäre Variable generiert, d.h. jede im IR-Code verwendete Adresse (temporäre
Variable) hat genau eine Zuweisung. Dies wirkt sich günstig auf spezielle Optimierungen aus.</p>
<div class='columns'>
<div class='column'>
<pre><code>i = i+1;
if (a[i] &gt;= v) {
    i = 0;
}
</code></pre>
</div>
<div class='column'>
<pre><code>    t1 = i + 1
    i  = t1
    t2 = i * 8
    t3 = a + t2
    if t3 &gt;= v goto L1
    goto L2
L1: i  = 0
L2: ...
</code></pre>
</div>
</div>
<p>Im obigen Beispiel wurde davon ausgegangen, dass die Einträge im Array <code>a</code> 8 Bit breit sind. Das
muss der Compiler wissen, um jeweils den korrekten Offset zu benutzen.</p>
<p>Außerdem könnte man den Code gleich noch optimieren und die Anzahl der Sprünge reduzieren:</p>
<pre><code>    t1 = i + 1
    i  = t1
    t2 = i * 8
    t3 = a + t2
    if t3 &lt; v goto L
    i  = 0
L:  ...
</code></pre>
<h2 id="llvm-ir">LLVM IR</h2>
<p><strong>L</strong>ow <strong>L</strong>evel <strong>V</strong>irtual <strong>M</strong>achine</p>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">35</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-llvm" data-lang="llvm"><span style="display:flex;"><span><span style="color:#66d9ef">define</span> <span style="color:#66d9ef">i32</span> @main() #0 {
</span></span><span style="display:flex;"><span>  %1 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %2 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %3 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">i32</span>* %1, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">7</span>, <span style="color:#66d9ef">i32</span>* %2, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %4 = <span style="color:#66d9ef">load</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>* %2, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %5 = <span style="color:#66d9ef">add</span> <span style="color:#66d9ef">nsw</span> <span style="color:#66d9ef">i32</span> %4, <span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> %5, <span style="color:#66d9ef">i32</span>* %3, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ret</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/04-intermediate/src/hello.c" target="_blank"><span class="title">Beispiel: clang -emit-llvm -S -o - hello.c</span></a></span></div>
<p>Der obige Output ist auf die <em>relevanten Zeilen gekürzt</em>; der gesamte Output im LLVM-Format
sieht wie folgt aus:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-llvm" data-lang="llvm"><span style="display:flex;"><span><span style="color:#75715e">; ModuleID = &#39;hello.c&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">source_filename</span> = <span style="color:#e6db74">&#34;hello.c&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">target</span> <span style="color:#66d9ef">datalayout</span> = <span style="color:#e6db74">&#34;e-m:e-i64:64-f80:128-n8:16:32:64-S128&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">target</span> <span style="color:#66d9ef">triple</span> = <span style="color:#e6db74">&#34;x86_64-pc-linux-gnu&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">; Function Attrs: noinline nounwind optnone uwtable
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">define</span> <span style="color:#66d9ef">i32</span> @main() #0 {
</span></span><span style="display:flex;"><span>  %1 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %2 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %3 = <span style="color:#66d9ef">alloca</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">i32</span>* %1, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">7</span>, <span style="color:#66d9ef">i32</span>* %2, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %4 = <span style="color:#66d9ef">load</span> <span style="color:#66d9ef">i32</span>, <span style="color:#66d9ef">i32</span>* %2, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  %5 = <span style="color:#66d9ef">add</span> <span style="color:#66d9ef">nsw</span> <span style="color:#66d9ef">i32</span> %4, <span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">store</span> <span style="color:#66d9ef">i32</span> %5, <span style="color:#66d9ef">i32</span>* %3, <span style="color:#66d9ef">align</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ret</span> <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">attributes</span> #0 = { <span style="color:#66d9ef">noinline</span> <span style="color:#66d9ef">nounwind</span> <span style="color:#66d9ef">optnone</span> <span style="color:#66d9ef">uwtable</span> <span style="color:#e6db74">&#34;correctly-rounded-divide-sqrt-fp-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;disable-tail-calls&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;less-precise-fpmad&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;no-frame-pointer-elim&#34;</span>=<span style="color:#e6db74">&#34;true&#34;</span> <span style="color:#e6db74">&#34;no-frame-pointer-elim-non-leaf&#34;</span> <span style="color:#e6db74">&#34;no-infs-fp-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;no-jump-tables&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;no-nans-fp-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;no-signed-zeros-fp-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;no-trapping-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;stack-protector-buffer-size&#34;</span>=<span style="color:#e6db74">&#34;8&#34;</span> <span style="color:#e6db74">&#34;target-cpu&#34;</span>=<span style="color:#e6db74">&#34;x86-64&#34;</span> <span style="color:#e6db74">&#34;target-features&#34;</span>=<span style="color:#e6db74">&#34;+fxsr,+mmx,+sse,+sse2,+x87&#34;</span> <span style="color:#e6db74">&#34;unsafe-fp-math&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#e6db74">&#34;use-soft-float&#34;</span>=<span style="color:#e6db74">&#34;false&#34;</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>!llvm.module.flags = !{!0}
</span></span><span style="display:flex;"><span>!llvm.ident = !{!1}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>!0 = !{<span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">1</span>, !&#34;wchar_size&#34;, <span style="color:#66d9ef">i32</span> <span style="color:#ae81ff">4</span>}
</span></span><span style="display:flex;"><span>!1 = !{!&#34;clang version 6.0.0-1ubuntu2 (tags/RELEASE_600/final)&#34;}</span></span></code></pre></div>
<p>Es werden drei &quot;virtuelle Register&quot; (Variablen) <code>%1</code>, <code>%2</code> und <code>%3</code> auf dem
Stack angelegt (32-bit Integer; <code>align 4</code>: alle Adressen sind Vielfache von 4).</p>
<p>Mit <code>store i32 0, ...</code> wird in <code>%1</code> der Wert <code>0</code> geschrieben (vergleichbar mit
<code>*p = 0</code>). In <code>%2</code> wird analog der Wert <code>7</code> geschrieben (<code>x=7</code>).</p>
<p>Dann wird der Wert aus <code>%2</code> in eine neue Variable <code>%4</code> geladen und das Ergebnis
der Addition aus <code>%4</code> und dem Wert <code>35</code> in eine weitere neue Variable <code>%5</code>
geschrieben. Der Wert dieser Variablen wird dann auf dem Stack in <code>%3</code> gespeichert
(<code>y = x+35</code>).</p>
<p>Vgl. auch <a href="https://llvm.org/docs/LangRef.html" rel="external" target="_blank">LLVM Language Reference Manual</a> und
<a href="https://blog.regehr.org/archives/1453" rel="external" target="_blank">blog.regehr.org/archives/1453</a>.</p>
<h2 id="bytecode-beispiel-python">Bytecode (Beispiel Python)</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">35</span></span></span></code></pre></div>
</div>
<div class='column'>
<pre><code>  1  0 LOAD_CONST    0 (7)
     3 STORE_NAME    0 (x)

  2  6 LOAD_NAME     0 (x)
     9 LOAD_CONST    1 (35)
    12 BINARY_ADD
    13 STORE_NAME    1 (y)
    16 LOAD_CONST    2 (None)
    19 RETURN_VALUE
</code></pre>
</div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/04-intermediate/src/hello.py" target="_blank"><span class="title">Beispiel: python -m dis hello.py</span></a></span></div>
<p>Python pflegt 3 Listen: <code>co_names</code> für die Namen plus <code>co_values</code> für die dazugehörigen Werte sowie
<code>co_consts</code> für Konstanten. Die Listen der Namen und Werte sind gleich lang, ein Index bezieht sich
jeweils auf das selbe Symbol. Werte werden über einen Stack verarbeitet. Die Opcodes stehen in einer
weiteren Liste <code>co_code</code>. (Die Opcodes sind oben der besseren Lesbarkeit halber als Text ausgegeben,
<code>LOAD_CONST</code> hat beispielsweise den Wert <code>100</code>.)</p>
<p>Nach dem Laden des Programms ist <code>x</code> in <code>co_names[0]</code>, <code>y</code> in <code>co_names[1]</code>. Der Wert <code>7</code> steht in
<code>co_const[0]</code>, die <code>35</code> in <code>co_const[1]</code>.</p>
<p>Das <code>LOAD_CONST 0</code> (<code>co_code[0]</code>) lädt den Inhalt von <code>co_consts[0]</code> auf den Stack (<code>push()</code>), d.h.
der Wert <code>7</code> wird auf den Stack gepusht. Mit <code>STORE_NAME 0</code> (<code>co_code[3]</code>) wird der Inhalt des obersten
Stackeintrags in <code>co_values[0]</code> geschrieben und der Eintrag vom Stack entfernt (<code>pop()</code>). Dies entspricht
Zeile 1 im Quellcode: <code>x = 7</code>.</p>
<p><code>LOAD_NAME 0</code> pusht <code>co_values[0]</code> auf den Stack (Wert von <code>x</code>), gefolgt von der <code>35</code> per <code>LOAD_CONST 1</code>
(<code>co_const[1]</code>). Das <code>BINARY_ADD</code> entfernt die beiden obersten Einträge, addiert die Werte und pusht
das Ergebnis wieder auf den Stack. Mit <code>STORE_NAME 1</code> wird der Wert in <code>co_values[1]</code> geschrieben, d.h.
<code>y</code> bekommt den Wert zugewiesen.</p>
<h2 id="bytecode-beispiel-java">Bytecode (Beispiel Java)</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Hello</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">wuppie</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> 7;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> 35;
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<pre><code>Compiled from &quot;Hello.java&quot;
public class Hello {
  public Hello();
    Code:
       0: aload_0
       1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V
       4: return

  void wuppie();
    Code:
       0: bipush        7
       2: istore_1
       3: iload_1
       4: bipush        35
       6: iadd
       7: istore_2
       8: return
}
</code></pre>
</div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/04-intermediate/src/Hello.java" target="_blank"><span class="title">Beispiel: javac Hello.java &amp;&amp; javap -c Hello.class</span></a></span></div>
<p>Für jeden Methodenaufruf wird ein entsprechender Frame auf den Stack gepusht.
Dieser enthält ein Array mit den lokalen Variablen, durchnummeriert von <code>0</code> bis
<code>n-1</code>. (<code>long</code> und <code>double</code> bekommen je <em>2</em> lokale Variablen)
Zusätzlich gibt es im Frame einen Operandenstack, auf dem Funktionsparameter und
-rückgabewerte übergeben werden und auf dem die Operanden für die auszuführenden
Operationen sowie deren Zwischenergebnisse hinterlegt werden.</p>
<ul>
<li><code>bipush 7</code>: Pushe den Integer-Wert 7 auf den Stack</li>
<li><code>istore_1</code>: Poppe den ersten Wert vom Stack und speichere ihn in der lokalen
Integer-Variable mit Index 1 (<code>x=7</code>)</li>
<li><code>iload_1</code>: Pushe lokale Integer-Variable mit Index 1 auf den Stack (<code>x</code>)</li>
<li><code>bipush 35</code>: Pushe den Integer-Wert 35 auf den Stack</li>
<li><code>iadd</code>: Führe Integer-Addition aus mit den beiden obersten Werten auf Stack
und ersetze diese mit dem Ergebnis</li>
<li><code>istore_2</code>: Poppe den ersten Wert vom Stack und speichere ihn in der lokalen
Integer-Variable mit Index 2 (<code>y=x+35</code>)</li>
</ul>
<p>Die Konstanten <code>n</code> für <code>iconst_</code> funktionieren nur für kleinere Integer. Größere Werte
muss man mit <code>bipush</code> auf den Stack pushen.</p>
<p>Vgl. auch <a href="https://dzone.com/articles/introduction-to-java-bytecode" rel="external" target="_blank">dzone.com/articles/introduction-to-java-bytecode</a>
und <a href="https://www.beyondjava.net/java-programmers-guide-java-byte-code" rel="external" target="_blank">www.beyondjava.net/java-programmers-guide-java-byte-code</a>.</p>
<h2 id="assembler">Assembler</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x <span style="color:#f92672">+</span> <span style="color:#ae81ff">35</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0"><code class="language-gnuassembler" data-lang="gnuassembler">    .file   &#34;hello.c&#34;
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $7, -8(%rbp)
    movl    -8(%rbp), %eax
    addl    $35, %eax
    movl    %eax, -4(%rbp)
    movl    $0, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size       main, .-main
    .ident      &#34;GCC: (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0&#34;
    .section    .note.GNU-stack,&#34;&#34;,@progbits</code></pre></div>
</div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/04-intermediate/src/hello.c" target="_blank"><span class="title">Beispiel: gcc -S -o - hello.c</span></a></span></div>
<p>Die Ausgabe unterscheidet sich je nach Architektur, auf dem der C-Code
in Assembler-Code compiliert wird!</p>
<p>Mit <code>.text</code> beginnt das Textsegment. <code>main:</code> ist eine Sprungmarke,
die hier auch als Startpunkt für das Programm dient.</p>
<p>Auf X86-64 stehen <code>%rbp</code> und <code>%rsp</code> für 8-Byte-Register. Mit <code>%eax</code>
greift man auf die Bytes 0 bis 3 des 8-Byte-Registers <code>%rax</code> zu.</p>
<p>Da in <code>%rbp</code> Werte übergeben werden (können), wird das Register
mit <code>pushq %rbp</code> auf den Stack gesichert und am Ende mit <code>popq %rbp</code>
wiederhergestellt.</p>
<p>Ansonsten kann man die Bedeutung erraten:
<code>movl $7, -8(%rbp)</code> entspricht <code>mem[rbp-8] = 7</code>,
<code>movl -8(%rbp), %eax</code> entspricht <code>eax = mem[rbp-8]</code>,
<code>addl $35, %eax</code> entspricht <code>eax = eax + 35</code>,
<code>movl %eax, -4(%rbp)</code> entspricht <code>mem[rbp-4] = eax</code>.</p>
<p>Vgl. auch
<a href="https://cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf" rel="external" target="_blank">cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf</a>
und <a href="https://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax" rel="external" target="_blank">en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax</a>.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>Compiler generieren aus AST Zwischencode (&quot;<em>IC</em>&quot; oder &quot;<em>IR</em>&quot;)</li>
<li>Kein allgemein definiertes Format, große Bandbreite:
<ul>
<li>AST als IR</li>
<li>LLVM IR</li>
<li>Drei-Adressen-Code</li>
<li>Diverse Arten von Bytecode</li>
<li>Assemblercode</li>
</ul>
</li>
</ul>


    



    



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet04.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 04: Semantische Analyse</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Aho2023'>[Aho2023] <a href='https://learning.oreilly.com/library/view/compilers-principles-techniques/9789357054881/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Compilers: Principles, Techniques, and Tools, Updated 2nd Edition by Pearson</strong></a><br>Aho, A. V. und Lam, M. S. und Sethi, R. und Ullman, J. D. und Bansal, S., Pearson India, 2023. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-9-3570-5488-1' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-9-3570-5488-1</a>.<br><em>Kapitel 6 und 8</em></li> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 7</em></li> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 6 und 7</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.<br><em>Kapitel 11</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>LLVM als IR</h1>



    
    




    
    
        
        
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="far fa-file-powerpoint"></i> Annotierte Folien
  </div>
  <div class="box-content">
<ul> <li><a href='https://raw.githubusercontent.com/Compiler-CampusMinden/AnnotatedSlides/master/llvm-ir.ann.ba.pdf' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Annotierte Folien: LLVM-IR</a></li></ul>
  </div>
</div>




    <h1 id="motivation">Motivation</h1>
<p>Es ist ein neuer Prozessor entwickelt worden mit einem neuen Befehlssatz, und es
sollen für zwei Programmiersprachen Compiler entwickelt werden, die diesen Befehlssatz
als Ziel haben.</p>
<p>Was tun?</p>
<h2 id="thema-für-heute-ein-zwischencodeformat-für-verschiedene-programmiersprachen-und-prozessoren">Thema für heute: <em>Ein</em> Zwischencodeformat für verschiedene Programmiersprachen und Prozessoren</h2>
<p>Hier entsteht ein Tafelbild.</p>
<h1 id="llvm---ein-überblick">LLVM - Ein Überblick</h1>
<h2 id="was-ist-llvm">Was ist LLVM?</h2>
<ul>
<li><strong>ursprünglich</strong>: <strong>L</strong>ow <strong>L</strong>evel <strong>V</strong>irtual <strong>M</strong>achine</li>
<li>Open-Source-Framework</li>
<li>zur modularen Entwicklung von Compilern u. ä.</li>
<li>für Frontends für beliebige Programmiersprachen</li>
<li>für Backends für beliebige Befehlssatzarchitekturen</li>
</ul>
<p>&quot;Macht aus dem Zwischencode LLVR IR automatisch Maschinencode oder eine VM.&quot;</p>
<h2 id="kernstücke-des-llvm">Kernstücke des LLVM:</h2>
<ul>
<li>ein virtueller Befehlssatz</li>
<li>ein virtuelle Maschine</li>
<li>LLVM IR: eine streng typisierte Zwischensprache</li>
<li>ein flexibel konfigurierbarer Optimierer</li>
<li>ein Codegenerator für zahlreiche Architekturen</li>
<li>LMIR: mit Dialekten des IR arbeiten</li>
</ul>
<h2 id="was-kann-man-damit-entwickeln">Was kann man damit entwickeln?</h2>
<ul>
<li>Debugger</li>
<li>JIT-Systeme (virtuelle Maschine)</li>
<li>AOT-Compiler</li>
<li>virtuelle Maschinen</li>
<li>Optimierer</li>
<li>Systeme zur statischen Analyse</li>
<li>etc.</li>
</ul>
<p>mit entkoppelten Komponenten, die über APIs kommunizieren (Modularität)</p>
<h2 id="wie-arbeitet-man-damit">Wie arbeitet man damit?</h2>
<ul>
<li>(mit Generatoren) ein Frontend entwickeln, das Programme über einen AST in
LLVM IR übersetzt</li>
<li>mit LLVM den Zwischencode optimieren</li>
<li>mit LLVM Maschinencode oder VM-Code generieren</li>
</ul>
<h2 id="was-bringt-uns-das">Was bringt uns das?</h2>
<p><em>n</em> Sprachen für <em>m</em> Architekturen übersetzen:</p>
<ul>
<li><em>n</em> Frontends entwickeln</li>
<li>Optimierungen spezifizieren</li>
<li><em>m</em> Codegeneratoren spezifizieren</li>
</ul>
<p>statt <em>n x m</em> Compiler zu schreiben.</p>
<h2 id="wer-setzt-llvm-ein">Wer setzt LLVM ein?</h2>
<p>Adobe      AMD      Apple      ARM      Google</p>
<p>IBM        Intel        Mozilla      Nvidia      Qualcomm</p>
<p>Samsung       ...</p>
<h2 id="externe-llvm-projekte">Externe LLVM-Projekte</h2>
<p>Für folgende Sprachen gibt es Compiler oder Anbindungen an LLVM (neben Clang):</p>
<p>Crack      Go     Haskell      Java      Julia      Kotlin</p>
<p>Lua      Numba      Python     Ruby      Rust      Swift      ...</p>
<p>Für weitere Projekte siehe <a href="https://llvm.org/ProjectsWithLLVM/" rel="external" target="_blank">Projects built with LLVM</a></p>
<h2 id="unterstützte-prozessorarchitekturen">Unterstützte Prozessorarchitekturen</h2>
<p>x86      AMD64      PowerPC      PowerPC 64Bit      Thumb</p>
<p>SPARC      Alpha      CellSPU      PIC16      MIPS</p>
<p>MSP430     System z      XMOS      Xcore      ...</p>
<h1 id="einige-komponenten-von-llvm">Einige Komponenten von LLVM</h1>
<h2 id="einige-komponenten-projekte-von-llvm">Einige Komponenten (Projekte) von LLVM</h2>
<ul>
<li>Der LLVM-Kern incl. Optimierer</li>
<li>MLIR für IR-Dialekte</li>
<li>Der Compiler Clang</li>
<li>Die Compiler-Runtime-Bibliothek</li>
</ul>
<h2 id="der-llvm-kern">Der LLVM-Kern</h2>
<p><strong>LLVM Core</strong>: Optimierer und Codegenerator für viele CPU- und auch GPU-Architekturen</p>
<ul>
<li>Optimierer arbeitet unabhängig von der Zielarchitektur (nur auf der LLVM IR)</li>
<li>sehr gut dokumentiert</li>
<li>verwendete Optimierungspässe fein konfigurierbar</li>
<li>Optimierer auch einzeln als Tool <code>opt</code> aufrufbar</li>
<li>wird für eigene Sprachen als Optimierer und Codegenerator eingesetzt</li>
</ul>
<h2 id="wozu-ein-optimierer">Wozu ein Optimierer?</h2>
<ul>
<li>zur Reduzierung der Codegröße</li>
<li>zur Generierung von möglichst schnellem Code</li>
<li>Zur Generierung von Code, der möglichst wenig Energie verbraucht</li>
</ul>
<h1 id="allgegenwärtig-in-llvm-der-optimierer">Allgegenwärtig in LLVM: Der Optimierer</h1>
<h2 id="der-optimierer-in-llvm">Der Optimierer in LLVM</h2>
<ul>
<li>Teil von LLVM Core</li>
<li>kann zur Compilezeit, Linkzeit und Laufzeit eingesetzt werden</li>
<li>nutzt auch Leerlaufzeit des Prozessors</li>
<li>läuft in einzelnen unabhängig konfigurierbaren Pässen über den Code</li>
</ul>
<h2 id="einige-optimierungen-in-llvm">Einige Optimierungen in LLVM</h2>
<ul>
<li>Dead Code Elimination</li>
<li>Aggressive Dead Code Elimination</li>
<li>Dead Argument Elimination</li>
<li>Dead Type Elimination</li>
<li>Dead Instruction Elimination</li>
<li>Dead Store Elimination</li>
<li>Dead Global Elimination</li>
</ul>
<h2 id="mlir">MLIR</h2>
<ul>
<li>Framework zur Definition eigener Zwischensprachendialekte</li>
<li>zur high-level Darstellung spezieller Eigenschaften der zu übersetzenden Sprache</li>
<li>erleichtert die Umsetzung des AST in Zwischencode</li>
<li>z.  B. für domänenspezifische Sprachen (DSLs)</li>
<li>z.  B. für bestimmte Hardware</li>
<li>mehrere Abstraktionen gleichzeitig benutzbar</li>
</ul>
<h2 id="der-compiler-clang">Der Compiler Clang</h2>
<p><strong>Clang</strong>: schneller C/C++/Objective-C - Compiler auf Basis von LLVM mit aussagekräftigen
Fehlermeldungen und Warnungen</p>
<p><a href="#R-image-84377ad337f9662bd5461a2a709b275a" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/llvm-ir/opt_chain.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-84377ad337f9662bd5461a2a709b275a"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/04-intermediate/llvm-ir/opt_chain.png?width=auto&height=auto"></a></p>
<h2 id="die-sanitizer-in-der-compiler-runtime-bibliothek">Die Sanitizer in der Compiler-Runtime-Bibliothek</h2>
<p>Sanitizer: Methoden zur Instrumentierung (Code der in das kompilierte Programm eingebettet wird) zur Erleichterung der Lokalisierung und Analyse verschiedenster Fehlerquellen, z. B.:</p>
<ul>
<li>Speicherfehler und Speicherlecks (z. B. use-after-free)</li>
<li>Race Conditions</li>
<li>undefiniertes Verhalten (Overflows, Benutzung von Null-Pointern)</li>
<li>Benutzung von nicht-initialisierten Variablen</li>
</ul>
<h1 id="wrap-up">Wrap-Up</h1>
<p>LLVM ist eine (fast) komplette Infrastruktur zur Entwicklung von Compilern
und compilerähnlichen Programmen.</p>
<p>Die wichtigsten Bestandteile:</p>
<ul>
<li>der Zwischencode LLVM IR</li>
<li>der LLVM Optimierer</li>
<li>der Codegenarator mit Sanitizern</li>
</ul>


    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_LLVM-doc'>[LLVM-doc] <a href='https://releases.llvm.org/9.0.0/docs/index.html#' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The LLVM Compiler Infrastructure - Documentation</strong></a><br>LLVM-Project, 2022.</li> <li id='id_LLVM-org'>[LLVM-org] <a href='https://llvm.org/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>The LLVM Compiler Infrastructure</strong></a><br>LLVM-Project, 2022.</li></ul>
  </div>
</div>



    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Konzept von LLVM</li> <li>(K1) Module von LLVM</li> <li>(K1) SSA</li></ul>
  </div>
</div>



    







<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="interpreter">Interpreter</h1>

<p>Ein Interpreter erzeugt keinen Code, sondern führt Source-Code (interaktiv) aus. Die einfachste
Möglichkeit ist der Einsatz von attributierten Grammatiken, wo der Code bereits beim Parsen
ausgeführt wird (&quot;syntaxgesteuerte Interpretation&quot;). Mehr Möglichkeiten hat man dagegen bei der
Traversierung des AST, beispielsweise mit dem Visitor-Pattern. Auch die Abarbeitung von Bytecode
in einer Virtuellen Maschine (VM) zählt zur Interpretation.</p>
<p>(Register- und Stack-basierte Interpreter betrachten wir im Rahmen der Veranstaltung aktuell nicht.)</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1.html">AST-basierte Interpreter: Basics</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2.html">AST-basierte Interpreter: Funktionen und Klassen</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Interpreter</h1>
<article class="default">
<h1>AST-basierte Interpreter: Basics</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Ein AST-basierter Interpreter besteht oft aus einem &quot;Visitor-Dispatcher&quot;: Man traversiert
mit einer <code>eval()</code>-Funktion den AST und ruft je nach Knotentyp die passende Funktion auf.
Dabei werden bei Ausdrücken (<em>Expressions</em>) Werte berechnet und zurückgegeben, d.h. hier
hat man einen Rückgabewert und ein entsprechendes <code>return</code> im <code>switch</code>/<code>case</code>, während man
bei Anweisungen (<em>Statements</em>) keinen Rückgabewert hat.</p>
<p>Der Wert von Literalen ergibt sich direkt durch die Übersetzung des jeweiligen Werts in den
passenden Typ der Implementierungssprache. Bei Ausdrücken interpretiert zunächst die Teilausdrücke
durch den Aufruf von <code>eval()</code> für die jeweiligen AST-Kindknoten und berechnet daraus das
gewünschte Ergebnis.</p>
<p>Für Blöcke und Variablen muss man analog zum Aufbau von Symboltabellen wieder Scopes
berücksichtigen, d.h. man benötigt Strukturen ähnlich zu den Symboltabellen (hier &quot;Umgebung&quot;
(<em>Environment</em>) genannt). Es gibt eine globale Umgebung, und mit dem Betreten eines neuen
Blocks wird eine neue Umgebung aufgemacht, deren Eltern-Umgebung die bisherige Umgebung ist.</p>
<p>Zu jedem Namen kann man in einer Umgebung einen Wert definieren bzw. abrufen. Dabei muss man
je nach Semantik der zu interpretierenden Sprache unterscheiden zwischen der &quot;Definition&quot; und
der &quot;Zuweisung&quot; einer Variablen: Die Definition erfolgt i.d.R. in der aktuellen Umgebung, bei
der Zuweisung sucht man ausgehend von der aktuellen Umgebung bis hoch zur globalen Umgebung
nach dem ersten Vorkommen der Variablen und setzt den Wert in der gefundenen Umgebung. Bei
Sprachen, die Variablen beim ersten Zugriff definieren, muss man dieses Verhalten entsprechend
anpassen.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/lupQ0f3Tp7A' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL AST-basierte Interpreter (Basics)</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/18b6c77bbd5ecc90730df421e3ed175ae4670f56dd8b1a7bdd517066a2b1e7669e074c8f473e88f7f6073f2bd25092ceca16eee95953412a7f9fa5597a7acd9a' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL AST-basierte Interpreter (Basics)</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Traversierung von Parse-Trees und Implementierung von Aktionen mit Hilfe des Visitor-Patterns</li> <li>(K3) Interpreter müssen Namen und Werte speichern: Environment-Strukturen analog zu den Symboltabellen</li> <li>(K3) Code-Ausführung im Interpreter durch eine Read-Eval-Schleife: Implementierung mit einem Visitor</li></ul>
  </div>
</div>




    <h2 id="aufgaben-im-interpreter">Aufgaben im Interpreter</h2>
<p>Im Allgemeinen reichen einfache syntaxgesteuerte Interpreter nicht aus. Normalerweise simuliert
ein Interpreter die Ausführung eines Programms durch den Computer. D.h. der Interpreter muss
über die entsprechenden Eigenschaften verfügen: Prozessor, Code-Speicher, Datenspeicher, Stack ...</p>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> y<span style="color:#f92672">+</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#a6e22e">f</span>(x);</span></span></code></pre></div>
</div>
<div class='column'>
<ul>
<li>
<p>Aufbauen des AST ... =&gt; Lexer+Parser</p>
</li>
<li>
<p>Auflösen von Symbolen/Namen ... =&gt; Symboltabellen, Resolving</p>
</li>
<li>
<p>Type-Checking und -Inference ... =&gt; Semantische Analyse (auf Symboltabellen)</p>
</li>
<li>
<p>Speichern von Daten: Name+Wert vs. Adresse+Wert (Erinnerung: Data-Segment und Stack im virtuellen Speicher)</p>
</li>
<li>
<p>Ausführen von Anweisungen Text-Segment im virtuellen Speicher; hier über den AST</p>
</li>
<li>
<p>Aufruf von Funktionen und Methoden Kontextwechsel nötig: Was ist von wo aus sichtbar?</p>
</li>
</ul>
</div>
</div>
<h2 id="ast-basierte-interpreter-visitor-dispatcher">AST-basierte Interpreter: Visitor-Dispatcher</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">eval</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>   t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>BLOCK  : block(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>ASSIGN : assign(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>RETURN : ret(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>IF     : ifstat(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>CALL   : <span style="color:#66d9ef">return</span> call(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>ADD    : <span style="color:#66d9ef">return</span> add(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>MUL    : <span style="color:#66d9ef">return</span> mul(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>INT    : <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span>parseInt(t<span style="color:#f92672">.</span>getText())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>ID     : <span style="color:#66d9ef">return</span> load(t)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> : <span style="color:#f92672">...</span>  <span style="color:#75715e"># catch unhandled node types</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>;</span></span></code></pre></div>
<p>Nach dem Aufbau des AST durch Scanner und Parser und der semantischen Analyse
anhand der Symboltabellen müssen die Ausdrücke (<em>expressions</em>) und Anweisungen
(<em>statements</em>) durch den Interpreter ausgewertet werden. Eine Möglichkeit dazu
ist das Traversieren des AST mit dem Visitor-Pattern. Basierend auf dem Typ
des aktuell betrachteten AST-Knotens wird entschieden, wie damit umgegangen
werden soll. Dies erinnert an den Aufbau der Symboltabellen ...</p>
<p>Die <code>eval()</code>-Methode bildet das Kernstück des (AST-traversierenden) Interpreters.
Hier wird passend zum aktuellen AST-Knoten die passende Methode des Interpreters
aufgerufen.</p>
<p><strong>Hinweis</strong>: Im obigen Beispiel wird nicht zwischen der Auswertung von
Ausdrücken und Anweisungen unterschieden, es wird die selbe Methode <code>eval()</code>
genutzt. Allerdings liefern Ausdrücke einen Wert zurück (erkennbar am <code>return</code>
im jeweiligen <code>switch/case</code>-Zweig), während Anweisungen keinen Wert liefern.</p>
<p>In den folgenden Beispielen wird davon ausgegangen, dass ein komplettes
Programm eingelesen, geparst, vorverarbeitet und dann interpretiert wird.</p>
<p>Für einen interaktiven Interpreter würde man in einer Schleife die Eingaben
lesen, parsen und vorverarbeiten und dann interpretieren. Dabei würde jeweils
der AST und die Symboltabelle <em>ergänzt</em>, damit die neuen Eingaben auf frühere
verarbeitete Eingaben zurückgreifen können. Durch die Form der Schleife
&quot;Einlesen -- Verarbeiten -- Auswerten&quot; hat sich auch der Name &quot;<em>Read-Eval-Loop</em>&quot;
bzw. &quot;<em>Read-Eval-Print-Loop</em>&quot; (<strong>REPL</strong>) eingebürgert.</p>
<h2 id="auswertung-von-literalen-und-ausdrücken">Auswertung von Literalen und Ausdrücken</h2>
<ul>
<li>
<p>Typen mappen: Zielsprache =&gt; Implementierungssprache</p>
<p>Die in der Zielsprache verwendeten (primitiven) Typen müssen
auf passende Typen der Sprache, in der der Interpreter selbst
implementiert ist, abgebildet werden.</p>
<p>Beispielsweise könnte man den Typ <code>nil</code> der Zielsprache auf den
Typ <code>null</code> des in Java implementierten Interpreters abbilden, oder
den Typ <code>number</code> der Zielsprache auf den Typ <code>Double</code> in Java
mappen.</p>
</li>
<li>
<p>Literale auswerten:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>INT: [0-9]<span style="color:#f92672">+</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> t<span style="color:#f92672">.</span>type <span style="color:#f92672">==</span> Parser<span style="color:#f92672">.</span>INT : <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span>parseInt(t<span style="color:#f92672">.</span>getText())</span></span></code></pre></div>
<p>Das ist der einfachste Teil ... Die primitiven Typen der
Zielsprache, für die es meist ein eigenes Token gibt, müssen
als Datentyp der Interpreter-Programmiersprache ausgewertet
werden.</p>
</li>
<li>
<p>Ausdrücke auswerten:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>add: e1<span style="color:#f92672">=</span>expr <span style="color:#e6db74">&#34;+&#34;</span> e2<span style="color:#f92672">=</span>expr ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add</span>(self, AST t):
</span></span><span style="display:flex;"><span>    lhs <span style="color:#f92672">=</span> eval(t<span style="color:#f92672">.</span>e1())
</span></span><span style="display:flex;"><span>    rhs <span style="color:#f92672">=</span> eval(t<span style="color:#f92672">.</span>e2())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (double)lhs <span style="color:#f92672">+</span> (double)rhs  <span style="color:#75715e"># Semantik!</span></span></span></code></pre></div>
<p>Die meisten möglichen Fehlerzustände sind bereits durch den Parser
und bei der semantischen Analyse abgefangen worden. Falls zur Laufzeit
die Auswertung der beiden Summanden keine Zahl ergibt, würde eine
Java-Exception geworfen, die man an geeigneter Stelle fangen und
behandeln muss. Der Interpreter soll sich ja nicht mit einem Stack-Trace
verabschieden, sondern soll eine Fehlermeldung präsentieren und danach
normal weiter machen ...</p>
</li>
</ul>
<h2 id="kontrollstrukturen">Kontrollstrukturen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>ifstat: <span style="color:#e6db74">&#39;if&#39;</span> expr <span style="color:#e6db74">&#39;then&#39;</span> s1<span style="color:#f92672">=</span>stat <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;else&#39;</span> s2<span style="color:#f92672">=</span>stat<span style="color:#f92672">)?</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ifstat</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> eval(t<span style="color:#f92672">.</span>expr()): eval(t<span style="color:#f92672">.</span>s1())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> t<span style="color:#f92672">.</span>s2(): eval(t<span style="color:#f92672">.</span>s2())</span></span></code></pre></div>
<p>Analog können die anderen bekannten Kontrollstrukturen umgesetzt werden,
etwa <code>switch/case</code>, <code>while</code> oder <code>for</code>.</p>
<p>Dabei können erste Optimierungen vorgenommen werden: Beispielsweise könnten
<code>for</code>-Schleifen im Interpreter in <code>while</code>-Schleifen transformiert werden,
wodurch im Interpreter nur ein Schleifenkonstrukt implementiert werden
müsste.</p>
<h2 id="zustände-auswerten-von-anweisungen">Zustände: Auswerten von Anweisungen</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> y;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    { <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> x; }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-f8f34d50c4889a171434d5a7ffb41167" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1/nested_envs.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f8f34d50c4889a171434d5a7ffb41167"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part1/nested_envs.png?width=auto&height=auto"></a></p>
</div>
</div>
<p>Das erinnert nicht nur zufällig an den Aufbau der Symboltabellen :-)</p>
<p>Und so lange es nur um Variablen ginge, könnte man die Symboltabellen für das
Speichern der Werte nutzen. Allerdings müssen wir noch Funktionen und Strukturen
bzw. Klassen realisieren, und spätestens dann kann man die Symboltabelle nicht
mehr zum Speichern von Werten einsetzen. Also lohnt es sich, direkt neue
Strukturen für das Halten von Variablen und Werten aufzubauen.</p>
<h2 id="detail-felder-im-interpreter">Detail: Felder im Interpreter</h2>
<p>Eine mögliche Implementierung für einen Interpreter basierend auf einem
ANTLR-Visitor ist nachfolgend gezeigt.</p>
<p><strong>Hinweis</strong>: Bei der Ableitung des <code>BaseVisitor&lt;T&gt;</code> muss der Typ <code>T</code>
festgelegt werden. Dieser fungiert als Rückgabetyp für die Visitor-Methoden.
Entsprechend können alle Methoden nur einen gemeinsamen (Ober-) Typ zurückliefern,
weshalb man sich an der Stelle oft mit <code>Object</code> behilft und dann manuell
den konkreten Typ abfragen und korrekt casten muss.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Interpreter</span>(BaseVisitor<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span>):
</span></span><span style="display:flex;"><span>    __init__(self, AST t):
</span></span><span style="display:flex;"><span>        BaseVisitor<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;.</span>__init__(self)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>root <span style="color:#f92672">=</span> t
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>env <span style="color:#f92672">=</span> Environment()</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/Interpreter.java#L21" rel="external" target="_blank">Interpreter.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<h2 id="ausführen-einer-variablendeklaration">Ausführen einer Variablendeklaration</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>varDecl: <span style="color:#e6db74">&#34;var&#34;</span> <span style="color:#66d9ef">ID</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;=&#34;</span> expr<span style="color:#f92672">)?</span> <span style="color:#e6db74">&#34;;&#34;</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">varDecl</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># deklarierte Variable (String)</span>
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    value <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>;  <span style="color:#75715e"># TODO: Typ der Variablen beachten (Defaultwert)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> t<span style="color:#f92672">.</span>expr(): value <span style="color:#f92672">=</span> eval(t<span style="color:#f92672">.</span>expr())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>define(name, value)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span></span></span></code></pre></div>
<p>Wenn wir bei der Traversierung des AST mit <code>eval()</code> bei einer Variablendeklaration
vorbeikommen, also etwa <code>int x;</code> oder <code>int x = wuppie + fluppie;</code>, dann wird im
<strong>aktuellen</strong> Environment der String &quot;x&quot; sowie der Wert (im zweiten Fall) eingetragen.</p>
<h2 id="ausführen-einer-zuweisung">Ausführen einer Zuweisung</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>assign: <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#34;=&#34;</span> expr;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">assign</span>(self, AST t):
</span></span><span style="display:flex;"><span>    lhs <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()
</span></span><span style="display:flex;"><span>    value <span style="color:#f92672">=</span> eval(t<span style="color:#f92672">.</span>expr())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>assign(lhs, value)  <span style="color:#75715e"># Semantik!</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Environment</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">assign</span>(self, String n, Object v):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>values[n]: self<span style="color:#f92672">.</span>values[n] <span style="color:#f92672">=</span> v
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> self<span style="color:#f92672">.</span>enclosing: self<span style="color:#f92672">.</span>enclosing<span style="color:#f92672">.</span>assign(n, v)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>: <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">RuntimeError</span>(n, <span style="color:#e6db74">&#34;undefined variable&#34;</span>)</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/Environment.java#L38" rel="external" target="_blank">Environment.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Wenn wir bei der Traversierung des AST mit <code>eval()</code> bei einer Zuweisung
vorbeikommen, also etwa <code>x = 7;</code> oder <code>x = wuppie + fluppie;</code>, dann wird
zunächst im aktuellen Environment die rechte Seite der Zuweisung ausgewertet
(Aufruf von <code>eval()</code>). Anschließend wird der Wert für die Variable im
Environment eingetragen: Entweder sie wurde im aktuellen Environment früher
bereits definiert, dann wird der neue Wert hier eingetragen. Ansonsten wird
entlang der Verschachtelungshierarchie gesucht und entsprechend eingetragen.
Falls die Variable nicht gefunden werden kann, wird eine Exception ausgelöst.</p>
<p>An dieser Stelle kann man über die Methode <code>assign</code> in der Klasse <code>Environment</code>
dafür sorgen, dass nur bereits deklarierte Variablen zugewiesen werden dürfen.
Wenn man stattdessen wie etwa in Python das implizite Erzeugen neuer
Variablen erlaubten möchte, würde man statt <code>Environment#assign</code> einfach
<code>Environment#define</code> nutzen ...</p>
<p><em>Anmerkung</em>: Der gezeigte Code funktioniert nur für normale Variablen, nicht
für Zugriffe auf Attribute einer Struct oder Klasse!</p>
<h2 id="blöcke-umgang-mit-verschachtelten-environments">Blöcke: Umgang mit verschachtelten Environments</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>block:  <span style="color:#e6db74">&#39;{&#39;</span> stat<span style="color:#f92672">*</span> <span style="color:#e6db74">&#39;}&#39;</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">block</span>(self, AST t):
</span></span><span style="display:flex;"><span>    prev <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>env
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>env <span style="color:#f92672">=</span> Environment(self<span style="color:#f92672">.</span>env)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> s <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>stat(): eval(s)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>: self<span style="color:#f92672">.</span>env <span style="color:#f92672">=</span> prev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>;</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/Interpreter.java#L92" rel="external" target="_blank">Interpreter.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Beim Interpretieren von Blöcken muss man einfach nur eine weitere
Verschachtelungsebene für die Environments anlegen und darin dann
die Anweisungen eines Blockes auswerten ...</p>
<p><strong>Wichtig</strong>: Egal, was beim Auswerten der Anweisungen in einem Block
passiert: Es muss am Ende die ursprüngliche Umgebung wieder hergestellt
werden (<code>finally</code>-Block).</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Interpreter simulieren die Programmausführung</p>
<ul>
<li>Namen und Symbole auflösen</li>
<li>Speicherbereiche simulieren</li>
<li>Code ausführen: Read-Eval-Loop</li>
</ul>
</li>
<li>
<p>Traversierung des AST: <code>eval(AST t)</code> als Visitor-Dispatcher</p>
</li>
<li>
<p>Scopes mit <code>Environment</code> (analog zu Symboltabellen)</p>
</li>
<li>
<p>Interpretation von Blöcken und Variablen (Deklaration, Zuweisung)</p>
</li>
</ul>


    



    



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 03: ANTLR</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 6</em></li> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 4</em></li> <li id='id_Nystrom2021'>[Nystrom2021] <a href='https://github.com/munificent/craftinginterpreters' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Crafting Interpreters</strong></a><br>Nystrom, R., Genever Benning, 2021. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-0-9905829-3-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-0-9905829-3-9</a>.<br><em>Kapitel Kapitel: A Tree-Walk Interpreter, insb. 8. Statements and State</em></li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>AST-basierte Interpreter: Funktionen und Klassen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Üblicherweise können Funktionen auf die Umgebung zurückgreifen, in der die Definition der
Funktion erfolgt ist (<a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)" rel="external" target="_blank">&quot;<strong>Closure</strong>&quot;</a>).
Deshalb wird beim Interpretieren einer Funktionsdefinition der jeweilige AST-Knoten (mit
dem Block des Funktionskörpers) und die aktuelle Umgebung in einer Struktur zusammengefasst.
Zusätzlich muss in der aktuellen Umgebung der Name der Funktion zusammen mit der eben erzeugten
Struktur (&quot;Funktionsobjekt&quot;) als Wert definiert werden.</p>
<p>Beim Funktionsaufruf löst man den Funktionsnamen in der aktuellen Umgebung auf und erhält
das Funktionsobjekt mit dem AST der Funktion und der Closure. Die Funktionsparameter werden
ebenfalls in der aktuellen Umgebung aufgelöst (Aufruf von <code>eval()</code> für die AST-Kindknoten
des Funktionsaufrufs). Zur Interpretation der Funktion legt man sich eine neue Umgebung an,
deren Eltern-Umgebung die Closure der Funktion ist, definiert die Funktionsparameter (Name
und eben ermittelter Wert) in dieser neuen Umgebung und interpretiert dann den AST-Kindknoten
des Funktionsblocks in dieser neuen Umgebung. Für den Rückgabewert muss man ein wenig tricksen:
Ein Block hat normalerweise keinen Wert. Eine Möglichkeit wäre, bei der Interpretation eines
<code>return</code>-Statements eine Exception mit dem Wert des Ausdruck hinter dem &quot;<code>return</code>&quot; zu werfen
und im <code>eval()</code> des Funktionsblock zu fangen.</p>
<p>Für Klassen kann man analog verfahren. Methoden sind zunächst einfach Funktionen, die in einem
Klassenobjekt gesammelt werden. Das Erzeugen einer Instanz einer Klasse ist die Interpretation
eines &quot;Aufrufs&quot; der Klasse (analog zum Aufruf einer Funktion): Dabei wird ein spezielles
Instanzobjekt erzeugt, welches auf die Klasse verweist und welches die Werte der Attribute hält.
Beim Aufruf von Methoden auf einem Instanzobjekt wird der Name der Funktion über das Klassenobjekt
aufgelöst, eine neue Umgebung erzeugt mit der Closure der Funktion als Eltern-Umgebung und das
Instanzobjekt wird in dieser Umgebung definiert als &quot;<code>this</code>&quot; oder &quot;<code>self</code>&quot;. Anschließend wird
ein neues Funktionsobjekt mit der eben erzeugten Umgebung und dem Funktions-AST erzeugt und
zurückgeliefert. Dieses neue Funktionsobjekt wird dann wie eine normale Funktion aufgerufen
(interpretiert, s.o.). Der Zugriff in der Methode auf die Attribute der Klasse erfolgt dann
über <code>this</code> bzw. <code>self</code>, welche in der Closure der Funktion nun definiert sind und auf das
Instanzobjekt mit den Attributen verweisen.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/LTqk7ifB-V0' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL AST-basierte Interpreter (Funktionen, Klassen)</a></li></ul>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (HSBI-Medienportal)
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/medienportal/m/725097f1ce3ef3f10dd1d31674e1b18e89e8b58af259705080b78ccba9dd319d7be76884549c9c59e02fde9e1a2a91ae5aa3a6d44a8e200a2323e08e217faa14' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL AST-basierte Interpreter (Funktionen, Klassen)</a></li></ul>
  </div>
</div>




    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K3) Traversierung von Parse-Trees und Implementierung von Aktionen mit Hilfe des Visitor-Patterns</li> <li>(K3) Interpreter müssen Namen und Werte speichern: Environment-Strukturen analog zu den Symboltabellen</li> <li>(K3) Code-Ausführung im Interpreter durch eine Read-Eval-Schleife: Implementierung mit einem Visitor</li></ul>
  </div>
</div>




    <h2 id="funktionen">Funktionen</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b, <span style="color:#66d9ef">int</span> c) {
</span></span><span style="display:flex;"><span>    print a <span style="color:#f92672">+</span> b <span style="color:#f92672">+</span> c;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>foo(1, 2, 3);</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">makeCounter</span>():
</span></span><span style="display:flex;"><span>    var i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">count</span>():
</span></span><span style="display:flex;"><span>        i <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        print i
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> count;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>counter <span style="color:#f92672">=</span> makeCounter()
</span></span><span style="display:flex;"><span>counter()   <span style="color:#75715e"># &#34;1&#34;</span>
</span></span><span style="display:flex;"><span>counter()   <span style="color:#75715e"># &#34;2&#34;</span></span></span></code></pre></div>
</div>
</div>
<p>Die Funktionsdeklaration muss im aktuellen Kontext abgelegt werden,
dazu wird der AST-Teilbaum der Deklaration benötigt.</p>
<p>Beim Aufruf muss man das Funktionssymbol im aktuellen Kontext
suchen, die Argumente auswerten, einen neuen lokalen Kontext
anlegen und darin die Parameter definieren (mit den eben ausgewerteten
Werten) und anschließend den AST-Teilbaum des Funktionskörpers im
Interpreter mit <code>eval()</code> auswerten ...</p>
<h2 id="ausführen-einer-funktionsdeklaration">Ausführen einer Funktionsdeklaration</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>funcDecl : type <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> params<span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;)&#39;</span> block ;
</span></span><span style="display:flex;"><span>funcCall : <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> exprList<span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;)&#39;</span> ;</span></span></code></pre></div>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">funcDecl</span>(self, AST t):
</span></span><span style="display:flex;"><span>    fn <span style="color:#f92672">=</span> Fun(t, self<span style="color:#f92672">.</span>env)
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>define(t<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText(), fn)</span></span></code></pre></div>
</div>
<div class='column'>
<p><a href="#R-image-a99027ae8721aa1d6e6d8ee501ceac53" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2/fun.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a99027ae8721aa1d6e6d8ee501ceac53"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2/fun.png?width=auto&height=auto"></a></p>
</div>
</div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxFunction.java#L6" rel="external" target="_blank">LoxFunction.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Man definiert im aktuellen Environment den Funktionsnamen und hält dazu
den aktuellen Kontext (aktuelles Environment) sowie den AST-Knoten mit
der eigentlichen Funktionsdefinition fest.</p>
<p>Für <em>Closures</em> ist der aktuelle Kontext wichtig, sobald man die
Funktion ausführen muss. In <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2.html#id_Parr2010">[Parr2010, S.236]</a> wird beispielsweise
einfach nur ein neuer Memory-Space (entspricht ungefähr hier einem
neuen lokalen Environment) angelegt, in dem die im Funktionskörper
definierten Symbole angelegt werden. Die Suche nach Symbolen erfolgt
dort nur im Memory-Space (Environment) der Funktion bzw. im globalen
Scope (Environment).</p>
<h2 id="ausführen-eines-funktionsaufrufs">Ausführen eines Funktionsaufrufs</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>funcDecl : type <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> params<span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;)&#39;</span> block ;
</span></span><span style="display:flex;"><span>funcCall : <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#39;(&#39;</span> exprList<span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;)&#39;</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">funcCall</span>(self, AST t):
</span></span><span style="display:flex;"><span>    fn <span style="color:#f92672">=</span> (Fun)eval(t<span style="color:#f92672">.</span>ID())
</span></span><span style="display:flex;"><span>    args <span style="color:#f92672">=</span> [eval(a)  <span style="color:#66d9ef">for</span> a <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>exprList()]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    prev <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>env;  self<span style="color:#f92672">.</span>env <span style="color:#f92672">=</span> Environment(fn<span style="color:#f92672">.</span>closure)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(args<span style="color:#f92672">.</span>size()):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>define(fn<span style="color:#f92672">.</span>decl<span style="color:#f92672">.</span>params()[i]<span style="color:#f92672">.</span>getText(), args[i])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    eval(fn<span style="color:#f92672">.</span>decl<span style="color:#f92672">.</span>block())
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>env <span style="color:#f92672">=</span> prev</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxFunction.java#L57" rel="external" target="_blank">LoxFunction.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Zunächst wird die <code>ID</code> im aktuellen Kontext ausgewertet. In der obigen Grammatik
ist dies tatsächlich nur ein Funktionsname, aber man könnte über diesen Mechanismus
auch Ausdrücke erlauben und damit Funktionspointer bzw. Funktionsreferenzen
realisieren ... Im Ergebnis hat man das Funktionsobjekt mit dem zugehörigen AST-Knoten
und dem Kontext zur Deklarationszeit.</p>
<p>Die Argumente der Funktion werden nacheinander ebenfalls im aktuellen Kontext
ausgewertet.</p>
<p>Um den Funktionsblock auszuwerten, legt man einen neuen temporären Kontext über
dem Closure-Kontext der Funktion an und definiert darin die Parameter der Funktion
samt den aktuellen Werten. Dann lässt man den Interpreter über den Visitor-Dispatch
den Funktionskörper evaluieren und schaltet wieder auf den Kontext vor der
Funktionsauswertung zurück.</p>
<h2 id="funktionsaufruf-rückgabewerte">Funktionsaufruf: Rückgabewerte</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">funcCall</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    eval(fn<span style="color:#f92672">.</span>decl<span style="color:#f92672">.</span>block())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">None</span>  <span style="color:#75715e"># (Wirkung)</span></span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ReturnEx</span>(RuntimeException):
</span></span><span style="display:flex;"><span>    __init__(self, v): self<span style="color:#f92672">.</span>value <span style="color:#f92672">=</span> v
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">return</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> ReturnEx(eval(t<span style="color:#f92672">.</span>expr()))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">funcCall</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    erg <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>: eval(fn<span style="color:#f92672">.</span>decl<span style="color:#f92672">.</span>block())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> ReturnEx <span style="color:#66d9ef">as</span> r: erg <span style="color:#f92672">=</span> r<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> erg;</span></span></code></pre></div>
</div>
</div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/Return.java#L4" rel="external" target="_blank">Return.java</a> und <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxFunction.java#L74" rel="external" target="_blank">LoxFunction.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Rückgabewerte für den Funktionsaufruf werden innerhalb von <code>block</code> berechnet,
wo eine Reihe von Anweisungen interpretiert werden, weshalb <code>block</code> ursprünglich
keinen Rückgabewert hat. Im Prinzip könnte man <code>block</code> etwas zurück geben lassen,
was durch die möglicherweise tiefe Rekursion relativ umständlich werden kann.</p>
<p>An dieser Stelle kann man den Exceptions-Mechanismus <strong>missbrauchen</strong> und bei
der Auswertung eines <code>return</code> mit dem Ergebniswert direkt zum Funktionsaufruf
zurück springen. In Methoden, wo man einen neuen lokalen Kontext anlegt und
die globale <code>env</code>-Variable temporär damit ersetzt, muss man dann ebenfalls
mit <code>try/catch</code> arbeiten und im <code>finally</code>-Block die Umgebung zurücksetzen und
die Exception erneut werfen.</p>
<h2 id="native-funktionen">Native Funktionen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Callable</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">call</span>(self, Interpreter i, List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> a): <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fun</span>(Callable): <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NativePrint</span>(Fun):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">call</span>(self, Interpreter i, List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> a):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> o <span style="color:#f92672">in</span> a: print a  <span style="color:#75715e"># nur zur Demo, hier sinnvoller Code :-)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Im Interpreter (Initialisierung):</span>
</span></span><span style="display:flex;"><span>self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>define(<span style="color:#e6db74">&#34;print&#34;</span>, NativePrint())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">funcCall</span>(self, AST t):
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    prev = self.env;  self.env = Environment(fn.closure)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    for i in range(args.size()): ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    eval(fn.decl.block()); self.env = prev</span>
</span></span><span style="display:flex;"><span>    fn<span style="color:#f92672">.</span>call(self, args)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span></span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxCallable.java#L6" rel="external" target="_blank">LoxCallable.java</a> und <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxFunction.java#L6" rel="external" target="_blank">LoxFunction.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Normalerweise wird beim Interpretieren eines Funktionsaufrufs der
Funktionskörper (repräsentiert durch den entsprechenden AST-Teilbaum)
durch einen rekursiven Aufruf von <code>eval</code> ausgewertet.</p>
<p>Für native Funktionen, die im Interpreter eingebettet sind, klappt
das nicht mehr, da hier kein AST vorliegt.</p>
<p>Man erstellt ein neues Interface <code>Callable</code> mit der Hauptmethode <code>call()</code>
und leitet die frühere Klasse <code>Fun</code> davon ab: <code>class Fun(Callable)</code>.
Die Methode <code>funcCall()</code> des Interpreters ruft nun statt der <code>eval()</code>-Methode
die <code>call()</code>-Methode des Funktionsobjekts auf und übergibt den Interpreter
(== Zustand) und die Argumente. Die <code>call()</code>-Methode der Klasse <code>Fun</code> muss
nun ihrerseits im Normalfall den im Funktionsobjekt referenzierten AST-Teilbaum
des Funktionskörpers mit dem Aufruf von <code>eval()</code> interpretieren ...</p>
<p><a href="#R-image-02dc266ba20cd88af3c6029f24647404" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2/callFun.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-02dc266ba20cd88af3c6029f24647404"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/06-interpretation/astdriven-part2/callFun.png?width=auto&height=auto"></a></p>
<p>Für die nativen Funktionen leitet man einfach eine (anonyme) Klasse
ab und speichert sie unter dem gewünschten Namen im globalen Kontext
des Interpreters. Die <code>call()</code>-Methode wird dann entsprechend der
gewünschten Funktion implementiert, d.h. hier erfolgt kein weiteres
Auswerten des AST.</p>
<h2 id="klassen-und-instanzen-i">Klassen und Instanzen I</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>classDef : <span style="color:#e6db74">&#34;class&#34;</span> <span style="color:#66d9ef">ID</span> <span style="color:#e6db74">&#34;{&#34;</span> funcDecl<span style="color:#f92672">*</span> <span style="color:#e6db74">&#34;}&#34;</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">classDef</span>(self, AST t):
</span></span><span style="display:flex;"><span>    methods <span style="color:#f92672">=</span> HashMap<span style="color:#f92672">&lt;</span>String, Fun<span style="color:#f92672">&gt;</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> m <span style="color:#f92672">in</span> t<span style="color:#f92672">.</span>funcDecl():
</span></span><span style="display:flex;"><span>        fn <span style="color:#f92672">=</span> Fun(m, self<span style="color:#f92672">.</span>env)
</span></span><span style="display:flex;"><span>        methods[m<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText()] <span style="color:#f92672">=</span> fn
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    clazz <span style="color:#f92672">=</span> Clazz(methods)
</span></span><span style="display:flex;"><span>    self<span style="color:#f92672">.</span>env<span style="color:#f92672">.</span>define(t<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText(), clazz)</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/Interpreter.java#L115" rel="external" target="_blank">Interpreter.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p><strong>Anmerkung</strong>: In dieser Darstellung wird der Einfachheit halber nur auf Methoden eingegangen.
Für Attribute müssten ähnliche Konstrukte implementiert werden.</p>
<h2 id="klassen-und-instanzen-ii">Klassen und Instanzen II</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Clazz</span>(Callable):
</span></span><span style="display:flex;"><span>    __init__(self, Map<span style="color:#f92672">&lt;</span>String, Fun<span style="color:#f92672">&gt;</span> methods):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>methods <span style="color:#f92672">=</span> methods
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">call</span>(self, Interpreter i, List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> a):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Instance(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">findMethod</span>(self, String name):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>methods[name]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Instance</span>:
</span></span><span style="display:flex;"><span>    __init__(self, Clazz clazz):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>clazz <span style="color:#f92672">=</span> clazz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get</span>(self, String name):
</span></span><span style="display:flex;"><span>        method <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>clazz<span style="color:#f92672">.</span>findMethod(name)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> method <span style="color:#f92672">!=</span> <span style="color:#66d9ef">None</span>: <span style="color:#66d9ef">return</span> method<span style="color:#f92672">.</span>bind(self)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">RuntimeError</span>(name, <span style="color:#e6db74">&#34;undefined method&#34;</span>)</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxClass.java#L11" rel="external" target="_blank">LoxClass.java</a> und <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxInstance.java#L7" rel="external" target="_blank">LoxInstance.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Instanzen einer Klasse werden durch den funktionsartigen &quot;Aufruf&quot; der Klassen
angelegt (parameterloser Konstruktor). Eine Instanz hält die Attribute (hier
nicht gezeigt) und eine Referenz auf die Klasse, um später an die Methoden
heranzukommen.</p>
<h2 id="zugriff-auf-methoden-und-attribute">Zugriff auf Methoden (und Attribute)</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-antlr" data-lang="antlr"><span style="display:flex;"><span>getExpr : obj <span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#66d9ef">ID</span> ;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getExpr</span>(self, AST t):
</span></span><span style="display:flex;"><span>    obj <span style="color:#f92672">=</span> eval(t<span style="color:#f92672">.</span>obj())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> isinstance(obj, Instance):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ((Instance)obj)<span style="color:#f92672">.</span>get(t<span style="color:#f92672">.</span>ID()<span style="color:#f92672">.</span>getText())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">RuntimeError</span>(t<span style="color:#f92672">.</span>obj()<span style="color:#f92672">.</span>getText(), <span style="color:#e6db74">&#34;no object&#34;</span>)</span></span></code></pre></div>
<p>Beim Zugriff auf Attribute muss das Objekt im aktuellen Kontext evaluiert
werden. Falls es eine Instanz von <code>Instance</code> ist, wird auf das Feld per
interner Hash-Map zugriffen; sonst Exception.</p>
<h2 id="methoden-und-this-oder-self">Methoden und <em>this</em> oder <em>self</em></h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fun</span>(Callable):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bind</span>(self, Instance i):
</span></span><span style="display:flex;"><span>        e <span style="color:#f92672">=</span> Environment(self<span style="color:#f92672">.</span>closure)
</span></span><span style="display:flex;"><span>        e<span style="color:#f92672">.</span>define(<span style="color:#e6db74">&#34;this&#34;</span>, i)
</span></span><span style="display:flex;"><span>        e<span style="color:#f92672">.</span>define(<span style="color:#e6db74">&#34;self&#34;</span>, i)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Fun(self<span style="color:#f92672">.</span>decl, e)</span></span></code></pre></div>
<p><span class='origin'>Quelle: Eigener Code basierend auf einer Idee nach <a href="https://github.com/munificent/craftinginterpreters/blob/master/java/com/craftinginterpreters/lox/LoxFunction.java#L31" rel="external" target="_blank">LoxFunction.java</a> by <a href="https://github.com/munificent" rel="external" target="_blank">Bob Nystrom</a> on Github.com (<a href="https://github.com/munificent/craftinginterpreters/blob/master/LICENSE" rel="external" target="_blank">MIT</a>)</span></p>
<p>Nach dem Interpretieren von Klassendefinitionen sind die Methoden in der Klasse
selbst gespeichert, wobei der jeweilige <code>closure</code> auf den Klassenkontext zeigt.</p>
<p>Beim Auflösen eines Methodenaufrufs wird die gefundene Methode an die
Instanz gebunden, d.h. es wird eine neue Funktion angelegt, deren <code>closure</code>
auf den Kontext der Instanz zeigt. Zusätzlich wird in diesem Kontext noch die
Variable &quot;<code>this</code>&quot; definiert, damit man damit auf die Instanz zugreifen kann.</p>
<p>In Python wird das in der Methodensignatur sichtbar: Der erste Parameter ist
eine Referenz auf die Instanz, auf der diese Methode ausgeführt werden soll ...</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Interpreter simulieren die Programmausführung</p>
<ul>
<li>Namen und Symbole auflösen</li>
<li>Speicherbereiche simulieren</li>
<li>Code ausführen: Read-Eval-Loop</li>
</ul>
</li>
<li>
<p>Traversierung des AST: <code>eval(AST t)</code> als Visitor-Dispatcher</p>
</li>
<li>
<p>Scopes mit <code>Environment</code> (analog zu Symboltabellen)</p>
</li>
<li>
<p>Interpretation von Funktionen (Deklaration/Aufruf, native Funktionen)</p>
</li>
<li>
<p>Interpretation von Klassen und Instanzen</p>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<ul>
<li>Wie interpretiert man Code?</li>
<li>Warum kann man die Werte nicht einfach in Symboltabellen ablegen?</li>
<li>Wie geht man mit Funktionen um? Warum? Kann man diese mehrfach aufrufen?</li>
<li>Wieso erzeugt man eine neue Environment mit der Closure in der Funktion?</li>
<li>Wie gehen native Funktionen?</li>
</ul>
<p>Betrachten Sie folgenden Code-Ausschnitt:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> y<span style="color:#f92672">+</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#a6e22e">f</span>(x);</span></span></code></pre></div>
<ol>
<li>Geben Sie den AST an.</li>
<li>Stellen Sie die Strukturen der Symboltabelle dar.</li>
<li>Stellen Sie die Strukturen im Interpreter dar.</li>
</ol>
  </div>
</div>



    




    
    
        
        
        

        
            
            
            
        
    
    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-laptop-code"></i> Übungsblätter/Aufgaben
  </div>
  <div class="box-content">
<ul> <li><a href='https://www.hsbi.de/elearning/data/FH-Bielefeld/lm_data/lm_1360443/homework/sheet03.html' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>Blatt 03: ANTLR</a></li></ul>
  </div>
</div>



    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
                    
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
                
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Grune2012'>[Grune2012] <strong>Modern Compiler Design</strong><br>Grune, D. und van, Reeuwijk, K. und Bal, H. E. und Jacobs, C. J. H. und Langendoen, K., Springer, 2012. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-4614-4698-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-4614-4698-9</a>.<br><em>Kapitel 6</em></li> <li id='id_Mogensen2017'>[Mogensen2017] <strong>Introduction to Compiler Design</strong><br>Mogensen, T., Springer, 2017. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-319-66966-3</a>. DOI <a href='https://doi.org/10.1007/978-3-319-66966-3' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>10.1007/978-3-319-66966-3</a>.<br><em>Kapitel 4</em></li> <li id='id_Nystrom2021'>[Nystrom2021] <a href='https://github.com/munificent/craftinginterpreters' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Crafting Interpreters</strong></a><br>Nystrom, R., Genever Benning, 2021. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-0-9905829-3-9' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-0-9905829-3-9</a>.<br><em>Kapitel Kapitel: A Tree-Walk Interpreter, insb. 10. Functions u. 12. Classes</em></li> <li id='id_Parr2010'>[Parr2010] <a href='https://learning.oreilly.com/library/view/language-implementation-patterns/9781680500097/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>Language Implementation Patterns</strong></a><br>Parr, T., Pragmatic Bookshelf, 2010. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-1-9343-5645-6' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-1-9343-5645-6</a>.</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="programmiersprachen-und--konzepte">Programmiersprachen und -konzepte</h1>

<p>Unterschiedliche Programmiersprachen weisen nicht nur verschiedene Syntaxelemente auf,
sondern haben eine teilweise stark unterschiedliche Semantik. Beides hat Auswirkungen
auf die Bausteine eines Compilers.</p>
<ul class="children children-li children-sort-">
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp0-basics.html">Einführung in C&#43;&#43; (Erinnerungen an C)</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp1-pointer.html">C&#43;&#43;: Pointer und Referenzen</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes.html">C&#43;&#43;: Klassen</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp3-big3.html">C&#43;&#43;: Big 3</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp4-operators.html">C&#43;&#43;: Operatoren</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance.html">C&#43;&#43;: Vererbung und Polymorphie</a></li>
  <li><a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp6-templates.html">C&#43;&#43;: Templates</a></li>
</ul>

            <footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Programmiersprachen und -konzepte</h1>
<article class="default">
<h1>Einführung in C&#43;&#43; (Erinnerungen an C)</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Für C wurde ein paar Jahre nach der Entstehung ein objektorientierter Aufsatz entwickelt: C++.
Beide Sprachversionen werden aktiv weiterentwickelt, vor allem in C++ gibt es ca. alle 3 Jahre
einen neuen Standard mit teilweise recht umfangreichen Ergänzungen. Hier fließen analog zu Java
immer mehr Programmierkonzepte mit ein, die aus anderen Sprachen stammen (etwa funktionale
Programmierung). Das macht das Erlernen und Beherrschen der Sprache nicht unbedingt leichter.
Die für uns wichtigsten Neuerungen kamen mit C11 und C++11 bzw. C++14.</p>
<p>C und C++ versuchen (im Gegensatz zu Java) ressourcenschonende Sprachen zu sein: Ein korrektes
Programm soll so schnell wie möglich ausgeführt werden können und dabei so effizient wie möglich
sein (etwa in Bezug auf den Speicherbedarf). Deshalb gibt es keine Laufzeitumgebung, der Quellcode
wird direkt in ein ausführbares (und damit Betriebssystem-abhängiges) Binary compiliert. Beide
Sprachen erlauben dem Programmierer den Zugriff auf die Speicherverwaltung und damit viele Freiheiten.
Die Kehrseite ist natürlich, dass Programmierfehler (etwa bei der Speicherallokation oder bei
Indexberechnungen) nicht von der Laufzeitumgebung entdeckt und abgefangen werden können.</p>
<p>C-Programme sehen auf den ersten Blick Java-Code relativ ähnlich. Das ist nicht verwunderlich,
da Java zeitlich nach C/C++ entwickelt wurde und die Syntax und große Teile der Schlüsselwörter
von C und C++ übernommen hat. C++ hat die C-Syntax übernommen und fügt neue objektorientierte
Konzepte hinzu. Mit gewissen Einschränkungen funktioniert also C-Code auch in C++.</p>
<p>In C++ gibt es Klassen (mit Methoden und Attributen), und zusätzlich gibt es Funktionen. Der
Einsprungpunkt in ein Programm ist (analog zu Java) die Funktion <code>main()</code>, die ein <code>int</code> als
Ergebnis zurückliefert. Dieser Integer kann vom Aufrufer ausgewertet werden, wobei der Wert 0
typischerweise als Erfolg interpretiert wird. Achtung: Das ist eine <em>Konvention</em>, d.h. es kann
Programme geben, die andere Werte zurückliefern. Die Werte müssen dokumentiert werden.</p>
<p>Bevor der Compiler den Quelltext &quot;sieht&quot;, wird dieser von einem Präprozessor bearbeitet. Dieser
hat verschiedene Aufgaben, unter anderem das Einbinden anderer Dateien. Dabei wird ein
<code>#include &quot;dateiname&quot;</code> (sucht im aktuellen Ordner) bzw. <code>#include &lt;dateiname&gt;</code> (sucht im
Standardverzeichnis) ersetzt durch den Inhalt der angegebenen Datei.</p>
<p>C++-Code muss kompiliert werden. Dabei entsteht ein ausführbares Programm. Mit Make kann man den
Kompiliervorgang über Regeln automatisieren (denken Sie an ANT in der Java-Welt, nur ohne XML).
Eine Regel besteht aus einem Ziel (<em>Target</em>), einer Liste von Abhängigkeiten sowie einer Liste mit
Aktionen (Anweisungen). Um ein Ziel zu &quot;bauen&quot; müssen zunächst alle Abhängigkeiten erfüllt sein
(bzw. falls sie es nicht sind, erst noch &quot;gebaut&quot; werden - es muss entsprechend weitere Regeln
geben, um diese Abhängigkeiten &quot;bauen&quot; zu können). Dann wird die Liste der Aktionen abgearbeitet.
Ziele und Abhängigkeiten sind in der Regel Namen von Dateien, die existieren müssen bzw. über die
Aktionen erzeugt werden sollen. Die Aktionen sind normale Befehlssequenzen, die man auch in einer
Konsole eingeben könnte. Make berücksichtigt den Zeitstempel der Dateien: Ziele, die bereits
existieren und deren Abhängigkeiten nicht neuer sind, werden nicht erneut gebaut.</p>
<p>Die gute Nachricht: In Bezug auf Variablen, Operatoren und Kontrollfluss verhalten sich C und C++
im Wesentlichen wie Java.</p>
<p>Es gibt in C++ den Typ <code>bool</code> mit den Werten <code>true</code> und <code>false</code>. Zusätzlich werden Integerwerte
im boolschen Kontext (etwa in einer <code>if</code>-Abfrage) ausgewertet, wobei der Wert 0 einem <code>false</code>
entspricht und alle anderen Integer-Werte einem <code>true</code>. (Dies steht etwas im Widerspruch zu den
Werten, die in der <code>main</code>-Funktion per <code>return</code> zurückgeliefert werden: Hier bedeutet 0 in der
Regel, dass alles OK war.)</p>
<p>Die Basisdatentypen sind (bis auf <code>char</code> und <code>bool</code>) in ihrer Größe maschinenabhängig. Es kann
also sein, dass Code, der auf einem 64bit-Laptop ohne Probleme läuft, auf einem Raspberry PI
Überläufe verursacht! Um besonders ressourcenschonend zu arbeiten, kann man die Speichergröße
für einige Basisdatentypen durch die Typmodifikatoren <code>short</code> und <code>long</code> beeinflussen sowie
die Interpretation von Zahlenwerten mit oder ohne Vorzeichen (<code>signed</code>, <code>unsigned</code>) einstellen.</p>
<p>Die Anzahl der für einen Typ oder eine Variable/Struktur benötigten Bytes bekommt man mit
dem Operator <code>sizeof</code> heraus.</p>
<p>Mit <code>typedef</code> kann man einen neuen Namen für bereits existierende Typen vergeben.</p>
<p>In C++ gibt es Funktionen (analog zu Methoden in Java), diese existieren unabhängig von Klassen.</p>
<p>Wenn eine Funktion aufgerufen wird, muss dem Compiler die Signatur zur Prüfung bekannt sein. Das
bedeutet, dass die Funktion entweder zuvor komplett definiert werden muss oder zumindest zuvor
deklariert werden muss (die Definition kann auch später in der Datei kommen oder in einer anderen
Datei). Das Vorab-Deklarieren einer Funktion nennt man auch &quot;Funktionsprototypen&quot;.</p>
<p>Eine Deklaration darf (so lange sie konsistent ist) mehrfach vorkommen, eine Definition immer nur
exakt einmal. Dabei werden alle Code-Teile, die zu einem Programm zusammencompiliert werden,
gemeinsam betrachtet. =&gt; Das ist auch als <strong>One-Definition-Rule</strong> bekannt.</p>
<p>In C++ gilt beim Funktionsaufruf immer zunächst immer die Parameterübergabe per <strong>call-by-value</strong>
(dito bei der Rückgabe von Werten). Wenn Referenzen oder Pointer eingesetzt werden, wird dagegen
auch ein <em>call-by-reference</em> möglich. (Dazu später mehr.)</p>
<p>Unterscheidung in globale, lokale und lokale statische Variablen mit unterschiedlicher Lebensdauer
und unterschiedlicher Initialisierung durch den Compiler.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/b9xOaxc8Uus' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL Einführung in C++ (Erinnerungen an C)</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Wie hängen C und C++ zusammen?</li> <li>(K1) Wichtigste Unterschiede und Gemeinsamkeiten zu Java</li> <li>(K1) Wichtigste Aufgaben des Präprozessors</li> <li>(K3) Aufbau, Übersetzen und Starten von einfachen C++-Programmen</li> <li>(K3) Standard-Ein-/Ausgabe-Kanäle in C++ sowie die Operatoren <code>&gt;&gt;</code> und <code>&lt;&lt;</code></li> <li>(K3) Nutzung der Basisdatentypen einschließlich der Modifikatoren</li> <li>(K3) Deklaration von Variablen, Nutzung von Kontrollstrukturen und Operatoren</li> <li>(K3) Interpretation von Integers im booleschen Kontext</li> <li>(K3) Nutzung des Scope-Operators <code>::</code>, Namensräume</li> <li>(K3) Benutzung von <code>sizeof</code> zur Bestimmung des Speicherbedarfs</li> <li>(K3) Benutzung von <code>typedef</code> zur Definition neuer Typen (Aliase bestehender Typen)</li> <li>(K3) Erinnerung: Automatisiertes Übersetzen mit Hilfe von GNU Make und einfachsten Makefiles</li> <li>(K2) Unterschied zwischen Deklaration und Definition, One Definition Rule</li> <li>(K2) Problematik bei der Deklaration parameterloser Funktionen</li> <li>(K2) Call-by-Value-Semantik bei der Parameterübergabe</li> <li>(K2) Sichtbarkeit und Initialisierung von Variablen</li> <li>(K3) Definition und Deklaration von Funktionen</li> <li>(K3) Nutzung lokaler und globaler und lokaler statischer Variablen</li></ul>
  </div>
</div>




    <h2 id="warum">Warum?</h2>
<ul>
<li>C++ erlaubt ressourcenschonende Programmierung</li>
<li>Objektorientierter &quot;Aufsatz&quot; auf C</li>
<li>Verbreitet bei hardwarenaher und/oder rechenintensiver Software</li>
</ul>
<div class='center'>
<p><span class='alert'><strong>Sie werden C++ im Modul &quot;Computergrafik&quot; brauchen!</strong></span></p>
</div>
<p><strong>Geschichte</strong></p>
<ul>
<li>1971-73: <span class='alert'>Ritchie</span> entwickelt die Sprache <span class='alert'>C</span></li>
<li>Ab 1979: Entwicklung von <span class='alert'>C++</span> durch Bjarne <span class='alert'>Stroustrup</span> bei AT&amp;T
<ul>
<li>Erweiterung der prozeduralen Sprache C</li>
<li>Ursprünglich &quot;C mit Klassen&quot;, später &quot;C++&quot; (Inkrement-Operator)</li>
</ul>
</li>
<li>Bis heute: Fortlaufende Erweiterungen: alle 3 Jahre neuer Standard (C++11, C++14, ...)</li>
</ul>
<div class="box notices cstyle info">
  <div class="box-label">
    <i class="fa-fw fas fa-info-circle"></i> <strong>C/C++ vs. Java</strong>
  </div>
  <div class="box-content">
<ul>
<li>Java: Fokus auf Sicherheit und Robustheit
<ul>
<li>Diverse Sicherheitschecks durch Compiler und VM (zb. Array-Zugriff)</li>
<li>Speicherverwaltung (Garbage Collection), kein Speicherzugriff über Pointer</li>
<li>Automatische Initialisierung von Variablen</li>
</ul>
</li>
<li>C/C++: Fokus auf Effizienz (Speicher, Laufzeit) für korrekte Programme
<ul>
<li>Vergleichsweise schwache Sicherheitschecks durch Compiler, keine VM
(d.h. keine Prüfung von Array-Indizes u.a.)</li>
<li>Keine Garbage Collection, Programmierer hat direkten Zugriff auf Speicher</li>
<li>Keine automatische Initialisierung von Variablen</li>
</ul>
</li>
</ul>
  </div>
</div>
<h2 id="hello-world">Hello World!</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * HelloWorld.cpp (g++ -Wall HelloWorld.cpp)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdio&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdlib&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    printf(<span style="color:#e6db74">&#34;Hello World from C++  :-)</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Hello World from C++  :-)&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Hello World from C++  :-)&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> EXIT_SUCCESS;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="beobachtungen">Beobachtungen</h3>
<p>Jedes (ausführbare) C++-Programm hat genau eine <code>main()</code>-Funktion. Die <code>main()</code>-Funktion ist
<em>keine Methode</em> einer Klasse: In C/C++ gibt es Funktionen auch außerhalb von Klassen.</p>
<p>In C++ gibt es Namespaces (dazu später mehr). Die aus der Standardbibliothek importierten
Funktionen sind in der Regel im Namespace <code>std</code> definiert. Mit <code>using namespace std;</code> können
Sie auf die Elemente direkt zugreifen. Wenn Sie das <code>using namespace std;</code> weglassen, müssten
Sie bei jeder Verwendung eines Symbols den Namensraum explizit dazu schreiben
<code>std::cout &lt;&lt; &quot;Hello World from C++  :-)&quot; &lt;&lt; std::endl;</code>.</p>
<p>Sie können im C++-Code auch Funktionen aus C benutzen, d.h. Sie können für die Ausgabe
beispielsweise <code>printf</code> nutzen (dazu müssen Sie den Header <code>&lt;cstdio&gt;</code> importieren). Die
&quot;richtige&quot; Ausgabe in C++ ist aber die Nutzung des Ausgabestreams <code>cout</code> und des
Ausgabeoperators <code>&lt;&lt;</code>. Das <code>endl</code> sorgt für einen zum jeweiligen Betriebssystem passenden
Zeilenumbruch.</p>
<p>Der Rückgabewert signalisiert Erfolg bzw. Fehler der Programmausführung. Dabei steht der Wert
0 traditionell für Erfolg (Konvention!). Besser Makros nutzen: <code>EXIT_SUCCESS</code> bzw.
<code>EXIT_FAILURE</code> (in <code>cstdlib</code>).</p>
<h3 id="präprozessor">Präprozessor</h3>
<p>Der Präprozessor transformiert den Quellcode <em>vor</em> dem Compiler-Lauf. Zu den wichtigsten
Aufgaben gehören dabei die Makrosubstitution (<code>#define Makroname Ersatztext</code>) und das Einfügen
von Header-Dateien (und anderen Dateien) per <code>#include</code>. Es gibt dabei zwei Formen, die an
unterschiedlichen Orten nach der angegebenen Datei suchen:</p>
<ul>
<li><code>#include &quot;dateiname&quot;</code> sucht im aktuellen Ordner</li>
<li><code>#include &lt;dateiname&gt;</code> sucht im Standardverzeichnis</li>
</ul>
<p>Das <code>#include</code> kann wie in C genutzt werden, aber es gibt auch die Form ohne die Dateiendung
&quot;.h&quot;. Da es in C keine Funktionsüberladung gibt (in C++ dagegen schon), müssen die C-Header
speziell markiert sein, um sie in C++ verwenden zu können. Für die Standard-Header ist dies
bereits erledigt, Sie finden diese mit einem &quot;c&quot; vorangestellt:</p>
<ul>
<li>Include in C: <code>#include &lt;stdio.h&gt;</code></li>
<li>Include in C++: <code>#include &lt;cstdio&gt;</code></li>
</ul>
<h3 id="übersetzen-linken-ausführen">Übersetzen, Linken, Ausführen</h3>
<p>C++-Dateien werden üblicherweise mit der Endung &quot;<strong>.cpp</strong>&quot; oder &quot;.cxx&quot; oder &quot;.cc&quot;
abgespeichert, Header-Dateien mit den Endungen &quot;.hpp&quot; oder &quot;.hxx&quot; oder &quot;.hh&quot;.</p>
<p>Zum Übersetzen und Linken in einem Arbeitsschritt rufen Sie den Compiler auf:
<code>g++ HelloWorld.cpp</code> bzw. besser <strong><code>g++ -Wall -o helloworld HelloWorld.cpp</code></strong>. Die Option
<code>-Wall</code> sorgt dafür, dass alle Warnungen aktiviert werden.</p>
<p>Ausführen können Sie das erzeugte Programm in der Konsole mit: <code>./helloworld</code>. Der aktuelle
Ordner ist üblicherweise (aus Sicherheitsgründen) nicht im Suchpfad für ausführbare Dateien
enthalten. Deshalb muss man explizit angeben, dass ein Programm im aktuellen Ordner (<code>.</code>)
ausgeführt werden soll.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/HelloWorld.cpp" target="_blank"><span class="title">Konsole: HelloWorld.cpp</span></a></span></div>
<h2 id="variablen-operatoren-kontrollfluss">Variablen, Operatoren, Kontrollfluss</h2>
<div class='center'>
<p><span class='alert'><strong>Im Wesentlichen wie von C und Java gewohnt ... :-)</strong></span></p>
</div>
<ul>
<li>
<p>Wichtig(st)e Abweichung:</p>
<p>Im booleschen Kontext wird <code>int</code> als Wahrheitswert interpretiert:
Alle Werte ungleich 0 entsprechen <code>true</code> (!)</p>
<p><strong>Anmerkung</strong>: Dies steht im Widerspruch zu den Werten, die in der <code>main</code>-Funktion per
<code>return</code> zurückgeliefert werden: Hier bedeutet 0 in der Regel, dass alles OK war.</p>
</li>
</ul>
<p>=&gt; Vorsicht mit</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> c;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (c<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>) { ... }</span></span></code></pre></div>
<h2 id="ein--und-ausgabe-mit-printf-und-cincout">Ein- und Ausgabe mit <em>printf</em> und <em>cin/cout</em></h2>
<ul>
<li>
<p><code>printf(formatstring, ...)</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>string foo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fluppie&#34;</span>;
</span></span><span style="display:flex;"><span>printf(<span style="color:#e6db74">&#34;hello world : %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, foo.c_str());</span></span></code></pre></div>
<ul>
<li>
<p>Einbinden über <code>#include &lt;cstdio&gt;</code></p>
</li>
<li>
<p>Format-String: Text und Formatierung der restlichen Parameter: <code>%[flags][width][.precision]conversion</code></p>
<ul>
<li>
<p><code>flags</code>: hängt von der konkreten Ausgabe ab</p>
</li>
<li>
<p><code>width</code>: Feldbreite</p>
</li>
<li>
<p><code>precision</code>: Anzahl der Dezimalstellen</p>
</li>
<li>
<p><code>conversion</code>: (Beispiele)</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: left"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">c</td>
          <td style="text-align: left">Zeichen (Char)</td>
      </tr>
      <tr>
          <td style="text-align: left">d</td>
          <td style="text-align: left">Integer (dezimal)</td>
      </tr>
      <tr>
          <td style="text-align: left">f</td>
          <td style="text-align: left">Gleitkommazahl</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Standardkanäle: <code>cin</code> (Standardeingabe), <code>cout</code> (Standardausgabe), <code>cerr</code> (Standardfehlerausgabe)</p>
<ul>
<li>Genauer: <code>cout</code> ist ein Ausgabestrom, auf dem der Operator <code>&lt;&lt;</code> schreibt</li>
<li>Einbinden über <code>#include &lt;iostream&gt;</code></li>
<li>Implementierung der Ein- und Ausgabeoperatoren (<code>&gt;&gt;</code>, <code>&lt;&lt;</code>) für Basistypen und Standardklassen vorhanden</li>
<li>Automatische Konvertierungen für Basistypen und Standardklassen</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Ausgabe, auch verkettet
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>string foo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fluppie&#34;</span>;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;hello world : &#34;</span> <span style="color:#f92672">&lt;&lt;</span> foo <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// liest alle Ziffern bis zum ersten Nicht-Ziffernzeichen
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// (fuehrende Whitespaces werden ignoriert!)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> zahl; cin <span style="color:#f92672">&gt;&gt;</span> zahl;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Einzelne Zeichen (auch Whitespaces) lesen
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">char</span> c; cin.get(c);</span></span></code></pre></div>
</li>
</ul>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/cin.cpp" target="_blank"><span class="title">Beispiel: cin.cpp</span></a></span></div>
<h2 id="sichtbarkeit-und-gültigkeit-und-namespaces">Sichtbarkeit und Gültigkeit und Namespaces</h2>
<p>Wie in Java:</p>
<ul>
<li>Namen sind nur nach Deklaration und innerhalb des Blockes, in dem sie deklariert wurden, gültig</li>
<li>Namen sind auch gültig für innerhalb des Blockes neu angelegte innere Blöcke</li>
<li>Namen in inneren Blöcken können Namen aus äußeren Scopes überdecken</li>
</ul>
<p>Zusätzlich gibt es noch benannte Scopes und einen Scope-Operator.</p>
<ul>
<li>
<p>C++ enthält den Scope-Operator <code>::</code> =&gt; Zugriff auf global sichtbare Variablen</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;lokal: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;global: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">::</span>a <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Alle Namen aus <code>XYZ</code> zugänglich machen: <code>using namespace XYZ;</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Hello World&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
</li>
<li>
<p>Alternativ gezielter Zugriff auf einzelne Namen: <code>XYZ::name</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Hello World&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;</span></span></code></pre></div>
</li>
</ul>
<!-- -->
<ul>
<li>
<p>Namensraum <code>XYZ</code> deklarieren</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> XYZ {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/cppScope.cpp" target="_blank"><span class="title">Beispiel: cppScope.cpp</span></a></span></div>
<h2 id="arrays-und-vektoren-in-c">Arrays und Vektoren in C++</h2>
<ul>
<li>
<p>Syntax: <code>Typ Name[AnzahlElemente];</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> myArray[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> myArray2[] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>};</span></span></code></pre></div>
<ul>
<li>
<p><span class='alert'>Compiler</span> reserviert sofort Speicher auf dem <span class='alert'>Stack</span>
=&gt; <strong>statisch</strong>: im Programmlauf nicht änderbar</p>
</li>
<li>
<p>Zugriff über den Indexoperator []</p>
</li>
<li>
<p>Achtung: &quot;roher&quot; Speicher, d.h. <strong>keinerlei Methoden</strong></p>
</li>
<li>
<p>Größe nachträglich bestimmen mit <code>sizeof</code>:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> myArray[<span style="color:#ae81ff">100</span>], i;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> cnt <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(myArray)<span style="color:#f92672">/</span><span style="color:#66d9ef">sizeof</span>(myArryay[<span style="color:#ae81ff">0</span>]);</span></span></code></pre></div>
</li>
</ul>
<p><strong>Guter Stil</strong>: Anzahl der Elemente als Konstante deklarieren:
Statt <code>int myArray[100];</code> besser</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#define LENGTH 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> myArray[LENGTH];</span></span></code></pre></div>
</li>
<li>
<p>Vordefinierter Vektor-Datentyp <code>vector</code></p>
<ul>
<li>Einbinden über <code>#include &lt;vector&gt;</code></li>
<li>Parametrisierter Datentyp (C++: Templates) - Nutzung analog wie in Java
(Erstellung von Templateklassen und -methoden aber deutlich anders!)</li>
<li>Anlegen eines neuen Arrays mit 10 Elementen für Integer:</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> v(<span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> meinVektor <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1.1</span>, <span style="color:#ae81ff">2.2</span>, <span style="color:#ae81ff">3.3</span>, <span style="color:#ae81ff">4.4</span>};
</span></span><span style="display:flex;"><span>meinVektor.push_back(<span style="color:#ae81ff">5.5</span>);
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> meinVektor.size() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<ul>
<li>Zugriff auf Elemente:</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> v[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;&lt;</span> endl;        <span style="color:#75715e">// ohne Bereichspruefung!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cout <span style="color:#f92672">&lt;&lt;</span> v.at(<span style="color:#ae81ff">1000</span>) <span style="color:#f92672">&lt;&lt;</span> endl;  <span style="color:#75715e">// mit interner Bereichspruefung
</span></span></span></code></pre></div>
<ul>
<li>Zuweisung (mit Kopieren):</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> andererVektor;
</span></span><span style="display:flex;"><span>andererVektor <span style="color:#f92672">=</span> meinVektor;</span></span></code></pre></div>
<ul>
<li>Dynamische Datenstruktur:</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> meineDaten;      <span style="color:#75715e">// initiale Groesse: 0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>meineDaten.push_back(<span style="color:#ae81ff">123</span>);   <span style="color:#75715e">// Wert anhaengen
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>meineDaten.pop_back();  <span style="color:#75715e">// Wert loeschen
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>meineDaten.empty();     <span style="color:#75715e">// leer?
</span></span></span></code></pre></div>
</li>
</ul>
<p><span class='alert'><strong>Vorsicht!</strong></span> <code>vector&lt;int&gt; arr();</code> ist <strong>kein</strong> Vektor der Länge 0,
sondern deklariert eine <strong>neue Funktion</strong>!</p>
<h2 id="alias-namen-für-typen-mit-typedef-und-using">Alias-Namen für Typen mit <em>typedef</em> und <em>using</em></h2>
<ul>
<li>
<p>Syntax: <code>typedef existTyp neuerName;</code> (C, C++)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> uint32;
</span></span><span style="display:flex;"><span>uint32 x, y, z;</span></span></code></pre></div>
<p>Im Beispiel ist <code>uint32</code> ein neuer Name für den existierenden Typ <code>unsigned long</code>, d.h.
die Variablen <code>x</code>, <code>y</code> und <code>z</code> sind <code>unsigned long</code>.</p>
</li>
<li>
<p>Syntax: <code>using neuerName = existTyp;</code> (C++)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> uint32;       <span style="color:#75715e">// C, C++
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> uint32 <span style="color:#f92672">=</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span>;       <span style="color:#75715e">// C++11
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> foo;       <span style="color:#75715e">// C, C++
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> foo <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>;       <span style="color:#75715e">// C++11
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#a6e22e">void</span> (<span style="color:#f92672">*</span>fp)(<span style="color:#66d9ef">int</span>,<span style="color:#66d9ef">double</span>);     <span style="color:#75715e">// C, C++
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> fp <span style="color:#f92672">=</span> <span style="color:#66d9ef">void</span> (<span style="color:#f92672">*</span>)(<span style="color:#66d9ef">int</span>,<span style="color:#66d9ef">double</span>);    <span style="color:#75715e">// C++11
</span></span></span></code></pre></div>
<p>Seit C++11 gibt es das Schlüsselwort <code>using</code> für Alias-Deklarationen (analog zu <code>typedef</code>).
Dieses funktioniert im Gegensatz zu <code>typedef</code> auch für Templates mit (teilweise) gebundenen
Template-Parametern.</p>
</li>
</ul>
<h2 id="erinnerungen-an-c---vergleich-mit-c">Erinnerungen an C - Vergleich mit C++</h2>
<div class="box notices cstyle important">
  <div class="box-label">
    <i class="fa-fw fas fa-bolt"></i> Erinnerungen an C - Vergleich mit C++
  </div>
  <div class="box-content">
<div class="expand">
  <input type="checkbox" id="R-expand-25609e0ca1b74013361c0e30feb0a660" aria-controls="R-expandcontent-25609e0ca1b74013361c0e30feb0a660">
  <label class="expand-label" for="R-expand-25609e0ca1b74013361c0e30feb0a660">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Expand me&hellip;
  </label>
  <div id="R-expandcontent-25609e0ca1b74013361c0e30feb0a660" class="expand-content">
<h3 id="basisdatentypen">Basisdatentypen</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: left"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>char</code></td>
          <td style="text-align: left">Zeichen (ASCII, 8 Bit bzw. 1 Byte)</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>int</code></td>
          <td style="text-align: left">Ganze Zahl (16, 32 oder 64 Bit)</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>float</code></td>
          <td style="text-align: left">Gleitkommazahl (typ. 32 Bit)</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>double</code></td>
          <td style="text-align: left">Doppelt genaue Gleitkommazahl (typ. 64 Bit)</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>void</code></td>
          <td style="text-align: left">Ohne/kein Wert</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>bool</code></td>
          <td style="text-align: left"><code>true</code>, <code>false</code></td>
      </tr>
  </tbody>
</table>
<p>Außerdem sind Arrays und Pointer mit diesen Typen möglich.</p>
<h3 id="typmodifikatoren-ändern-bedeutung">Typmodifikatoren ändern Bedeutung</h3>
<p>Vorangestellte Modifikatoren ändern Bedeutung:</p>
<ol>
<li>
<p>Länge im Speicher</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: left"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>short</code></td>
          <td style="text-align: left">Speicher: halbe Wortlänge</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>long</code></td>
          <td style="text-align: left">Speicher: doppelte/dreifache Wortlänge</td>
      </tr>
  </tbody>
</table>
</li>
<li>
<p>Vorzeichen</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: left"></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>signed</code></td>
          <td style="text-align: left">mit Vorzeichen (Default bei Zahlen)</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>unsigned</code></td>
          <td style="text-align: left">ohne Vorzeichen</td>
      </tr>
  </tbody>
</table>
</li>
</ol>
<p>Anwendung auf ganze Zahlen:</p>
<ul>
<li><code>short</code> und <code>long</code> sind Synonyme für <code>short int</code> und <code>long int</code></li>
<li><code>long long</code> ist typischerweise eine ganze Zahl mit 8 Byte</li>
<li><code>unsigned char</code> sind Zahlen von 0, ..., 255 (1 Byte)</li>
<li>zusätzlich: <code>long double</code> (nur diese Form)</li>
</ul>
<p>Sie können <code>short</code>, <code>long</code> und <code>long long</code> nur für ganze Zahlen (<code>int</code>) nutzen, mit der Ausnahme <code>long double</code>.
Dagegen können <code>signed</code> und <code>unsigned</code> sowohl für <code>char</code> als auch für <code>int</code> benutzt werden.</p>
<p>vgl. <a href="https://en.wikipedia.org/wiki/C_data_types" rel="external" target="_blank">en.wikipedia.org/wiki/C_data_types</a></p>
<h3 id="größe-eines-datentyps-ist-maschinenabhängig">Größe eines Datentyps ist maschinenabhängig</h3>
<div class='center'>
<p><span class='alert'><strong>Der reservierte Speicherbereich und damit auch der Zahlenbereich für einen einfachen Typ in C/C++ ist maschinenabhängig!</strong></span></p>
</div>
<ul>
<li>
<p>Zahlenbereiche für konkrete Implementierung in Header-Files definiert</p>
<p><code>limits.h</code> und <code>float.h</code>: Konstanten <code>INT_MAX</code>, <code>INT_MIN</code>, ...</p>
</li>
<li>
<p>Alternativ Herausfinden der Größe in Bytes: Operator <code>sizeof</code></p>
<p>Syntax: <code>sizeof(Typ)</code></p>
</li>
</ul>
<p>Es gilt in C/C++:</p>
<ul>
<li><code>sizeof(unsigned char)</code> <span class="math align-center">$=$</span> 1</li>
<li><code>sizeof(short int)</code> <span class="math align-center">$=$</span> 2</li>
<li><code>sizeof(short int)</code> <span class="math align-center">$\le$</span> <code>sizeof(int)</code> <span class="math align-center">$\le$</span> <code>sizeof(long int)</code></li>
<li><code>sizeof(float)</code> <span class="math align-center">$\le$</span> <code>sizeof(double)</code> <span class="math align-center">$\le$</span> <code>sizeof(long double)</code></li>
</ul>
<p><strong>Hinweis Arrays</strong>: <code>sizeof</code> gibt immer die Anzahl der Bytes für einen Typ oder eine
Variable zurück. Bei Array ist das nicht unbedingt die Anzahl der Elemente im Array!</p>
<p>Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> a[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> b[<span style="color:#ae81ff">10</span>];</span></span></code></pre></div>
<p><code>sizeof(a)</code> würde den Wert 10 als Ergebnis liefern, da ein <code>char</code> in C/C++ immer exakt ein
Byte benötigt und entsprechend 10 <code>char</code> 10 Byte. <code>sizeof(b)</code> ist maschinenabhängig und
liefert die Anzahl der Bytes, die man für die Darstellung von 10 Double-Werten benötigt.</p>
<p>Wenn man die Anzahl der Elemente im Array mit <code>sizeof</code> herausfinden will, muss man den
Gesamtwert für das Array noch durch den Speicherbedarf eines Elements teilen, also
beispielsweise <code>sizeof(b)/sizeof(b[0])</code>.</p>
<h3 id="beispiele-für-schleifen-und-kontrollstrukturen-in-cc">(Beispiele für) Schleifen und Kontrollstrukturen in C/C++</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, y<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (x<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">5</span>) {
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(y<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> y<span style="color:#f92672">-</span>x;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (y<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    y<span style="color:#f92672">--</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (x<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; x<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; x<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> y<span style="color:#f92672">*</span>y;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="funktionen-in-c-und-c">Funktionen in C und C++</h3>
<ul>
<li>
<p>Funktionen sind mit Methoden in Java vergleichbar</p>
<p>=&gt; sind aber <span class='alert'>unabhängig</span> von Klassen bzw. Objekten</p>
</li>
<li>
<p>Syntax:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Rueckgabetyp <span style="color:#a6e22e">Funktionsname</span>(Parameterliste) {
</span></span><span style="display:flex;"><span>    Anweisungen (Implementierung)
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Aufruf: Nennung des Namens (mit Argumenten) im Programmcode</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> foo(<span style="color:#ae81ff">42</span>);</span></span></code></pre></div>
</li>
</ul>
<p>Anmerkung: Unterschied &quot;Parameter&quot; und &quot;Argument&quot;:</p>
<ul>
<li>Funktion hat &quot;Parameter&quot; in ihrer Parameterliste, auch &quot;formale Parameter&quot; genannt</li>
<li>Beim Aufruf werden &quot;Argumente&quot; übergeben, auch &quot;aktuelle Parameter&quot; genannt</li>
</ul>
<p>In der Praxis verwendet man beide Begriffe i.d.R. synonym.</p>
<h4 id="funktionen-deklaration-vs-definition">Funktionen: Deklaration vs. Definition</h4>
<ul>
<li>
<p><strong>Deklaration</strong>: <span class='alert'>(Funktions-) Prototyp</span>: Festlegen von
<span class='alert'>Signatur</span> (d.h. Funktionsname und Anzahl, Typ, Reihenfolge der Parameter) u. Rückgabetyp</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">machWas</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);</span></span></code></pre></div>
</li>
<li>
<p><strong>Definition</strong>: <span class='alert'>Implementierung</span> der Funktion</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">machWas</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;a: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;, b: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> b <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Compiler &quot;liest&quot; Quellcode von oben nach unten</p>
</li>
<li>
<p>Funktionen müssen (wie alle anderen Symbole auch) <span class='alert'>vor</span> ihrer Verwendung zumindest
<span class='alert'>deklariert</span> sein, d.h. es muss zumindest ihre Signatur bekannt sein (siehe nächste Folie)</p>
</li>
<li>
<p>Deklaration: Variablennamen können weggelassen werden</p>
</li>
</ul>
<div class="box notices cstyle info">
  <div class="box-label">
    <i class="fa-fw fas fa-info-circle"></i> Deklaration vs. Definition
  </div>
  <div class="box-content">
<ul>
<li><strong>Deklaration</strong>: Macht einen Namen bekannt und legt den Typ der Variablen bzw.
die Schnittstelle der Funktionen fest.</li>
<li><strong>Definition</strong>: Deklaration plus Reservierung von Speicherplatz für die
Variable oder Implementierung einer Funktion/Struktur/...</li>
</ul>
  </div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/simplefunction.cpp" target="_blank"><span class="title">Konsole: simplefunction.cpp</span></a></span></div>
<h4 id="one-definition-rule-für-funktionen">One Definition Rule (für Funktionen)</h4>
<div class='center'>
<p>Jede Funktion darf im <strong>gesamten</strong> Programm nur <span class='alert'><strong>einmal definiert</strong></span> sein!</p>
</div>
<h4 id="funktionen-und-parameter">Funktionen und Parameter</h4>
<ul>
<li>
<p>Funktionen &quot;ohne&quot; Parameter:</p>
<p>Leere Parameter-Liste[^1] oder Schlüsselwort <code>void</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">void</span>);</span></span></code></pre></div>
</li>
<li>
<p>Funktionen <strong>mit</strong> Parameter:</p>
<ul>
<li>Deklaration: Variablennamen können weggelassen werden</li>
<li>Definition: Variablennamen müssen angegeben werden</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">char</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">char</span> b);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">char</span> b) { ... }</span></span></code></pre></div>
</li>
</ul>
<h5 id="leere-parameterliste-in-c">Leere Parameterliste in C</h5>
<p>Wenn eine Funktion keine Parameter hat, können Sie wie in C die Parameterliste
entweder einfach leer lassen (<code>int fkt();</code>) oder das Schlüsselwort <code>void</code>
nutzen (<code>int fkt(void);</code>).</p>
<p>Betrachten Sie folgendes Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// Legal in C
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">wuppie</span>();                   <span style="color:#75715e">// Deklaration: &#34;Ich verrate Dir nicht, wieviele Parameter wuppie() hat.&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">wuppie</span>(<span style="color:#66d9ef">int</span> x) { <span style="color:#66d9ef">return</span> x; } <span style="color:#75715e">// Aufruf mit Argumenten =&gt; ist okay
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Fehler in C
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">fluppie</span>(<span style="color:#66d9ef">void</span>);               <span style="color:#75715e">// Deklaration: fluppie() hat KEINE Parameter!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">fluppie</span>(<span style="color:#66d9ef">int</span> x) { <span style="color:#66d9ef">return</span> x; } <span style="color:#75715e">// Aufruf mit Argumenten =&gt; Compiler-Fehler
</span></span></span></code></pre></div>
<p>Wenn Sie eine mit leerer Parameterliste deklarierte Funktion definieren bzw.
aufrufen, akzeptiert der C-Compiler dennoch <strong>alle</strong> übergebenen Parameter. Dies
kann zu schwer verständlichen Fehlern führen! Sobald eine Funktion explizit
mit dem Schlüsselwort <code>void</code> in der Parameterliste deklariert wird, <strong>muss</strong>
diese dann auch ohne Parameter aufgerufen werden.</p>
<p><span class='alert'>=&gt; <strong>Bevorzugen Sie in C die Variante mit dem Schlüsselwort <code>void</code>!</strong></span></p>
<h5 id="leere-parameterliste-in-c-1">Leere Parameterliste in C++</h5>
<p>Keine Parameter: Leere Liste und Schlüsselwort <code>void</code> <strong>gleichwertig</strong></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">void</span>);</span></span></code></pre></div>
<h4 id="defaultparameter-in-c">Defaultparameter in C++</h4>
<ul>
<li>Parameter mit Defaultwerten am <span class='alert'><strong>Ende</strong></span> der Parameterliste</li>
<li>Bei Trennung von Deklaration und Definition: Defaultparameter
<span class='alert'><strong>nur</strong></span> in Deklaration</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Deklaration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Definition
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">int</span> j, <span style="color:#66d9ef">int</span> k) { ... }</span></span></code></pre></div>
<h4 id="überladen-von-funktionen">Überladen von Funktionen</h4>
<ul>
<li>Funktionen im <strong>gleichen Gültigkeitsbereich</strong> können überladen werden</li>
<li>Zu beachten:
<ol>
<li>Funktionsname identisch</li>
<li>Signatur (Anzahl, Typen der Parameter) muss <span class='alert'>unterschiedlich</span> sein</li>
<li>Rückgabewert darf variieren</li>
</ol>
</li>
</ul>
<p>=&gt; <span class='alert'>Warnung</span>: Überladene Funktionen sollten gleichartige
Operationen für unterschiedliche Datentypen bereitstellen!</p>
<h4 id="probleme-beim-überladen-von-funktionen">Probleme beim Überladen von Funktionen</h4>
<ol>
<li>
<p>Defaultparameter</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>);</span></span></code></pre></div>
</li>
<li>
<p>Identische Signatur, Unterschied nur im Rückgabewert</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);</span></span></code></pre></div>
</li>
<li>
<p>Überladen nur für Funktionen des selben Gültigkeitsbereichs!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">char</span> c) {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;f(char): &#34;</span> <span style="color:#f92672">&lt;&lt;</span> c <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>(<span style="color:#66d9ef">int</span> i) {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;f(int): &#34;</span> <span style="color:#f92672">&lt;&lt;</span> i <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> f(<span style="color:#66d9ef">int</span> i);  <span style="color:#75715e">// f(char) nicht mehr sichtbar!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    f(<span style="color:#e6db74">&#39;a&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ol>
<h4 id="parameterübergabe-in-cc-call-by-value">Parameterübergabe in C/C++: Call-by-Value</h4>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">add_5</span>(<span style="color:#66d9ef">int</span> x) {
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> erg, i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    erg <span style="color:#f92672">=</span> add_5(i);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<pre><code> Aufrufer-Sicht
              i                      erg
           +-----+                 +-----+
           |     |                 |     |
           +--+--+                 +--^--+
              |                       |
              |                       |
--------------+-----------------------+-----
  Kopie bei   |                Kopie  |
  Aufruf      |                bei    |
              |                return |
           +--v--+                    |
           |     +--------------------+
           +-----+
              x
 Funktionssicht
</code></pre>
</div>
</div>
<ul>
<li>Default in C/C++ ist die <span class='alert'>call-by-value</span> Semantik:
<ul>
<li>Argumente werden bei Übergabe <span class='alert'>kopiert</span></li>
<li>Ergebniswerte werden bei Rückgabe <span class='alert'>kopiert</span></li>
</ul>
</li>
<li>Folgen:
<ul>
<li>Keine Seiteneffekte durch Verändern von übergebenen Strukturen</li>
<li>Negative Auswirkungen auf Laufzeit bei großen Daten</li>
</ul>
</li>
</ul>
<p>Ausnahme: Übergabe von C++-Referenzen oder Pointern
(wobei Pointer streng genommen auch kopiert werden, also per call-by-value übergeben werden ...)</p>
<h3 id="unterschiedliche-variablenarten">Unterschiedliche Variablenarten</h3>
<h4 id="lokale-variablen-automatische-variablen">Lokale Variablen (&quot;automatische Variablen&quot;)</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>
<p>Innerhalb einer Funktion (oder Blockes) definierte Variablen</p>
</li>
<li>
<p>Gilt auch für Variablen aus Parameterliste</p>
</li>
<li>
<p>Überdecken <strong>globale Variablen</strong> gleichen Namens</p>
</li>
<li>
<p>Sichtbarkeit:</p>
<ul>
<li>Außerhalb der Funktion/Blockes nicht zugreifbar</li>
<li>Beim Betreten der Funktion Reservierung von Speicherplatz für lokale
Variablen</li>
<li>Dieser wird beim Verlassen des Blockes/Funktion automatisch wieder
freigegeben</li>
<li>Namen sind nur nach Deklaration und innerhalb des Blockes, in dem sie
deklariert wurden, gültig</li>
<li>Namen sind auch gültig für innerhalb des Blockes neu angelegte innere
Blöcke</li>
</ul>
<p>Software Engineering: Vermeiden Sie lokale Namen, die Namen aus einem
äußeren Scope überdecken!</p>
</li>
</ul>
<p>=&gt; Werden auch als <span class='alert'><strong>automatische Variablen</strong></span> bezeichnet</p>
<h4 id="globale-variablen-externe-variablen">Globale Variablen (&quot;externe Variablen&quot;)</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei main.cpp (einzeln kompilierbar) ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> global;  <span style="color:#75715e">// Deklaration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> global;             <span style="color:#75715e">// Definition
</span></span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei foo.cpp (einzeln kompilierbar) ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> global;      <span style="color:#75715e">// Deklaration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() {
</span></span><span style="display:flex;"><span>    global <span style="color:#f92672">=</span> <span style="color:#ae81ff">45</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>Globale Variablen: Außerhalb <strong>jeder</strong> Funktion definierte Variablen</li>
<li>Globale Variablen gelten in <span class='alert'>allen</span> Teilen des Programms</li>
<li>Auch in anderen Dateien! =&gt; müssen bei <em>Nutzung</em> in Funktionen als <code>extern</code> deklariert werden</li>
<li>Existieren die <strong>gesamte</strong> Programmlebensdauer über</li>
</ul>
<p>=&gt; Werden auch als <span class='alert'><strong>externe Variablen</strong></span> bezeichnet</p>
<p>Die Dateien sind einzeln kompilierbar (<code>extern</code> sagt dem Compiler, dass
die Variable woanders definiert ist) =&gt; erst der Linker löst das auf.</p>
<p><em>Hinweis</em>: Bei globalen Konstanten in C++ brauchen Sie zusätzlich auch bei der Definition ein &quot;<code>extern</code>&quot;,
da die Konstante sonst nur in ihrer Datei sichtbar ist.</p>
<h4 id="statische-lokale-variablen">Statische lokale Variablen</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>;
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    foo();  foo();  foo();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>
<p>Lokale Variablen mit &quot;Gedächtnis&quot;: Definition mit dem vorangestellten Schlüsselwort &quot;static&quot;</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> callCount;</span></span></code></pre></div>
</li>
<li>
<p>Eigenschaften:</p>
<ul>
<li>Wert bleibt für die folgenden Funktionsaufrufe erhalten</li>
<li>Wert kann in der Funktion verändert werden</li>
<li>Dennoch: lokale Variable, d.h. von außen nicht sichtbar/gültig</li>
</ul>
</li>
</ul>
<p><em>Hinweis</em>: <code>static</code> für globale Variablen bedeutet etwas anderes! (s.u. &quot;Sichtbarkeit&quot;)</p>
<h4 id="initialisierung-von-variablen">Initialisierung von Variablen</h4>
<p>(Automatische) Initialisierung von Variablen hängt von ihrer Speicherklasse ab!</p>
<ul>
<li><strong>Automatisch</strong>
<ul>
<li>Werden <span class='alert'>nicht</span> automatisch initialisiert (!)</li>
<li>Bei vorgegebenem Wert ab Aufruf der Funktion</li>
</ul>
</li>
<li><strong>Extern</strong>
<ul>
<li>Mit dem Wert 0 oder vorgegebenem Wert</li>
<li>Bereits vor Programmstart (im Code enthalten)</li>
</ul>
</li>
<li><strong>Statisch</strong>
<ul>
<li>Mit dem Wert 0 oder vorgegebenem Wert</li>
<li>Ab erstem Aufruf der Funktion</li>
</ul>
</li>
</ul>
<h4 id="sichtbarkeit-globaler-variablen-und-funktionen-beschränken">Sichtbarkeit globaler Variablen (und Funktionen) beschränken</h4>
<ul>
<li>Beschränkung der Gültigkeit von <strong>globalen Variablen</strong> auf die Datei, wo
sie definiert sind: <strong>Schlüsselwort <code>static</code></strong>
<ul>
<li>werden (weiterhin) automatisch mit 0 initialisiert</li>
<li>sind nun nur in der Datei sichtbar/gültig, wo sie definiert sind</li>
<li>dient zur Vermeidung von Namenskonflikten bei globalen Variablen</li>
</ul>
</li>
<li>Sichtbarkeitsbeschränkung gilt auch für <strong>Funktionen</strong></li>
</ul>
<p><code>static</code> für globale Variablen beschränkt deren Sichtbarkeit auf die Datei,
wo sie definiert sind. D.h. man kann diese dann nicht in einer anderen Datei
nutzen, nicht mal mit <code>extern</code> ...</p>
<p><code>static</code> für Funktionen beschränkt deren Sichtbarkeit ebenfalls auf die Datei,
wo sie definiert sind. Man kann sie dann nur in anderen Funktionen, die
ebenfalls in der selben Datei definiert werden, nutzen. In anderen Dateien sind
die <code>static</code> Funktionen <em>nicht</em> sichtbar. D.h. es macht auch keinen Sinn, sie
in einer Header-Datei zu deklarieren! (In der Praxis liefert der gcc dann sogar
einen Fehler!). Das ist mit <code>private</code> Methoden vergleichbar.</p>
<h3 id="globale-konstanten">Globale Konstanten</h3>
<h4 id="in-c-funktionieren-globale-konstanten-wie-globale-variablen">In C funktionieren globale Konstanten wie globale Variablen</h4>
<ul>
<li>
<p><strong>Definition</strong> in einer Übersetzungseinheit ohne &quot;<code>extern</code>&quot;</p>
<p>=&gt; Definition als &quot;<code>extern</code>&quot; wird in C mit einer Warnung quittiert!</p>
</li>
<li>
<p>Nutzung in anderen Übersetzungseinheiten durch (erneute)
<strong>Deklaration</strong> als &quot;<code>extern</code>&quot;</p>
</li>
<li>
<p>Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei main.c ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span>;       <span style="color:#75715e">// Definition OHNE &#34;extern&#34; (C)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fkt_a1</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei a.c ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI;    <span style="color:#75715e">// (erneute) Deklaration mit &#34;extern&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt_a1</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<h4 id="in-c-sind-globale-konstanten-per-default-nur-in-ihrer-definitionsdatei-sichtbar">In C++ sind globale Konstanten per Default nur in ihrer Definitionsdatei sichtbar!</h4>
<ul>
<li>
<p>Abhilfe: Definieren <em>und</em> Deklarieren mit <code>extern</code></p>
</li>
<li>
<p>Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei main.cpp ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span>;    <span style="color:#75715e">// Definition MIT &#34;extern&#34; (C++)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    fkt_a1();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei a.cpp ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI;        <span style="color:#75715e">// (erneute) Deklaration mit &#34;extern&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt_a1</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<h4 id="alternativ-in-beiden-sprachen-konstanten-vorwärts-deklarieren">Alternativ: In beiden Sprachen Konstanten vorwärts deklarieren</h4>
<p>Folgende Definition und (Vorwärts-) Deklaration der Konstanten <code>PI</code>
funktioniert sowohl in C als auch in C++:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei main.c ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI;    <span style="color:#75715e">// (Vorwärts-) Deklaration mit &#34;extern&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span>;       <span style="color:#75715e">// Definition OHNE &#34;extern&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fkt_a1</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* ======== Datei a.c ======== */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> PI;    <span style="color:#75715e">// (erneute) Deklaration mit &#34;extern&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt_a1</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> PI;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="automatisieren-der-buildvorgänge-gnu-make">Automatisieren der Buildvorgänge: GNU Make</h3>
<h4 id="makefile-textdatei-mit-regeln-für-das-programm-make">Makefile: Textdatei mit Regeln für das Programm <code>make</code></h4>
<ul>
<li>Abläufe automatisieren: Kompilieren, testen, Pakete bauen, aufräumen, ...</li>
<li>Java: <code>ant</code>, C/C++: <code>make</code></li>
<li>Achtung: Verschiedene Make-Dialekte! Wir nutzen <em>GNU Make</em>!</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-makefile" data-lang="makefile"><span style="display:flex;"><span> <span style="color:#75715e"># Kommentar</span>
</span></span><span style="display:flex;"><span> Ziel1: AbhaengigkeitenListe1
</span></span><span style="display:flex;"><span>     Aktionen1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> Ziel2: AbhaengigkeitenListe2
</span></span><span style="display:flex;"><span>     Aktionen2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e"># ... und so weiter :-)</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e"># ACHTUNG:</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e"># Vor den Aktionen &lt;TAB&gt; benutzen, keine Leerzeichen!!!</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e"># Vorsicht mit Editor-Einstellungen!</span>
</span></span></code></pre></div>
<p>Bedeutung: Um das Ziel <code>Ziel1</code> zu erzeugen, müssen alle Abhängigkeiten der Liste
<code>AbhaengigkeitenListe1</code> erfüllt sein. Dann werden die Aktionen in <code>Aktionen1</code> durchgeführt,
um <code>Ziel1</code> zu erzeugen. Aber nur, falls das Ziel <code>Ziel1</code> nicht existiert oder veraltet ist!</p>
<p>Falls die Abhängigkeiten nicht erfüllt sind, wird nach Regeln gesucht, um diese zu erzeugen.
Das bedeutet, dass u.U. zunächst weitere Targets &quot;gebaut&quot; werden, bevor die Aktionenliste
ausgeführt wird.</p>
<p>Die Ziele und Abhängigkeiten sind i.d.R. Dateien (müssen es aber nicht sein).</p>
<h4 id="makefiles-fiktives-beispiel">Makefiles: Fiktives Beispiel</h4>
<ul>
<li>
<p>Annahme: Projekt besteht aus der Datei <code>main.cpp</code>, daraus soll das Programm
&quot;tollesProgramm&quot; erzeugt werden</p>
</li>
<li>
<p>Passendes Makefile:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-makefile" data-lang="makefile"><span style="display:flex;"><span>CXXFLAGS <span style="color:#f92672">=</span> -Wall
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> all
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> tollesProgramm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tollesProgramm</span><span style="color:#f92672">:</span> main.o
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">$(</span>CXX<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>LDFLAGS<span style="color:#66d9ef">)</span> $&lt; <span style="color:#66d9ef">$(</span>LDLIBS<span style="color:#66d9ef">)</span> -o $@
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">%.o</span><span style="color:#f92672">:</span> %.cpp
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">$(</span>CXX<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>CXXFLAGS<span style="color:#66d9ef">)</span> -c $&lt; -o $@
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> clean
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clean</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    rm -rf tollesProgramm *.o *.~
</span></span></code></pre></div>
</li>
</ul>
<p>Bedeutung: Um das Ziel <code>all</code> zu erzeugen, muss die Abhängigkeit <code>tollesProgramm</code> erfüllt sein.
Beachten Sie, dass im Beispiel <code>all</code> kein Dateiname ist, <code>tollesProgramm</code> dagegen schon.</p>
<p>Um <code>tollesProgramm</code> zu erzeugen, muss die Datei <code>main.o</code> vorhanden sein. Falls sie es nicht
ist, wird sie mit Hilfe des dritten Targets erzeugt. Das <code>%</code> ist dabei ein Patternmatcher,
d.h. wenn nach einem <code>main.o</code> gesucht ist, matcht <code>%.o</code> (das <code>%</code> bindet sich dabei an &quot;main&quot;)
und auf der rechten Seite des Targets steht als Abhängigkeit <code>main.cpp</code>.</p>
<p>Die Variablen <code>CXX</code>, <code>CXXFLAGS</code>, <code>LDFLAGS</code> und <code>LDLIBS</code> sind vordefinierte Variablen:</p>
<ul>
<li><code>CXX</code>: C++-Compiler, Default: <code>g++</code></li>
<li><code>CXXFLAGS</code> Extra Flags für den C++-Compiler (nur für Kompilieren)</li>
<li><code>LDFLAGS</code>: Extra Flags, die für das Linken genutzt werden (Beispiel: <code>-L.</code>; <strong>nicht</strong> <code>-lm</code>)</li>
<li><code>LDLIBS</code>: Bibliotheken, die für das Linken genutzt werden (Beispiel: <code>-lm -lfoo</code>; <strong>nicht</strong> <code>-L.</code>)</li>
</ul>
<p>Die Variablen <code>$&lt;</code>, <code>$^</code> und <code>$@</code> lösen auf das Ziel bzw. die Abhängigkeiten eines Targets auf:</p>
<ul>
<li><code>$&lt;</code> =&gt; gibt die erste Abhängigkeit an</li>
<li><code>$^</code> =&gt; gibt alle Abhängigkeiten an</li>
<li><code>$@</code> =&gt; gibt das Ziel an</li>
</ul>
<p>Falls die Datei <code>tollesProgramm</code> nicht existiert oder aber älter ist als <code>main.o</code>, wird die
Regel des Targets <code>tollesProgramm</code> ausgeführt, um die Datei <code>tollesProgramm</code> zu erzeugen:
<code>g++ main.o -o tollesProgramm</code>.</p>
<p><strong>Hinweis</strong>: Das Beispiel entspricht den minimalen Kenntnissen, die Sie über Make haben müssen.</p>
<h4 id="makefiles-typische-aufrufe">Makefiles: Typische Aufrufe</h4>
<ul>
<li>
<p><code>make</code>
Sucht nach Datei mit dem Namen &quot;GNUmakefile&quot;, &quot;makefile&quot; oder &quot;Makefile&quot; und erzeugt das
erste Ziel in der Datei</p>
<p>Konvention: Das erste Ziel hat den Namen <code>all</code></p>
</li>
<li>
<p><code>make -f &lt;datei&gt;</code>
Sucht die Datei mit dem angegebenen Namen, erzeugt das erste Ziel in der Datei</p>
</li>
<li>
<p><code>make -f &lt;datei&gt; &lt;ziel&gt;</code>
Sucht die Datei mit dem angegebenen Namen, erzeugt das Ziel <code>&lt;ziel&gt;</code></p>
</li>
<li>
<p><code>make &lt;ziel&gt;</code>
Sucht nach Datei mit dem Namen &quot;GNUmakefile&quot;, &quot;makefile&quot; oder &quot;Makefile&quot; und erzeugt das
Ziel <code>&lt;ziel&gt;</code></p>
</li>
</ul>
  </div>
</div>
  </div>
</div>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>C/C++ sind enge Verwandte: kompilierte Sprachen, C++ fügt OO hinzu</p>
</li>
<li>
<p>Funktionsweise einfachster Make-Files</p>
</li>
<li>
<p>Wichtigste Unterschiede zu Java</p>
<ul>
<li>Kontrollfluss wie in Java</li>
<li>Basisdatentypen vorhanden</li>
<li>Typ-Modifikatoren zur Steuerung des Speicherbedarfs/Wertebereich</li>
<li>Integer können im booleschen Kontext ausgewertet werden</li>
<li>Operator <code>sizeof</code> zur Bestimmung des Speicherbedarfs</li>
<li>Alias-Namen für existierende Typen mit <code>typedef</code> definierbar</li>
<li>Funktionen mit Default-Parametern und Überladung</li>
</ul>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<ul>
<li>
<p>Wie groß ist der Bereich der Basisdatentypen (Speicherbedarf, Zahlenbereich)?
Wie können Sie das feststellen?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> a;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> b;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> x[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> y[] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">long</span> <span style="color:#66d9ef">long</span> z[<span style="color:#ae81ff">7</span>] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">3</span>};</span></span></code></pre></div>
</li>
<li>
<p>Erklären Sie den Unterschied <code>sizeof(x)</code> vs. <code>sizeof(x)/sizeof(x[0])</code>!</p>
</li>
<li>
<p>Warum ist der folgende Code-Schnipsel gefährlich?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (i<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Vorsicht&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Vorsicht (auch hier)&#34;)</span>;</span></span></code></pre></div>
</li>
<li>
<p>Limits kennen: Datentypen, Wertebereiche</p>
<p>Schreiben Sie ein C-Programm, welches die größtmögliche <code>unsigned int</code> Zahl
auf Ihrem System berechnet.</p>
<p>Verwenden Sie hierzu <strong>nicht</strong> die Kenntnis der systemintern verwendeten Bytes
(<code>sizeof</code>, ...). Nutzen Sie auch nicht die Konstanten/Makros/Funktionen aus
<code>limits.h</code> oder <code>float.h</code> oder anderen Headerdateien!</p>
</li>
<li>
<p>Erklären Sie die Probleme bei folgendem Code-Schnipsel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>);</span></span></code></pre></div>
</li>
<li>
<p>Erklären Sie die Probleme bei folgendem Code-Schnipsel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">maximum</span>(<span style="color:#66d9ef">double</span>, <span style="color:#66d9ef">double</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> maximum(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2.2</span>) <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Erklären Sie den Unterschied zwischen</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> a;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>und</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Pointer und Referenzen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Es gibt viele Arten Speicher, die sich vor allem in der Größe und Geschwindigkeit unterscheiden
(Cache, RAM, SSD, Festplatte, ...). Der Kernel stellt jedem Prozess einen linearen Adressraum
bereit und abstrahiert dabei von den darunter liegenden physikalischen Speichermedien (es gibt
eine Abbildung auf die jeweiligen Speichermedien durch die MMU, dies ist aber nicht Bestandteil
dieses Kurses).</p>
<p>Den virtuellen Speicher kann man grob in drei Segmente aufteilen: Text (hier befindet sich der
Programmcode des Prozesses), Stack (automatische Verwaltung, für Funktionsaufrufe und lokale
Variablen) und Heap (Verwaltung durch den Programmierer, dynamische Bereitstellung von Speicher
während der Laufzeit des Programms).</p>
<p>Pointer sind Variablen, deren <strong>Wert als Adresse</strong> (im virtuellen Speicher) interpretiert wird.
Pointer können auf andere Objekte bzw. Variablen zeigen: Der Adressoperator &quot;<code>&amp;</code>&quot; liefert die
Adresse eines Objekts im virtuellen Speicher, diese kann einem Pointer zugewiesen werden (der
Wert des Pointers ist dann die zugewiesene Adresse). Pointer können mit &quot;<code>*</code>&quot; dereferenziert
werden, d.h. es wird an der Speicherstelle im virtuellen Speicher nachgeschaut, deren Adresse
im Pointer gespeichert ist. Dadurch erfolgt der Zugriff auf das verwiesene Objekt. (Dies hat
noch nichts mit <em>dynamischer Speicherverwaltung</em> zu tun!) Die Deklaration eines Pointers erfolgt
mit einem <code>*</code> zwischen Typ und Pointername: <code>int *p;</code>. Da Pointer normale Variablen sind, unterliegen
Pointer-Variablen den üblichen Gültigkeitsbedingungen (Scopes).</p>
<p>In C++ gibt es zusätzlich <strong>Referenzen</strong>. Diese stellen Alias-Namen für ein Objekt (oder eine Variable)
dar, d.h. ein Zugriff auf eine Referenz bewirkt den direkten Zugriff auf das verbundene Objekt.
Referenzen müssen bei der Deklaration initialisiert werden (<code>Typ &amp;ref = obj;</code>) und sind dann
fest mit diesem Objekt verbunden.</p>
<p>In C und C++ werden Funktionsparameter immer per Call-by-Value übergeben: Der Wert des Arguments wird
in die lokale Variable des Funktionsparameters kopiert. Wenn ein Pointer übergeben wird, wird entsprechend
der Wert des Pointers kopiert, also die gespeicherte Adresse. Mit der Adresse eines Objekts kann man
aber auch in der Funktion direkt auf dieses Objekt zugreifen und dieses auslesen und verändern, d.h.
durch die Übergabe eines Pointers hat man zwar immer noch Call-by-Value (die Adresse wird kopiert), die
Wirkung ist aber wie bei Call-by-Reference (also als ob eine Referenz auf das Objekt übergeben wurde).
Bei der Verwendung von C++-Referenzen hat man dagegen echtes Call-by-Reference.</p>
<p>Zur Laufzeit kann man Speicher auf dem Heap reservieren (<em>allozieren</em>). Im Gegensatz zu Speicher auf dem
Stack ist man selbst auch für die Freigabe des reservierten Speichers zuständig - wenn man dies nicht beachtet,
läuft irgendwann der Heap voll. Allokation und Freigabe kann entweder mit den C-Funktionen <code>malloc</code> und <code>free</code>
erfolgen oder mit den C++-Operatoren <code>new</code> und <code>delete</code>. Mischen Sie niemals nie <code>malloc()</code>/<code>free()</code> mit
<code>new</code>/<code>delete</code>!</p>
<p>Zwischen Pointern und Arrays gibt es eine enge Verwandschaft. Die einzelnen Elemente eines Arrays
werden vom Compiler direkt aufeinanderfolgend im Speicher angeordnet, der Array-Name ist wie
ein (konstanter) Pointer auf das erste Element. Tatsächlich übersetzt der Compiler Indexzugriffe
für ein Array in die passende Pointerdereferenzierung: <code>a[i]</code> wird zu <code>*(a+i)</code>. Ein Pointer kann
wiederum auch auf das erste Element eines zusammenhängenden Speicherbereichs zeigen, etwa wenn man
über <code>malloc</code> Speicherplatz für mehrere Elemente anfordert. Da der Compiler aus einem Indexzugriff
ohnehin die Pointerdereferenzierung macht, könnte man so einen Pointer auch per Indexzugriff
abfragen. Dies ist aber gefährlich: Es funktioniert auch, wenn der Pointer nur auf <em>ein</em> anderes
Objekt zeigt und nicht auf einen Speicherbereich ... Ein Arrayname wird vom Compiler fest der
ersten Speicheradresse des Arrays zugeordnet und kann nicht verändert werden, der Inhalt eines
(nicht-konstanten) Pointer dagegen schon (der Pointer selbst wird auch fest im Speicher angelegt).</p>
<p>Pointer haben einen Typ: Die Pointerarithmetik berücksichtigt die Speicherbreite des Typs! Damit
springt man mit <code>ptr+1</code> automatisch zum nächsten Objekt und nicht notwendigerweise zum nächsten
Byte.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/1Tzkp1SzVk0' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>C++: Pointer und Referenzen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K1) Virtueller Speicher, Segmente: Text, Data, Stack</li> <li>(K2) Pointer sind Variablen, Wert wird als Adresse interpretiert</li> <li>(K2) Pointer als spezielle Variablen: Wert des Pointers als Adresse interpretieren</li> <li>(K2) Initialisierung und Scopes bei Pointern</li> <li>(K3) Zuweisen einer Adresse an einen Pointer</li> <li>(K3) Dereferenzierung eines Pointers und Zugriff auf das referenzierte Element</li> <li>(K3) Pointer als Funktionsparameter: Call-by-Reference mit Hilfe von Pointern</li> <li>(K2) Memory Leaks und Stale Pointer und deren Vermeidung</li> <li>(K3) C++-Operatoren <code>new</code> und <code>delete</code>, Unterschied zu <code>malloc()</code>, <code>free()</code></li> <li>(K3) Referenzen in C++ (Deklaration, Initialisierung, Nutzung)</li> <li>(K3) Zusammenhang und Unterschied Pointer und Arrays</li> <li>(K3) Rechnen mit Pointern, Berücksichtigung des Typs</li></ul>
  </div>
</div>




    <h2 id="virtueller-speicher">Virtueller Speicher</h2>
<pre><code>            +-----------------------------------------+
            |          Text                           | 0x0000
            |                                         |    |
            |-----------------------------------------|    |
            |          Heap (Data)                    |    |
            |                                         |    |
            |--------------------+--------------------|    |
            |                    |                    |    |
            |                    v                    |    |
            |                                         |    |
            |                                         |    v
            |                    ^                    |
            |                    |                    |
            |--------------------+--------------------|
            |                                         |
            |          Stack                          |
            +-----------------------------------------+
</code></pre>
<ul>
<li>Kernel weist jedem Prozess seinen eigenen virtuellen Speicher zu</li>
<li>Linearer Adressbereich, beginnend mit Adresse 0 bis zu einer maximalen Adresse</li>
<li>Verwaltung durch MMU (<em>Memory Management Unit</em>)
<ul>
<li>MMU bildet logische Adressen aus virtuellem Speicher auf den physikalischen Speicher ab</li>
<li>Transparent für den Prozess</li>
</ul>
</li>
</ul>
<h3 id="segmente-des-virtuellen-speichers-text-read-only">Segmente des virtuellen Speichers: Text (read-only)</h3>
<ul>
<li>Programm Code</li>
<li>Konstanten, String Literale</li>
</ul>
<p>zusätzlich (nicht in Abbildung dargestellt):</p>
<ul>
<li>Bereich initialisierter Daten (globale und static Variablen (explizit initialisiert))</li>
<li>Bereich uninitialisierter Daten (globale und static Variablen (uninitialisiert) =&gt; Wert 0)</li>
</ul>
<h3 id="segmente-des-virtuellen-speichers-stack">Segmente des virtuellen Speichers: Stack</h3>
<ul>
<li>Dynamisch wachsend und schrumpfend</li>
<li>Stackframe je Funktionsaufruf:
<ul>
<li>Lokale Variablen (&quot;automatische&quot; Variablen)</li>
<li>Argumente und Return-Werte</li>
</ul>
</li>
<li><strong>Automatische Pflege</strong>
<ul>
<li>Nach Funktionsrückkehr wird der Stackpointer (&quot;Top of Stack&quot;) weiter gesetzt</li>
<li>Dadurch &quot;Bereinigung&quot;: Speicher der lokalen Variablen wird freigegeben</li>
</ul>
</li>
</ul>
<h3 id="segmente-des-virtuellen-speichers-data-heap">Segmente des virtuellen Speichers: Data (Heap)</h3>
<ul>
<li>Dynamisch wachsend und schrumpfend</li>
<li>Bereich für dynamischen Speicher (Allokation während der Laufzeit)</li>
<li>Zugriff und Verwaltung aus <span class='alert'>laufendem</span> Programm =&gt; <strong>Pointer</strong>
<ul>
<li><code>malloc()</code>/<code>calloc()</code>/<code>free()</code> (C)</li>
<li><code>new</code>/<code>delete</code> (C++)</li>
<li>typischerweise <span class='alert'><strong>Pointer</strong></span></li>
</ul>
</li>
<li><strong>KEINE automatische Pflege - Programmierer ist selbst verantwortlich!</strong></li>
</ul>
<h2 id="konzept-eines-pointers">Konzept eines Pointers</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>iptr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;  <span style="color:#75715e">/* Wert von iptr ist gleich Adresse von i */</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>iptr <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;  <span style="color:#75715e">/* Deferenzierung von iptr =&gt; Veränderung von i */</span></span></span></code></pre></div>
<pre><code>        Variable    Speicheraddresse    Inhalt

                                        |          |
                                        +----------+
        i           10125               | 99       |  &lt;--+
                                        +----------+     |
                                        |          |     |
                    ....                 ....            |
                                        |          |     |
                                        +----------+     |
        iptr        27890               | 10125    |  ---+
                                        +----------+
                                        |          |
</code></pre>
<h3 id="pointer-sind-variablen">Pointer sind Variablen</h3>
<ul>
<li>haben Namen und Wert</li>
<li>können mit Operatoren verändert werden</li>
<li>sind einer Speicheradresse im virtuellen Speicher zugeordnet</li>
</ul>
<p>Im Beispiel:</p>
<ul>
<li>Variable <code>i</code>:
<ul>
<li>Name: &quot;i&quot;</li>
<li>Wert: 99</li>
<li>Speicherzelle (Adresse): 10125</li>
</ul>
</li>
<li>Variable <code>iptr</code>:
<ul>
<li>Name: &quot;iptr&quot;</li>
<li>Wert: 10125</li>
<li>Speicherzelle (Adresse): 27890</li>
</ul>
</li>
</ul>
<h3 id="pointer-sind-besondere-variablen">Pointer sind besondere Variablen</h3>
<div class='center'>
<p>Der <span class='alert'>Wert</span> eines Pointers wird als <span class='alert'><strong>Adresse</strong></span> im Speicher behandelt</p>
</div>
<p>Der Wert von <code>iptr</code> ist nicht ein beliebiger Integer, sondern eine Adresse. In
diesem Fall handelt es sich um die Adresse im virtuellen Speicher, wo die
Variable <code>i</code> abgelegt ist.</p>
<p>Wirkung/Interpretation: Variable <code>iptr</code> &quot;zeigt&quot; auf die Adresse von Variable <code>i</code>.</p>
<h3 id="pointer-und-adressen-syntax">Pointer und Adressen (Syntax)</h3>
<ul>
<li>
<p>Deklaration</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>Typ <span style="color:#f92672">*</span> Name;</span></span></code></pre></div>
</li>
<li>
<p>Zuweisung einer Adresse über den <code>&amp;</code>-Operator:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>iptr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;  <span style="color:#75715e">/* Wert von iptr ist gleich Adresse von i */</span></span></span></code></pre></div>
</li>
<li>
<p><code>iptr</code> ist ein Pointer auf eine (beliebige) Speicherzelle mit Inhalt vom Typ <code>int</code></p>
</li>
<li>
<p>Nach Zuweisung: <code>iptr</code> ist ein Pointer auf die Speicherzelle der Variablen <code>i</code></p>
</li>
</ul>
<h3 id="dereferenzierung-zugriff-auf-ziel">Dereferenzierung: Zugriff auf Ziel</h3>
<ul>
<li>
<p>Dereferenzierung mit <code>*</code>:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>iptr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>iptr <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;  <span style="color:#75715e">// Zugriff auf verwiesene Speicherzelle i
</span></span></span></code></pre></div>
</li>
</ul>
<h3 id="pointer-schreibweisen">Pointer: Schreibweisen</h3>
<ul>
<li>
<p>Position des <code>*</code> zwischen Typ und Name beliebig</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* aequivalente Schreibweisen */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> iptr;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span> iptr;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>iptr;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* Vorsicht Mehrfachdeklaration */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> iptr, ptr2;      <span style="color:#75715e">/* ptr2 ist nur ein int! */</span></span></span></code></pre></div>
</li>
<li>
<p>Dereferenzierung von Pointern auf Klassen/Structs: Operator <code>-&gt;</code></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* aequivalente Schreibweisen */</span>
</span></span><span style="display:flex;"><span>(<span style="color:#f92672">*</span>iptr).attribut;
</span></span><span style="display:flex;"><span>iptr<span style="color:#f92672">-&gt;</span>attribut;</span></span></code></pre></div>
</li>
</ul>
<h3 id="pointer-zuweisungen-an-andere-pointer">Pointer: Zuweisungen an andere Pointer</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">99</span>, <span style="color:#f92672">*</span>iptr, <span style="color:#f92672">*</span>ptr2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>iptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ptr2 <span style="color:#f92672">=</span> iptr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ptr2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;</span></span></code></pre></div>
<p>Jetzt zeigen zwei Pointer auf die Speicherzelle von Variable <code>i</code>: <code>iptr</code> (wegen <code>iptr = &amp;i</code>), und
weil der Wert von <code>iptr</code> in <code>ptr2</code> kopiert wurde (<code>ptr2 = iptr</code>), zeigt nun auch <code>ptr2</code> auf <code>i</code>.</p>
<p>Der Wert von <code>iptr</code> ist die Adresse von <code>i</code>. Wenn dieser Wert kopiert oder zugewiesen wird, ändert
sich an dieser Adresse nichts. <code>ptr2</code> bekommt diesen Wert zugewiesen, d.h. bei einer Dereferenzierung
von <code>ptr2</code> würde auf die Adresse von <code>i</code> zugriffen werden und dort gelesen/geschrieben werden.</p>
<h3 id="pointer-und-scopes">Pointer und Scopes</h3>
<div class='center'>
<p><span class='alert'><strong>Nicht auf Variablen außerhalb ihres Scopes zugreifen!</strong></span></p>
</div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>ip <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ip <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span>{  <span style="color:#75715e">/* neuer Block */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">7</span>;
</span></span><span style="display:flex;"><span>    ip <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>j;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ip <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;  <span style="color:#75715e">/* AUTSCH!!! */</span></span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">murks</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span>i;  <span style="color:#75715e">/* AUTSCH!!! */</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="hotelzimmer-analogie">Hotelzimmer-Analogie</h3>
<ul>
<li>Wenn Sie in ein Hotel einchecken, bekommen Sie den Schlüssel zu <strong>Ihrem</strong> Zimmer
<ul>
<li><em>Pointer</em> == Schlüssel</li>
<li><em>Variable auf die Pointer zeigt</em> == Zimmer</li>
</ul>
</li>
<li>Wenn Sie auschecken, geben Sie normalerweise Ihr Zimmer auf und den Schlüssel ab
<ul>
<li>Pointer wird ungültig</li>
<li>Variable wird ungültig</li>
</ul>
</li>
<li>Wenn Sie beim Auschecken den Schlüssel nicht abgeben, gehört das Zimmer
dennoch nicht mehr Ihnen
<ul>
<li>Sie haben noch den Pointer</li>
<li>Die Variable, auf die der Pointer zeigt, ist ungültig</li>
</ul>
</li>
<li>Wenn Sie jetzt auf das Zimmer gehen, kommen Sie (evtl.) noch rein
<ul>
<li>Evtl. ist das Zimmer noch nicht wieder belegt, und Sie finden Ihr vergessenes Handy</li>
<li>Bei Dereferenzierung erhalten Sie noch den alten Wert der Variablen
<ul>
<li>Evtl. wurde das Zimmer bereits wieder vergeben =&gt; Sie &quot;brechen&quot; bei
einem Fremden ein!</li>
<li>Bei Dereferenzierung greifen Sie auf &quot;fremde&quot; Variablen (Speicherbereiche) zu!</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="pointer-und-initialisierung">Pointer und Initialisierung</h3>
<div class='center'>
<p>Pointer werden vom Compiler <span class='alert'><strong>nicht</strong></span> initialisiert!</p>
</div>
<ul>
<li>Zeigen ohne explizite Initialisierung auf <span class='alert'><strong>zufällige</strong></span> Adresse</li>
<li>Dereferenzierung uninitialisierter Pointer problematisch</li>
</ul>
<p><strong>Explizite Null-Pointer</strong>:</p>
<ul>
<li>Wert 0 zuweisen</li>
<li>Besser: Symbolische Konstante <code>NULL</code> aus <code>stdio.h</code> bzw. <code>cstdio</code> bzw. in C++ <code>nullptr</code></li>
</ul>
<h2 id="speicherverwaltung">Speicherverwaltung</h2>
<ul>
<li>
<p>C: <span class='alert'><strong>Funktionen</strong></span> zur Verwaltung dynamischen Speichers: <code>malloc()</code>,
<code>free()</code>, ... (in <code>&lt;stdlib.h&gt;</code>)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">size_t</span> size)</span></span></code></pre></div>
<ul>
<li>Alloziert <code>size</code> Bytes auf dem Heap und liefert Adresse zurück</li>
<li>Pointer auf <code>void</code>, da Typ unbekannt - vor Nutzung auf korrekten Typ umcasten</li>
<li>Im Fehlerfall wird ein Null-Pointer zurückgeliefert: <code>NULL</code></li>
<li>Achtung: Speicher ist nicht initialisiert!</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>pa <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#ae81ff">4</span><span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">free</span>(p);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">free</span>(pa);</span></span></code></pre></div>
</li>
<li>
<p>C++: <span class='alert'><strong>Operatoren</strong></span>: <code>new</code> und <code>delete</code></p>
<ul>
<li>Direkte Angabe des Zieltyps</li>
<li>Rückgabe eines Pointers auf diesen Typ</li>
<li>Exception, wenn kein Speicher verfügbar</li>
<li>Form mit <code>[]</code>-Operator für Arrays</li>
<li>Mit <code>new</code> allozierter Speicher muss mit <code>delete</code> freigegeben werden</li>
<li>Mit <code>new []</code> allozierter Speicher muss mit <code>delete []</code> freigegeben werden</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>pa <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> p;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> [] pa;</span></span></code></pre></div>
</li>
</ul>
<h3 id="speicher-allozieren-standardidiom">Speicher allozieren: Standardidiom</h3>
<p>In C müssen Sie die Rückgabe von <code>malloc</code> prüfen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>i, <span style="color:#f92672">*</span>x;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>i <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#f92672">*</span>x));   <span style="color:#75715e">/* Stern wichtig */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>i) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* Fehlerbehandlung */</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* mach was */</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>In C++ bekommen Sie eine Exception, falls <code>new</code> nicht erfolgreich war:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* mach was */</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">catch</span> (...) { <span style="color:#75715e">/* Fehlerbehandlung */</span> }</span></span></code></pre></div>
<p><em>Hinweis</em>: Pointer-Variablen <code>i</code> und <code>x</code> liegen auf Stack, angeforderter Speicher im Heap!</p>
<h3 id="pointer-und-typen">Pointer und Typen</h3>
<ul>
<li>Typ eines Zeigers relevant, wird vom Compiler geprüft</li>
<li>Zuweisung ohne expliziten Cast nur an allgemeinere Typen/Oberklassen
<ul>
<li>
<p>Jeder Zeiger auf Typ <code>T</code> kann automatisch zum <code>void</code>-Pointer
konvertiert werden</p>
</li>
<li>
<p>Für Zuweisung von <code>void</code>-Pointern an Pointer auf Typ <code>T</code> expliziter
Cast nach <code>T*</code> nötig (siehe auch nachfolgenden Hinweis zu C11)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>cp;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>vp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vp <span style="color:#f92672">=</span> cp;          <span style="color:#75715e">/* OK */</span>
</span></span><span style="display:flex;"><span>cp <span style="color:#f92672">=</span> vp;          <span style="color:#75715e">/* problematisch */</span>
</span></span><span style="display:flex;"><span>cp <span style="color:#f92672">=</span> (<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>) vp; <span style="color:#75715e">/* OK */</span></span></span></code></pre></div>
</li>
</ul>
</li>
</ul>
<h3 id="fallstricke-dynamischer-speicherverwaltung">Fallstricke dynamischer Speicherverwaltung</h3>
<h4 id="nur-new-und-delete-kombinieren-bzw-malloc-und-free">Nur new und delete kombinieren bzw. malloc und free</h4>
<ul>
<li>
<p><code>delete</code> darf nur auf mit <code>new</code> erzeugte Objekte angewendet werden</p>
<ul>
<li>Vorsicht bei Pointern auf Stack-Variablen!</li>
<li><span class='alert'><strong>NIE</strong></span> mischen mit <code>malloc()</code>/<code>calloc()</code>/<code>free()</code>!</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) malloc(<span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> p;  <span style="color:#75715e">// FEHLER! Absturzgefahr
</span></span></span></code></pre></div>
</li>
</ul>
<h4 id="delete-genau-nur-bei-new">delete[] genau nur bei new[]</h4>
<ul>
<li>
<p><code>delete[]</code> darf nur auf mit <code>new[]</code> erzeugte Objekte angewendet werden
(und <span class='alert'><strong>muss</strong></span> dort auch angewendet werden)</p>
<p><code>delete</code> auf mit <code>new[]</code> erzeugtes Array würde nur
erstes Element freigeben!</p>
</li>
</ul>
<h4 id="vorsicht-mit-pointern-auf-lokale-variablen">Vorsicht mit Pointern auf lokale Variablen</h4>
<ul>
<li>
<p>Funktioniert technisch, ist aber gefährlich:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">murks</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span>i;  <span style="color:#75715e">/* SO NICHT: Pointer auf lokale Variable! */</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Etwas besser:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">wenigerMurks</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>)); <span style="color:#75715e">/* neuer Speicher */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>p<span style="color:#f92672">=</span><span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p; <span style="color:#75715e">/* das geht */</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<div style="text-align: right;"><span class="badge cstyle default"><span class="badge-content">Warum nur &quot;etwas besser&quot;?</span></span></div>
<p>Jetzt haben Sie aber ein neues Problem: Der Aufrufer der Funktion muss wissen,
dass diese Speicher alloziert und muss sich selbst um die Freigabe kümmern.
Dies ist unschön, da die Allokation und Freigabe in unterschiedlicher
Verantwortung liegen! Dadurch können sehr schnell Fehler passieren.</p>
<p>Besser wäre, wenn der Aufrufer einen Pointer übergibt, mit dem dann in der
Funktion gearbeitet wird. Dann liegt die Verantwortung für die Erstellung und
Freigabe des Pointers komplett in der Hand des Aufrufers.</p>
<h4 id="memory-leaks">Memory Leaks</h4>
<ul>
<li>
<p>Pointer-Variablen unterliegen den Gültigkeitsregeln für Variablen</p>
</li>
<li>
<p>Mit <code>malloc()</code> reservierter Speicher existiert bis Programmende</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>i;
</span></span><span style="display:flex;"><span>    i <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#f92672">*</span>i));
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* hier existiert die Variable i nicht mehr */</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* aber der Speicher auf dem Heap bleibt belegt */</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* ist aber nicht mehr zugreifbar -&gt; SPEICHERLOCH! */</span></span></span></code></pre></div>
</li>
</ul>
<h4 id="double-free-und-stale-pointer">Double Free und Stale Pointer</h4>
<ul>
<li><code>free()</code> darf nur <span class='alert'>einmal pro Objekt</span> aufgerufen werden
<ul>
<li>Hintergrund: Intern wird eine Freispeicherliste verwaltet</li>
</ul>
</li>
<li>Nach <code>free()</code> ist der Zeiger undefiniert:
<ul>
<li>Zeigt immer noch in den Heap (alte Adresse!)</li>
<li>Ist nicht gleich <code>NULL</code> oder 0</li>
<li>Zugriff ist möglich, aber gefährlich: Speicher kann wieder vergeben und
überschrieben werden (<em>Hotelzimmer-Analogie</em>)</li>
</ul>
</li>
<li>Mehrere Pointer auf ein Objekt: Einmal <code>free()</code> reicht!
<ul>
<li>Die anderen Pointer dürfen anschließend aber auch nicht mehr
dereferenziert werden (<span class='alert'>stale/dangling pointer</span>)</li>
</ul>
</li>
</ul>
<h4 id="beispiel-stale-pointer">Beispiel Stale Pointer</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>i, <span style="color:#f92672">*</span>k; i <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#f92672">*</span>i)); k <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">free</span>(i);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">free</span>(i); <span style="color:#75715e">/* EINMAL reicht! */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>k <span style="color:#f92672">=</span> <span style="color:#ae81ff">42</span>; <span style="color:#75715e">/* Speicher ist bereits frei - stale pointer */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">free</span>(k); <span style="color:#75715e">/* Speicher ist bereits frei - double free */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>; <span style="color:#75715e">/* Speicher ist bereits frei */</span></span></span></code></pre></div>
<p><em>Anmerkung</em>: Anwendung auf <code>NULL</code>-Pointer bewirkt nichts und ist unschädlich</p>
<h4 id="dereferenzieren-von-bad-pointern">Dereferenzieren von &quot;Bad Pointern&quot;</h4>
<p>Der klassische Scanf-Bug :)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">scanf</span>(<span style="color:#e6db74">&#34;%d&#34;</span>, i);</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-1d6f0f83c12e7123caadba29873a1dcb" aria-controls="R-expandcontent-1d6f0f83c12e7123caadba29873a1dcb">
  <label class="expand-label" for="R-expand-1d6f0f83c12e7123caadba29873a1dcb">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-1d6f0f83c12e7123caadba29873a1dcb" class="expand-content">
<p>Tipp: <code>i</code> ist <strong>kein</strong> Pointer :)</p>
  </div>
</div>
<h4 id="auslesen-von-nicht-initialisiertem-speicher">Auslesen von nicht-initialisiertem Speicher</h4>
<p>Wenn Programmierer denken, dass irgendwer den Heap zwischendurch immer mal
wieder auf 0 setzt ...</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* return y = Ax */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">matvec</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">**</span>A, <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x, <span style="color:#66d9ef">int</span> N) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>y <span style="color:#f92672">=</span> <span style="color:#a6e22e">malloc</span>(N<span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span>N; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; j<span style="color:#f92672">&lt;</span>N; j<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            y[i] <span style="color:#f92672">+=</span> A[i][j] <span style="color:#f92672">*</span> x[j];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> y;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-60ed281e43337660633cec8b2efabb0f" aria-controls="R-expandcontent-60ed281e43337660633cec8b2efabb0f">
  <label class="expand-label" for="R-expand-60ed281e43337660633cec8b2efabb0f">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-60ed281e43337660633cec8b2efabb0f" class="expand-content">
<p>Tipp: <code>y[i] += ...</code> setzt sinnvolle Werte in <code>y[i]</code> voraus ...</p>
  </div>
</div>
<h4 id="überschreiben-von-speicher-i">Überschreiben von Speicher I</h4>
<p>Allokation von falschen Größen</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> <span style="color:#a6e22e">malloc</span>(N<span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span>N; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">malloc</span>(M<span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-cc80413b63b35fd624313568cf65f75c" aria-controls="R-expandcontent-cc80413b63b35fd624313568cf65f75c">
  <label class="expand-label" for="R-expand-cc80413b63b35fd624313568cf65f75c">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-cc80413b63b35fd624313568cf65f75c" class="expand-content">
<p>Tipp: Jedes <code>p[i]</code> kann einen <code>int</code> speichern, bekommt aber einen Pointer
zugewiesen (könnte deutlich breiter im Speicher sein als ein <code>int</code>) ...</p>
  </div>
</div>
<h4 id="überschreiben-von-speicher-ii">Überschreiben von Speicher II</h4>
<p>Indexberechnung kaputt, sogenannte &quot;<em>off-by-one-errors</em>&quot;</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">**</span>p;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> <span style="color:#a6e22e">malloc</span>(N<span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;=</span>N; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">malloc</span>(M<span style="color:#f92672">*</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-7db3b4b8683d20c81e87e796083920d4" aria-controls="R-expandcontent-7db3b4b8683d20c81e87e796083920d4">
  <label class="expand-label" for="R-expand-7db3b4b8683d20c81e87e796083920d4">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-7db3b4b8683d20c81e87e796083920d4" class="expand-content">
<p>Tipp: Hier läuft <code>i</code> um einen Platz zu weit ...</p>
  </div>
</div>
<h4 id="überschreiben-von-speicher-iii">Überschreiben von Speicher III</h4>
<p>Einlesen von Strings, zu kleine Buffer</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> s[<span style="color:#ae81ff">8</span>];
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gets</span>(s);</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-a1f1ac03e27a08b431639fbcbe090559" aria-controls="R-expandcontent-a1f1ac03e27a08b431639fbcbe090559">
  <label class="expand-label" for="R-expand-a1f1ac03e27a08b431639fbcbe090559">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-a1f1ac03e27a08b431639fbcbe090559" class="expand-content">
<p>Tipp: Wenn hier mehr als 7 Zeichen eingegeben werden, gibt es Probleme :)</p>
  </div>
</div>
<h4 id="überschreiben-von-speicher-iv">Überschreiben von Speicher IV</h4>
<p>Pointerarithmetik falsch verstanden</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">search</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p, <span style="color:#66d9ef">int</span> val) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">*</span>p <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">!=</span> val)
</span></span><span style="display:flex;"><span>        p <span style="color:#f92672">+=</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> p;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="expand">
  <input type="checkbox" id="R-expand-702df0a20511d9f85c1705455855343c" aria-controls="R-expandcontent-702df0a20511d9f85c1705455855343c">
  <label class="expand-label" for="R-expand-702df0a20511d9f85c1705455855343c">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-702df0a20511d9f85c1705455855343c" class="expand-content">
<p>Tipp: Jeder Pointer hat einen Typ, und der Ausdruck &quot;Pointer + 1&quot; rutscht um
so viele Bytes im Speicher weiter, wie der Typ breit ist. D.h. mit einem
&quot;Pointer + 1&quot; gelangt man zum nächsten Element, während der obige Ausdruck
<code>p += sizeof(int);</code> um <code>sizeof(int)</code> Elemente weiterspringt!</p>
  </div>
</div>
<h2 id="pointer-und-arrays">Pointer und Arrays</h2>
<p>Ein Array-Name ist wie ein <em>konstanter</em> Pointer auf Array-Anfang: <code>a[i] == *(a+i)</code></p>
<p>Ein <strong>Array-Name</strong> ist nur ein Label, welches der <strong>Adresse des ersten Array-Elements</strong> entspricht.
Die Wirkung ist entsprechend die eines konstanten Pointers auf den Array-Anfang.</p>
<p>=&gt; Der Compiler übersetzt Array-Zugriffe per Indexoperator in Pointerarithmetik: <code>a[i]</code> wird zu <code>*(a+i)</code> ...</p>
<p>Vgl. auch die Diskussion in
<a href="https://eli.thegreenplace.net/2009/10/21/are-pointers-and-arrays-equivalent-in-c" rel="external" target="_blank">eli.thegreenplace.net/2009/10/21/are-pointers-and-arrays-equivalent-in-c</a></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> a[<span style="color:#ae81ff">6</span>], c, <span style="color:#f92672">*</span>cp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&amp;</span>a[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> a;
</span></span><span style="display:flex;"><span>cp <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> a[<span style="color:#ae81ff">5</span>];
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(a<span style="color:#f92672">+</span><span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(cp<span style="color:#f92672">+</span><span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> cp[<span style="color:#ae81ff">5</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> cp;  <span style="color:#75715e">/* FEHLER */</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>c;  <span style="color:#75715e">/* FEHLER */</span></span></span></code></pre></div>
<h3 id="iteration-durch-arrays-varianten">Iteration durch Arrays (Varianten)</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a[<span style="color:#ae81ff">10</span>], <span style="color:#f92672">*</span>pa<span style="color:#f92672">=</span>a;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; k<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; k<span style="color:#f92672">++</span>)    <span style="color:#75715e">/* Iteration, Variante 1 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d &#34;</span>, a[k]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; k<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; k<span style="color:#f92672">++</span>)    <span style="color:#75715e">/* Iteration, Variante 2 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d &#34;</span>, <span style="color:#f92672">*</span>(a<span style="color:#f92672">+</span>k));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pa <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; k<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; k<span style="color:#f92672">++</span>)    <span style="color:#75715e">/* Iteration, Variante 3 */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d &#34;</span>, <span style="color:#f92672">*</span>pa<span style="color:#f92672">++</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* Iteration, KEINE Variante */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; k<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">10</span>; k<span style="color:#f92672">++</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%d &#34;</span>, <span style="color:#f92672">*</span>a<span style="color:#f92672">++</span>);    <span style="color:#75715e">/* DAS GEHT NICHT */</span></span></span></code></pre></div>
<p><code>*pa++</code>: Operator <code>++</code> hat Vorrang vor <code>*</code>, ist aber die Postfix-Variante. D.h.
<code>++</code> wirkt auf <code>pa</code> (und nicht auf <code>*pa</code>), aber zunächst wird für die Ausgabe
<code>*pa</code> ausgewertet ...</p>
<p><code>*a++</code> ist nicht erlaubt, weil dadurch der Name des Arrays (== Adresse des ersten
Array-Elements == konstanter Zeiger auf den Anfang des Arrays) verändert würde.</p>
<h3 id="array-namen-sind-wie-konstante-pointer">Array-Namen sind wie konstante Pointer</h3>
<div class='center'>
<p><span class='alert'><strong>Array-Namen können NICHT umgebogen werden!</strong></span></p>
</div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a[], <span style="color:#f92672">*</span>pa<span style="color:#f92672">=</span>a, k;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* erlaubt */</span>
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">+</span> k;
</span></span><span style="display:flex;"><span>pa<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* VERBOTEN */</span>
</span></span><span style="display:flex;"><span>a<span style="color:#f92672">++</span>;</span></span></code></pre></div>
<h3 id="selbsttest-was-bedeutet-was-was-ist-erlaubtnicht-erlaubt-was-kommt-raus-warum">Selbsttest: Was bedeutet was, was ist erlaubt/nicht erlaubt, was kommt raus? Warum?</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a[<span style="color:#ae81ff">10</span>], <span style="color:#f92672">*</span>pa, <span style="color:#f92672">*</span>pb, x;
</span></span><span style="display:flex;"><span>pa <span style="color:#f92672">=</span> a;    pb <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>) <span style="color:#a6e22e">malloc</span>(<span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> a[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(a<span style="color:#f92672">++</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> pa[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pa<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pa<span style="color:#f92672">++</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> pb[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pb<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pb<span style="color:#f92672">++</span>);</span></span></code></pre></div>
<p>=&gt; Arrays können wie konstante Pointer behandelt werden.</p>
<p>=&gt; Pointer dürfen <span class='alert'><strong>nicht immer wie Arrays</strong></span> behandelt werden!
(Syntaktisch zulässig, semantisch normalerweise nicht!)</p>
<h3 id="pointerarithmetik-typen-beachten">Pointerarithmetik: Typen beachten</h3>
<ul>
<li>Pointer zeigen auf Objekte mit einem bestimmten Typ</li>
<li>Typen haben unterschiedliche Speicherbreite</li>
<li>Inkrementierung/Dekrementierung: Pointer zeigt nicht auf nächste
Speicheradresse, sondern auf die <span class='alert'>Adresse des nächsten Werts</span>!</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">double</span> d[<span style="color:#ae81ff">10</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#f92672">*</span>d1 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>d[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">double</span> <span style="color:#f92672">*</span>d2 <span style="color:#f92672">=</span> d1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>d2<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%ld</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, d2<span style="color:#f92672">-</span>d1);               <span style="color:#75715e">// ergibt 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%ld</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, (<span style="color:#66d9ef">long</span>)d2 <span style="color:#f92672">-</span> (<span style="color:#66d9ef">long</span>)d1); <span style="color:#75715e">// double -&gt; zB. 8 Bytes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%ld</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#66d9ef">sizeof</span>(d1));  <span style="color:#75715e">// Breite Pointervariable
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;%ld</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, <span style="color:#66d9ef">sizeof</span>(<span style="color:#f92672">*</span>d1)); <span style="color:#75715e">// Breite Pointerdatentyp
</span></span></span></code></pre></div>
<h2 id="referenzen-in-c">Referenzen in C++</h2>
<div class='center'>
<p><code>Typ &amp; Name = Objekt;</code></p>
</div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>r<span style="color:#f92672">=</span>i;    <span style="color:#75715e">// Referenz: neuer Name fuer i
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>r<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>;        <span style="color:#75715e">// aendert i: i==10
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>r<span style="color:#f92672">=</span>j;         <span style="color:#75715e">// aendert i: i==9
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>s<span style="color:#f92672">=</span>r;    <span style="color:#75715e">// aequivalent zu int &amp;s = i;
</span></span></span></code></pre></div>
<h3 id="referenzen-bilden-alias-namen-1">Referenzen bilden Alias-Namen</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">99</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>iptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>iref <span style="color:#f92672">=</span> i;   <span style="color:#75715e">// Referenz: neuer Name fuer i
</span></span></span></code></pre></div>
<pre><code>        Variable    Speicheraddresse    Inhalt

                                        |          |
                                        +----------+
        i, iref     10125               | 99       |  &lt;--+
                                        +----------+     |
                                        |          |     |
                    ....                 ....            |
                                        |          |     |
                                        +----------+     |
        iptr        27890               | 10125    |  ---+
                                        +----------+
                                        |          |
</code></pre>
<ul>
<li>Referenz bildet <span class='alert'>Alias-Namen</span> für ein Objekt</li>
<li>Objekt hat damit mehrere Namen, über die es ansprechbar ist</li>
<li>Referenzen in C++ mit Hilfe des <code>&amp;</code>-Operators deklarieren</li>
</ul>
<h3 id="eigenschaften-von-referenzen-in-c">Eigenschaften von Referenzen in C++</h3>
<ul>
<li>
<p>Referenzen müssen bei Deklaration initialisiert werden</p>
</li>
<li>
<p>Referenzen können nicht um-assigned werden</p>
</li>
<li>
<p>Referenzen brauchen keinen eigenen Speicherplatz</p>
</li>
<li>
<p>Vorsicht bei gleichzeitiger Deklaration mehrerer Referenzen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> j<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span> r<span style="color:#f92672">=</span>i, s<span style="color:#f92672">=</span>j;    <span style="color:#75715e">// SO NICHT!!!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>r<span style="color:#f92672">=</span>i, <span style="color:#f92672">&amp;</span>s<span style="color:#f92672">=</span>j;   <span style="color:#75715e">// korrekt
</span></span></span></code></pre></div>
</li>
</ul>
<h3 id="referenzen-als-funktionsparameter">Referenzen als Funktionsparameter</h3>
<ul>
<li>
<p>Signatur:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">char</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">char</span> b);  <span style="color:#75715e">// a per Referenz
</span></span></span></code></pre></div>
</li>
<li>
<p>Aufruf: ganz normal (ohne extra <code>&amp;</code>) ...</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">char</span> y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>fkt(x, y);  <span style="color:#75715e">// x per Referenz
</span></span></span></code></pre></div>
</li>
</ul>
<p>Im Beispiel werden die Variablen <code>x</code> und <code>y</code> an die Funktion <code>fkt</code> übergeben. Der
erste Parameter wird per Referenz (call-by-reference), der zweite per Kopie
(call-by-value) übergeben.</p>
<p>Der Funktionsparameter <code>a</code> bindet sich an <code>x</code>, ist eine Referenz auf/für <code>x</code> - jeder
Zugriff auf <code>a</code> ist wie ein Zugriff auf <code>x</code>. Änderungen von <code>a</code> sind also Änderungen
von <code>x</code>.</p>
<p>Der zweite Parameter bindet sich an den <em>Wert</em> von <code>y</code>, d.h. <code>b</code> hat den Wert <code>'a'</code>.
Zwar kann auch <code>b</code> verändert werden, das hat dann aber nur Auswirkungen innerhalb der
Funktion und nicht auf die Variable <code>y</code> im äußeren Scope.</p>
<h2 id="call-by-reference-semantik-in-c">Call-by-Reference Semantik in C++</h2>
<h3 id="variante-a-pointer-c-und-c">Variante A: Pointer (C und C++)</h3>
<p>Mit Hilfe von Pointern lässt sich die Call-by-Reference Semantik in C und in C++ simulieren.</p>
<p>Bei der Übergabe eines Pointers wird der Wert des Pointers <em>kopiert</em> (call-by-value!). Im Inneren
der Funktion kann diese Adresse dereferenziert werden und so auf das außerhalb der Funktion &quot;lebende&quot;
Objekt zugegriffen werden. Damit bekommt man in der Wirkung call-by-reference.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">add_5</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x) {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, <span style="color:#f92672">*</span>ip<span style="color:#f92672">=&amp;</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">add_5</span>(ip);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">add_5</span>(<span style="color:#f92672">&amp;</span>i);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>Pointer wird nach wie vor per <span class='alert'>call-by-value</span> übergeben:
<ul>
<li>Wert wird bei Übergabe <span class='alert'>kopiert</span> (hier Adresse von <code>i</code>)</li>
<li>Kopierter Wert ist immer noch ein Pointer (hier Pointer auf <code>i</code>, da
Adresse von <code>i</code>)</li>
<li>Dereferenzierung des kopierten Pointers: Zugriff auf das
Original-Objekt (hier <code>i</code>)</li>
</ul>
</li>
</ul>
<h3 id="variante-b-referenzen-nur-c">Variante B: Referenzen (nur C++)</h3>
<p>Referenzen müssen bei der Deklaration initialisiert werden und binden sich an das dabei genutzte
Objekt. Sie stellen letztlich lediglich einen neuen Namen für das Objekt dar.</p>
<p>Bei der Übergabe von Variablen an Referenz-Parameter einer Funktion binden sich diese Parameter an
die übergebenen Objekte. Jeder Zugriff innerhalb der Funktion auf einen Referenz-Parameter bewirken
einen Zugriff auf das ursprüngliche Objekt.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">add_5</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>x) {
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">+=</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, erg;
</span></span><span style="display:flex;"><span>    erg <span style="color:#f92672">=</span> add_5(i);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>Funktionsparameter <code>x</code> ist eine Referenz</li>
<li>Bei Aufruf der Funktion wird dieser Parameter initialisiert - die Referenz <code>x</code> bindet sich
im Beispiel an die Variable <code>i</code></li>
<li>Zugriffe auf <code>x</code> in der Funktion sind also Zugriffe auf das Original-Objekt <code>i</code> - <code>x += 5</code>
ist nichts anderes als <code>i += 5</code></li>
<li>Bei weiteren Aufrufen wird <code>x</code> dann neu gebunden</li>
</ul>
<h3 id="call-by-reference-const">Call-by-Reference: const</h3>
<ul>
<li>
<p>Nachteil bei Call-by-Reference:</p>
<p>Übergebenes Objekt könnte durch die Funktion (unbeabsichtigt) verändert werden</p>
</li>
<li>
<p>Abhilfe: Deklaration der Parameter als konstant (Schlüsselwort <code>const</code>):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">char</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">char</span> b);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// a wird per Referenz uebergeben, darf aber in der Funktion nicht veraendert werden
</span></span></span></code></pre></div>
</li>
</ul>
<p>=&gt; <code>const</code>-heit ist Bestandteil der Signatur!</p>
<div class='center'>
<p><span class='alert'><strong>Arbeiten Sie (wo möglich/sinnvoll) mit (konstanten) Referenzen!</strong></span></p>
</div>
<h3 id="rückgabe-von-werten-per-referenz">Rückgabe von Werten per Referenz</h3>
<ul>
<li>Normalerweise per call-by-value (Kopie)</li>
<li>Mit Referenzen oder Pointern auch als call-by-reference</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>fkt1(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">fkt2</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>);</span></span></code></pre></div>
<ul>
<li>
<p>Vorsicht mit lokalen Variablen (Gültigkeit)!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>fkt1(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>i, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>j) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> erg <span style="color:#f92672">=</span> i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> erg;   <span style="color:#75715e">// Referenz auf lokale Variable!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">fkt2</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>i, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>j) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> erg <span style="color:#f92672">=</span> i<span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span>erg;  <span style="color:#75715e">// Pointer auf lokale Variable!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>x <span style="color:#f92672">=</span> fkt1(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;a&#34;</span>);  <span style="color:#75715e">// AUTSCH!!!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>y <span style="color:#f92672">=</span> fkt2(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;b&#34;</span>);  <span style="color:#75715e">// AUTSCH!!!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span>  z <span style="color:#f92672">=</span> fkt1(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#34;c&#34;</span>);  <span style="color:#75715e">// OK
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div>
</li>
</ul>
<p>Die Zuweisung <code>int &amp;x = fkt1(2, &quot;a&quot;);</code> ist syntaktisch erlaubt. Semantisch aber nicht: Die
Referenz <code>x</code> bindet sich an das zurückgelieferte lokale <code>erg</code> - dieses existiert aber nicht
mehr, da der Scope von erg beendet ist ...</p>
<p><strong>=&gt; Nur Pointer auf Speicher zurückliefern, der nach Beendigung des Funtionsaufrufes noch existiert!</strong>
(Dies könnte beispielsweise Speicher aus <code>malloc</code> oder <code>new</code> oder ein Pointer auf das eigene Objekt
(<code>*this</code>) sein.)</p>
<p>Die Zuweisung <code>int *y = fkt2(2, &quot;b&quot;);</code> ist syntaktisch erlaubt. Semantisch aber nicht: Der
Pointer <code>y</code> übernimmt die zurückgelieferte Adresse des lokalen <code>erg</code> - dieses existiert aber
nicht mehr, da der Scope von erg beendet ist ...</p>
<p><strong>=&gt; Nur Referenzen zurückliefern, die nach Beendigung des Funtionsaufrufes noch gültig sind!</strong>
(Dies könnten beispielsweise Referenz-Inputparameter oder eine Referenz auf das eigene Objekt
(<code>*this</code>) sein.)</p>
<p>Die Zuweisung <code>int  z = fkt1(2, &quot;c&quot;);</code> ist unbedenklich, da <code>z</code> eine normale Integervariable
ist und hier das übliche Kopieren der Rückgabe von <code>ftk1</code> in die Variable stattfindet.</p>
<h3 id="diskussion">Diskussion</h3>
<p>In C++ können Sie Call-by-Reference über Pointer und/oder über Referenzen erreichen.</p>
<p>In den obigen Beispielen wurde dies für die Parameter einer Funktion gezeigt - es sind
aber auch Pointer und/oder Referenzen als Rückgabetypen möglich. Beachten Sie dabei,
ob das jeweils wirklich Sinn ergibt! Eine Referenz oder ein Pointer auf eine lokale
Variable ist eine große Fehlerquelle.</p>
<p>In C++ werden Referenzen über Pointer bevorzugt. Wenn Sie die Wahl zwischen den beiden
Signaturen <code>bar foo(wuppie&amp;,  bar)</code> und <code>bar foo(wuppie*,  bar)</code> haben, sollten Sie sich
für <code>bar foo(wuppie&amp;,  bar)</code> entscheiden.</p>
<h2 id="vergleich-pointer-mit-referenzen">Vergleich Pointer mit Referenzen</h2>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Referenzen</th>
          <th style="text-align: left">Pointer</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Alias-Name für Objekte/Variablen, kein eigener Speicherplatz</td>
          <td style="text-align: left">&quot;Echte&quot; Variablen mit eigenem Speicherplatz (für den Wert des Pointers)</td>
      </tr>
      <tr>
          <td style="text-align: left">Können nicht auf andere Objekte &quot;umgebogen&quot; werden</td>
          <td style="text-align: left">Können auf andere Objekte zeigen (falls nicht const)</td>
      </tr>
      <tr>
          <td style="text-align: left">Operationen agieren direkt auf dem referenzierten Objekt</td>
          <td style="text-align: left">Operationen auf referenzierten Objekt als auch auf dem Pointer selbst</td>
      </tr>
      <tr>
          <td style="text-align: left">Nur in C++</td>
          <td style="text-align: left">In C und in C++</td>
      </tr>
      <tr>
          <td style="text-align: left"></td>
          <td style="text-align: left">Mit Pointern ist dynamische Speicherverwaltung möglich: Manipulation von Speicherbereichen im Heap</td>
      </tr>
  </tbody>
</table>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Virtueller Speicher: Kernel stellt Prozessen linearen Adressraum bereit,
Segmente: Text, Stack, Heap</p>
</li>
<li>
<p>Pointer sind Variablen, deren <strong>Wert als Adresse</strong> interpretiert wird</p>
<ul>
<li>Deklaration mit <code>*</code> zwischen Typ und Name</li>
<li>Adressoperator <code>&amp;</code> liefert die Adresse eines Objekts</li>
<li>Dereferenzierung eines Pointers mit <code>*</code> vor dem Namen</li>
</ul>
</li>
<li>
<p>Verwandtschaft zw. Arrays und Pointern: Array-Name ist konstanter Pointer auf Array-Anfang</p>
</li>
<li>
<p>Pointer haben Typ: Pointerarithmetik berücksichtigt Speicherbreite des Typs</p>
</li>
<li>
<p>C++-Referenzen als Alias-Namen für ein Objekt</p>
<ul>
<li>Deklaration: <code>Typ &amp;ref = obj;</code></li>
<li>Fest mit Objekt verbunden</li>
<li>Zugriff auf Referenz: Direkter Zugriff auf das Objekt</li>
</ul>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Pointer</strong></p>
<ul>
<li>
<p>Erklären Sie das Problem bei folgender Deklaration: <code>int* xptr, yptr;</code></p>
</li>
<li>
<p>Seien <code>p1</code> und <code>p2</code> Pointer auf <code>int</code>. Was ist der Unterschied zwischen den
beiden Code-Zeilen?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>p2  <span style="color:#f92672">=</span> p1;
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>p2 <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>p1;</span></span></code></pre></div>
</li>
<li>
<p>Ist <code>*&amp;x</code> immer identisch mit <code>x</code>?</p>
</li>
<li>
<p>Ist <code>&amp;*x</code> immer identisch mit <code>x</code>?</p>
</li>
<li>
<p>Wann kann die Funktion <code>void f(int*)</code> so aufgerufen werden: <code>f(&amp;x);</code>?</p>
</li>
</ul>
<p><strong>Swap ...</strong></p>
<ul>
<li>
<p>Warum funktioniert die folgende <code>swap()</code>-Funktion nicht?
Wie müsste sie korrigiert werden?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> tmp; tmp<span style="color:#f92672">=</span>x; x<span style="color:#f92672">=</span>y; y<span style="color:#f92672">=</span>tmp;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Was ist mit dieser Version dieser <code>swap()</code>-Funktion?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span>(<span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x, <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>y) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>tmp;
</span></span><span style="display:flex;"><span>    tmp<span style="color:#f92672">=</span>x; x<span style="color:#f92672">=</span>y; y<span style="color:#f92672">=</span>tmp;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<p><strong>C++: new und delete</strong></p>
<p>Betrachten Sie folgende Code-Schnipsel.
Erklären Sie die Wirkung der jeweiligen Anweisungen.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>cp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>    cp[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>i;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> p;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>p;
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>cp <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[<span style="color:#ae81ff">100</span>];
</span></span><span style="display:flex;"><span>    p <span style="color:#f92672">=</span> cp;
</span></span><span style="display:flex;"><span>    free(cp);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> p;</span></span></code></pre></div>
<p><strong>Referenzen vs. Pointer: Welche der Aufrufe sind zulässig?</strong></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f1</span>(<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f2</span>(<span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, <span style="color:#f92672">*</span>ip<span style="color:#f92672">=&amp;</span>i, <span style="color:#f92672">&amp;</span>ir<span style="color:#f92672">=</span>i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    f1(i);      f1(<span style="color:#f92672">&amp;</span>i);     f1(<span style="color:#f92672">*</span>i);
</span></span><span style="display:flex;"><span>    f1(ip);     f1(<span style="color:#f92672">&amp;</span>ip);    f1(<span style="color:#f92672">*</span>ip);
</span></span><span style="display:flex;"><span>    f1(ir);     f1(<span style="color:#f92672">&amp;</span>ir);    f1(<span style="color:#f92672">*</span>ir);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    f2(i);      f2(<span style="color:#f92672">&amp;</span>i);     f2(<span style="color:#f92672">*</span>i);
</span></span><span style="display:flex;"><span>    f2(ip);     f2(<span style="color:#f92672">&amp;</span>ip);    f2(<span style="color:#f92672">*</span>ip);
</span></span><span style="display:flex;"><span>    f2(ir);     f2(<span style="color:#f92672">&amp;</span>ir);    f2(<span style="color:#f92672">*</span>ir);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><strong>C++-Referenzen und Pointer</strong></p>
<p>Betrachten Sie folgende Code-Schnipsel.
Erklären Sie die Wirkung der jeweiligen Anweisungen.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> x<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, <span style="color:#f92672">&amp;</span>y<span style="color:#f92672">=</span>x;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>ptr1 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>x;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>ptr2 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ptr1 <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ptr1<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ptr2  <span style="color:#f92672">=</span> ptr1;
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ptr2 <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>ptr1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ptr1  <span style="color:#f92672">==</span> ptr2;
</span></span><span style="display:flex;"><span><span style="color:#f92672">*</span>ptr1 <span style="color:#f92672">==</span> <span style="color:#f92672">*</span>ptr2;</span></span></code></pre></div>
<p><strong>Fallstricke mit C++-Referenzen</strong></p>
<p>Betrachten Sie folgende Code-Ausschnitte. Welchen Wert haben die Variablen nach
der Ausführung? Begründen Sie Ihre Antwort.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, j<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>r<span style="color:#f92672">=</span>i, <span style="color:#f92672">&amp;</span>s<span style="color:#f92672">=</span>r;
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">int</span> j) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> erg <span style="color:#f92672">=</span> i<span style="color:#f92672">+</span>j;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> erg;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>z <span style="color:#f92672">=</span> versuch(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><strong>Referenzen in C++</strong></p>
<p>Betrachten Sie folgende Code-Ausschnitte (C++). Erklären Sie, ob sich dort
Fehler verstecken und falls ja, wie diese zu beheben wären.</p>
<ol>
<li>
<p>Versuch</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>z <span style="color:#f92672">=</span> versuch(a, b);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>i, <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>j) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>erg <span style="color:#f92672">=</span> i<span style="color:#f92672">+</span>j;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> erg;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Versuch</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>z <span style="color:#f92672">=</span> versuch(a, b);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>i, <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>j) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> erg <span style="color:#f92672">=</span> i<span style="color:#f92672">+</span>j;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> erg;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
<li>
<p>Versuch</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>z <span style="color:#f92672">=</span> versuch(a, <span style="color:#ae81ff">10</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>versuch(<span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>i, <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>j) {
</span></span><span style="display:flex;"><span>    j <span style="color:#f92672">+=</span> i;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> j;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ol>
<p><strong>Pointer und Arrays</strong></p>
<ul>
<li>
<p>Erklären Sie die Unterschiede folgender Anweisungen. Welche sind
erlaubt, welche nicht? Welche führen möglicherweise zu Fehlern?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> a[<span style="color:#ae81ff">10</span>], <span style="color:#f92672">*</span>pa, <span style="color:#f92672">*</span>pb, x;
</span></span><span style="display:flex;"><span>pa <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>pb <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> a[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(a<span style="color:#f92672">++</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> pa[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pa<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pa<span style="color:#f92672">++</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> pb[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pb<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(pb<span style="color:#f92672">++</span>);</span></span></code></pre></div>
</li>
</ul>
<p><strong>Typ eines Pointers bei Adressarithmetik</strong></p>
<ul>
<li>
<p>Was ist der Unterschied zwischen den beiden folgenden Statements?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>((<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>)ptr)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>((<span style="color:#66d9ef">double</span> <span style="color:#f92672">*</span>)ptr)<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span></span></span></code></pre></div>
</li>
</ul>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Klassen</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Klassen werden in C++ mit dem Schlüsselwort <code>class</code> definiert. Dabei müssen Klassendefinitionen immer
mit einem Semikolon abgeschlossen werden(!). Bei Trennung von Deklaration und Implementierung muss die
Definition der Methoden mit dem Namen der Klasse als Namespace erfolgen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// .h
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fluppie</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> wuppie(<span style="color:#66d9ef">int</span> c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// .cpp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> Fluppie<span style="color:#f92672">::</span>wuppie(<span style="color:#66d9ef">int</span> c) { ... }</span></span></code></pre></div>
<p>Die Sichtbarkeiten für die Attribute und Methoden werden blockweise definiert. Für die Klassen selbst
gibt es keine Einstellungen für die Sichtbarkeit.</p>
<p>Objekt-Layout: Die Daten (Attribute) liegen direkt im Objekt (anderenfalls Pointer nutzen). Sofern der
Typ der Attribute eine Klasse ist, kann man diese Attribute nicht mit <code>NULL</code> initialisieren (kein Pointer,
keine Referenz).</p>
<p>Für den Aufruf eines Konstruktors ist kein <code>new</code> notwendig, es sei denn, man möchte das neue Objekt
auf dem Heap haben (inkl. Pointer auf das Objekt).</p>
<p>Beachten Sie den Unterschied der Initialisierung der Attribute bei einer Initialisierung im Body des
Konstruktors vs. der Initialisierung über eine <strong>Initialisierungsliste</strong>. (Nutzen Sie in C++ nach
Möglichkeit Initialisierungslisten.)</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/4xAYFHWvBGc' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL C++: Klassen</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Attribute von C++-Klassen sind Speicherplatz im Objekt</li> <li>(K2) Explizite Konstruktoren</li> <li>(K2) Problematik mit Defaultkonstruktoren/-operatoren (Pointer)</li> <li>(K3) Konstruktoren (eigene, Default)</li> <li>(K3) Unterschied Initialisierungslisten vs. Initialisierung im Body</li></ul>
  </div>
</div>




    <h2 id="oop-in-c">OOP in C++</h2>
<div class='columns'>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Dummy</span>(<span style="color:#66d9ef">int</span> v) { value <span style="color:#f92672">=</span> v; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">myMethod</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> value;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</div>
<div class='column'>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> v <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">myMethod</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">virtual</span> <span style="color:#f92672">~</span>Dummy();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> value;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
</div>
</div>
<h3 id="oop-in-c-unterschiede-zu-java">OOP in C++: Unterschiede zu Java</h3>
<ul>
<li>Klassendefinition muss mit Semikolon beendet werden</li>
<li>Sichtbarkeit wird immer blockweise eingestellt (per Default immer <code>private</code>)</li>
<li>Wie bei Funktionen: Deklaration muss vor Verwendung (= Aufruf) bekannt sein</li>
<li><code>this</code> ist keine Referenz, sondern ein <strong>Pointer</strong> auf das eigene Objekt</li>
</ul>
<h3 id="objektlayout-java-vs-c">Objektlayout: Java vs. C++</h3>
<h4 id="java-referenzen-auf-objekte">Java: Referenzen auf Objekte</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>    String name;
</span></span><span style="display:flex;"><span>    Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><a href="#R-image-6eddb07286cec21c653165e9b8b8d3f1" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes/objektLayoutJava.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6eddb07286cec21c653165e9b8b8d3f1"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes/objektLayoutJava.png?width=auto&height=auto"></a></p>
<p>In Java werden im Objektlayout lediglich die primitiven Attribute direkt gespeichert.</p>
<p>Für Objekte wird nur eine Referenz auf die Objekte gehalten. Die Attribute selbst
liegen aber außerhalb der Klasse, dadurch benötigt das Objekt selbst nur relativ wenig
Platz im Speicher.</p>
<h4 id="c-alles-direkt-im-objekt">C++: Alles direkt im Objekt</h4>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>    string name;
</span></span><span style="display:flex;"><span>    Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><a href="#R-image-fd739e00a80362fb10ef7908ba811c47" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes/objektLayoutCpp.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fd739e00a80362fb10ef7908ba811c47"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp2-classes/objektLayoutCpp.png?width=auto&height=auto"></a></p>
<p>In C++ werden alle Attribute innerhalb des Objektlayouts gespeichert. Ein Objekt mit
vielen oder großen Feldern braucht also auch entsprechend viel Platz im Speicher.</p>
<p>Wollte man eine Java-ähnliche Lösung aufbauen, müsste man in C++ entsprechend Pointer
einsetzen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    string <span style="color:#f92672">*</span>name;
</span></span><span style="display:flex;"><span>    Date <span style="color:#f92672">*</span>birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><span class='alert'><strong>Warum nicht Referenzen?</strong></span></p>
<h2 id="objekte-erzeugen-mit-konstruktoren">Objekte erzeugen mit Konstruktoren</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>) { credits <span style="color:#f92672">=</span> c; }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><strong>Erzeugen neuer Objekte</strong>:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy a;
</span></span><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">b</span>(<span style="color:#ae81ff">37</span>);
</span></span><span style="display:flex;"><span>Dummy c<span style="color:#f92672">=</span><span style="color:#ae81ff">99</span>;</span></span></code></pre></div>
<p><span class='alert'><strong>=&gt; Kein Aufruf von <code>new</code>!</strong></span></p>
<p>(<code>new</code> würde zwar auch ein neues Objekt anlegen, aber <strong>auf dem Heap</strong>!)</p>
<h2 id="default-konstruktoren">Default-Konstruktoren</h2>
<p>Der C++-Compiler generiert einen <strong>parameterlosen Defaultkonstruktor</strong> - sofern man
nicht selbst mindestens einen Konstruktor definiert.</p>
<p>Dieser parameterlose Defaultkonstruktor wendet für jedes Attribut dessen parameterlosen
Konstruktor an, für primitive Typen erfolgt keine garantierte Initialisierung!</p>
<p><span class='alert'><strong>Achtung</strong></span>: Default-Konstruktor wird ohne Klammern aufgerufen!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy a;    <span style="color:#75715e">// Korrekt
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Dummy <span style="color:#a6e22e">a</span>();  <span style="color:#75715e">// FALSCH!!! (Deklaration einer Funktion `a()`, die ein `Dummy` zurueckliefert)
</span></span></span></code></pre></div>
<h2 id="c-trennung-h-und-cpp">C++: Trennung .h und .cpp</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// .h
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// .cpp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Dummy<span style="color:#f92672">::</span>Dummy(<span style="color:#66d9ef">int</span> c) {
</span></span><span style="display:flex;"><span>    credits <span style="color:#f92672">=</span> c;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Klassenname ist der Scope für die Methoden</p>
<h2 id="konstruktoren-normale-java-like-initialisierung">Konstruktoren: Normale (Java-like) Initialisierung</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Student(<span style="color:#66d9ef">const</span> string <span style="color:#f92672">&amp;</span>n, <span style="color:#66d9ef">const</span> Date <span style="color:#f92672">&amp;</span>d, <span style="color:#66d9ef">double</span> c) {
</span></span><span style="display:flex;"><span>        name <span style="color:#f92672">=</span> n;
</span></span><span style="display:flex;"><span>        birthday <span style="color:#f92672">=</span> d;
</span></span><span style="display:flex;"><span>        credits <span style="color:#f92672">=</span> c;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    string name;
</span></span><span style="display:flex;"><span>    Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Hier erfolgt die Initialisierung in <strong>zwei</strong> Schritten:</p>
<ol>
<li>Attribut wird angelegt und mit <span class='alert'>Defaultwert/-konstruktor</span> des Datentyps initialisiert</li>
<li><span class='alert'>Anschließend</span> wird die <span class='alert'>Zuweisung</span> im Body des Konstruktors ausgeführt</li>
</ol>
<p>Das klappt natürlich nur, wenn es einen parameterlosen Konstruktor für das Attribut
gibt.</p>
<p>Beispiel oben:
Beim Anlegen von <code>birthday</code> im Speicher wird der <strong>Defaultkonstruktor</strong> für
<code>Date</code> aufgerufen. Danach wird im Body der übergebene Datumswert <strong>zugewiesen</strong>.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/studiInitBody.cpp" target="_blank"><span class="title">Konsole: studiInitBody.cpp</span></a></span></div>
<h2 id="konstruktoren-initialisierungslisten">Konstruktoren: Initialisierungslisten</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Student(<span style="color:#66d9ef">const</span> string <span style="color:#f92672">&amp;</span>n, <span style="color:#66d9ef">const</span> Date <span style="color:#f92672">&amp;</span>d, <span style="color:#66d9ef">double</span> c)
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">:</span> name(n), birthday(d), credits(c)
</span></span><span style="display:flex;"><span>    {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    string name;
</span></span><span style="display:flex;"><span>    Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>In diesem Fall erfolgt die Initialisierung in nur einem Schritt:</p>
<ol>
<li>Attribut wird angelegt und <span class='alert'>direkt</span> mit übergebenen Wert
(<span class='alert'>Kopie</span>) initialisiert</li>
</ol>
<p>Das klappt natürlich nur, wenn ein passender Konstruktor für das Attribut
existiert.</p>
<p><strong>Achtung</strong>: Die Reihenfolge der Auswertung der Initialisierungslisten wird durch
die Reihenfolge der Attribut-Deklarationen in der Klasse bestimmt!!!</p>
<p>Beispiel oben:
Beim Anlegen von <code>birthday</code> im Speicher wird direkt der übergebene Wert <strong>kopiert</strong>.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/studiInitListe.cpp" target="_blank"><span class="title">Konsole: studiInitListe.cpp (ohne/mit <code>-Wall</code>)</span></a></span></div>
<h2 id="zwang-zu-initialisierungslisten">Zwang zu Initialisierungslisten</h2>
<p>In manchen Fällen <strong>muss</strong> man die Initialisierung der Attribute per
Initialisierungsliste durchführen.</p>
<p>Hier einige Beispiele:</p>
<ul>
<li>
<p>Attribut <strong>ohne parameterfreien Konstruktor</strong></p>
<p>Bei &quot;normaler&quot; Initialisierung würde zunächst der parameterfreie Konstruktor für das
Attribut aufgerufen, bevor der Wert zugewiesen wird. Wenn es keinen parameterfreien
Konstruktor für das Attribut gibt, bekommt man beim Kompilieren einen Fehler.</p>
</li>
<li>
<p><strong>Konstante</strong> Attribute</p>
<p>Bei &quot;normaler&quot; Initialisierung würde das Attribut zunächst per parameterfreiem Konstruktor
angelegt (s.o.), danach existiert es und ist konstant und darf nicht mehr geändert werden
(müsste es aber, um die eigentlich gewünschten Werte im Body zu setzen) ...</p>
</li>
<li>
<p>Attribute, die <strong>Referenzen</strong> sind</p>
<p>Referenzen müssen direkt beim Anlegen initialisiert werden.</p>
</li>
</ul>
<h2 id="c11-und-delegierende-konstruktoren">C++11 und delegierende Konstruktoren</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 1: Normaler Konstruktor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    C(<span style="color:#66d9ef">int</span> x) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 2: Delegiert zu (1)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    C() <span style="color:#f92672">:</span> C(<span style="color:#ae81ff">42</span>) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 3: Rekursion mit (4)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    C(<span style="color:#66d9ef">char</span> c) <span style="color:#f92672">:</span> C(<span style="color:#ae81ff">42.0</span>) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 4: Rekursion mit (3)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    C(<span style="color:#66d9ef">double</span> d) <span style="color:#f92672">:</span> C(<span style="color:#e6db74">&#39;a&#39;</span>) { }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Delegierende Konstruktoren gibt es ab C++11:</p>
<ul>
<li>Vor C++11: Ein Objekt ist fertig konstruiert, wenn der Konstruktor durchgelaufen ist</li>
<li>Ab C++11: Ein Objekt ist fertig konstruiert, wenn der <strong>erste</strong> Konstruktor fertig
ausgeführt ist
=&gt; Jeder weitere aufgerufene Konstruktor agiert auf einem &quot;fertigen&quot; Objekt.</li>
<li>Vorsicht mit rekursiven Aufrufen: Compiler <em>kann</em> warnen, muss aber nicht.</li>
</ul>
<h2 id="c-und-explizite-konstruktoren">C++ und explizite Konstruktoren</h2>
<ul>
<li>
<p>Implizite Konvertierung mit einelementigen Konstruktoren:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Dummy a;
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> <span style="color:#ae81ff">37</span>;     <span style="color:#75715e">// Zuweisung(!)
</span></span></span></code></pre></div>
<p>Auf der linken Seite der Zuweisung steht der Typ <code>Dummy</code>, rechts ein <code>int</code>.
Der Compiler sucht nach einem Weg, aus einem <code>int</code> einen <code>Dummy</code> zu machen
und hat durch die Gestaltung des Konstruktors von <code>Dummy</code> diese Möglichkeit.
D.h. in dieser Zuweisung wird implizit aus der 37 ein Objekt vom Typ <code>Dummy</code>
gebaut (Aufruf des Konstruktors) und dann die Zuweisung ausgeführt.</p>
<p>Dieses Verhalten ist in vielen Fällen recht praktisch, kann aber auch zu
unerwarteten Problemen führen. Zur Abhilfe gibt es das Schlüsselwort <code>explicit</code>.</p>
</li>
<li>
<p>Falls unerwünscht: Schlüsselwort <code>explicit</code> nutzen</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">explicit</span> <span style="color:#a6e22e">Dummy</span>(<span style="color:#66d9ef">int</span> c<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
</li>
</ul>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>Klassendefinition mit Semikolon abschließen (!)</li>
<li>Sichtbarkeiten blockweise, keine für Klasse</li>
<li>Daten liegen direkt im Objekt (anderenfalls Pointer nutzen)</li>
<li>Attribute sind echte Objekte: Initialisieren mit <code>NULL</code> nicht möglich</li>
<li>Konstruktoren: Kein <code>new</code> nötig (würde Objekt auf Heap anlegen und Pointer liefern)</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>C++: Klassen</strong></p>
<p>Erklären Sie die Unterschiede zwischen den Klassendefinitionen (Java, C++):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    string name;
</span></span><span style="display:flex;"><span>    Date birthday;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">double</span> credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><strong>Konstruktoren</strong></p>
<ul>
<li>Wie kann der implizite Aufruf eines Konstruktors verhindert werden
(beispielsweise in <code>Dummy b; b=3;</code>)?</li>
<li>In welchen Fällen muss eine Initialisierung von Attributen in der
Initialisierungsliste stattfinden?</li>
<li>Wie können/müssen <code>static</code> Attribute initialisiert werden?</li>
</ul>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Big 3</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Für C++-Klassen kann man Destruktoren, Copy-Konstruktoren und Zuweisungsoperatoren definieren.
Wenn man keine eigenen definiert, erzeugt C++ Default-Varianten. Diese bereiten u.U. Probleme,
wenn man Pointertypen für die Attribute verwendet: Dann werden u.U. nur flache Kopien erzeugt
bzw. es wird u.U. der Platz auf dem Heap nicht freigegeben.</p>
<p>Der Default-Destruktor ruft die Destruktoren der Objekt-Attribute auf. Der Copy-Konstruktor wird
aufgerufen, wenn die linke Seite (einer scheinbaren &quot;Zuweisung&quot;) ein unfertiges Objekt ist (noch
zu bauen) und die rechte Seite ein fertiges Objekt ist. Der Zuweisungs-Operator wird dagegen
aufgerufen, wenn auf beiden Seiten ein fertiges Objekt vorliegt.</p>
<p>Innerhalb einer Klasse kann man über den <strong>Pointer <code>this</code></strong> auf das eigene Objekt zugreifen
(analog zu <code>self</code> in Python oder <code>this</code> in Java, dort aber Referenzen).</p>
<p>Bei statischen Methoden und Attributen wird die Deklaration als <code>static</code> <strong>nicht</strong> in der
Implementierung wiederholt! Statische Attribute müssen außerhalb der Klassendefinition einmal
initialisiert werden!</p>
<p>Methoden können als &quot;konstant&quot; ausgezeichnet werden (<code>const</code> rechts von der Parameterliste). Das
<code>const</code> gehört zur Signatur der Methode! Konstante Methoden dürfen auf konstanten Objekten/Referenzen
aufgerufen werden.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/PaBK04Jks58' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL C++: Big 3</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Problematik mit Defaultkonstruktoren/-operatoren (Pointer)</li> <li>(K2) Problematik konstanter Funktionen, wann werden diese aufgerufen</li> <li>(K3) 'Big Three': Destruktor, Copy-Konstruktor, Zuweisungsoperator</li></ul>
  </div>
</div>




    <h2 id="big-three">Big Three</h2>
<p>Neben dem eigentlichen Konstruktor existieren in C++ weitere wichtige Konstruktoren/Operatoren:
die sogenannten <span class='alert'>&quot;Big Three&quot;</span>:</p>
<ul>
<li>Copy-Konstruktor</li>
<li>Destruktor: Gegenstück zum Konstruktor</li>
<li>Zuweisungsoperator (<code>operator=</code>)</li>
</ul>
<p><em>Anmerkung</em>: Für Fortgeschrittenere sei hier auf die in C++11 eingeführte und den Folgeversionen verbesserte und
verfeinerte <a href="https://en.wikipedia.org/wiki/C%2B%2B11#Rvalue_references_and_move_constructors" rel="external" target="_blank">Move-Semantik</a> und
die entsprechenden Varianten der Konstruktoren und Operatoren verwiesen. Man spricht deshalb mittlerweile auch gern
von den &quot;Big Five&quot; bzw. der <a href="https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)" rel="external" target="_blank">&quot;rule of five&quot;</a>.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> a<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>d);
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">~</span>Dummy();
</span></span><span style="display:flex;"><span>    Dummy <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>d);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> value;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy<span style="color:#f92672">::</span>Dummy(<span style="color:#66d9ef">int</span> a)<span style="color:#f92672">:</span> value(a) {}
</span></span><span style="display:flex;"><span>Dummy<span style="color:#f92672">::</span>Dummy(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>d)<span style="color:#f92672">:</span> value(d.value) {}
</span></span><span style="display:flex;"><span>Dummy<span style="color:#f92672">::~</span>Dummy() {}
</span></span><span style="display:flex;"><span>Dummy<span style="color:#f92672">::</span>Dummy <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>d) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>d) { value <span style="color:#f92672">=</span> d.value; }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="big-three-destruktor">Big Three: Destruktor</h3>
<ul>
<li>Syntax: <code>Dummy::~Dummy();</code>
(Konstruktor mit vorgesetzter Tilde)</li>
<li>Wird aufgerufen:
<ul>
<li>wenn ein Objekt seinen Scope verlässt, oder</li>
<li>wenn explizit <code>delete</code> für einen Pointer auf ein Objekt (auf dem Heap!) aufgerufen wird</li>
</ul>
</li>
<li>Default-Destruktor ruft Destruktoren der Objekt-Attribute auf</li>
</ul>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/destruktor.cpp" target="_blank"><span class="title">Konsole: destruktor.cpp</span></a></span></div>
<h3 id="big-three-copy-konstruktor">Big Three: Copy-Konstruktor</h3>
<ul>
<li>Syntax: <code>Dummy::Dummy(const Dummy &amp;);</code></li>
<li>Wird aufgerufen bei:
<ul>
<li>Deklaration mit Initialisierung mit Objekt</li>
<li>Objektübergabe und -rückgabe mit Call-by-Value</li>
<li><span class='alert'>Nicht bei Zuweisung</span></li>
</ul>
</li>
<li>Default-Copy-Konstruktor kopiert einfach elementweise
=&gt; bei Pointern also nur <strong>flache Kopie</strong></li>
</ul>
<p>&quot;<strong>Merkregel</strong>&quot;: Linke Seite unfertiges Objekt (noch zu bauen), rechte Seite fertiges Objekt.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/copyKonstruktor.cpp" target="_blank"><span class="title">Konsole: copyKonstruktor.cpp</span></a></span></div>
<h3 id="big-three-zuweisungsoperator">Big Three: Zuweisungsoperator</h3>
<ul>
<li>Syntax: <code>Dummy &amp;Dummy::operator=(const Dummy &amp;)</code></li>
<li>Wird aufgerufen:
<ul>
<li>bei Zuweisung bereits initialisierter Objekte</li>
</ul>
</li>
<li>Default-Zuweisungsoperator kopiert einfach elementweise
=&gt; bei Pointern also nur <strong>flache Kopie</strong></li>
</ul>
<p>&quot;<strong>Merkregel</strong>&quot;: Linke Seite fertiges Objekt, rechte Seite fertiges Objekt.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/zuweisungsOperator.cpp" target="_blank"><span class="title">Konsole: zuweisungsOperator.cpp</span></a></span></div>
<h3 id="big-three-defaults">Big Three: Defaults</h3>
<p>Analog zum Default-Konstruktor kann der Compiler auch Defaults für die Big Three
(Copy-Konstruktor, Destruktor, Zuweisungsoperator) generieren. Das funktioniert
nur, so lange Sie nicht selbst einen Copy-Konstruktor, Destruktor oder Zuweisungsoperator
definiert haben.</p>
<p>Diese Defaults passen normalerweise, wenn die Data-Member vom Typ <code>int</code>, <code>double</code>,
<code>vector&lt;int&gt;</code>, <code>string</code>, <code>vector&lt;string&gt;</code> o.ä. sind.</p>
<p>Problematisch wird es, wenn Pointer dabei sind: Dann werden flache Kopien erzeugt bzw.
Speicher auf dem Heap nicht oder mehrfach freigegeben! Sobald Sie für die Attribute
Pointer verwenden, sollten Sie eigene Konstruktoren, Copy-Konstruktoren, Destruktoren
und Zuweisungsoperatoren definieren!</p>
<p>Hier ein Beispiel für die Wirkung:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> initValue <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>        value <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>(initValue);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getValue</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span>value;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setValue</span>(<span style="color:#66d9ef">int</span> a) {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">*</span>value <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>value;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// oberer Teil der Abbildung
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Dummy a(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>    Dummy b <span style="color:#f92672">=</span> a;
</span></span><span style="display:flex;"><span>    Dummy c;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// unterer Teil der Abbildung
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    c<span style="color:#f92672">=</span>b;
</span></span><span style="display:flex;"><span>    a.setValue(<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><a href="#R-image-0281c93aeaf5a39cb9abd31b2a48fd5e" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp3-big3/bigthreeDefaults.png?width=auto&height=auto" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0281c93aeaf5a39cb9abd31b2a48fd5e"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp3-big3/bigthreeDefaults.png?width=auto&height=auto"></a></p>
<p>Analyse:</p>
<ol>
<li>Es sind Pointer im Spiel. Es wurde ein eigener Konstruktor definiert, aber kein
Copy-Konstruktor, d.h. diesen &quot;spendiert&quot; der Compiler.</li>
<li>Beim Anlegen von <code>a</code> wird auf dem Heap Speicher für einen <code>int</code> reserviert und
dort der Wert <code>2</code> hineingeschrieben.</li>
<li>Beim Anlegen von <code>b</code> wird der Default-Copy-Konstruktor verwendet, der einfach
elementweise kopiert. Damit zeigt der Pointer <code>value</code> in <code>b</code> auf den selben
Speicher wie der Pointer <code>value</code> in <code>a</code>.</li>
<li>Der Ausdruck <code>c=b</code> ist eine Zuweisung (warum?). Auch hier wird der vom Compiler
bereitgestellte Default genutzt (elementweise Zuweisung). Damit zeigt nun auch
der Pointer <code>value</code> in <code>c</code> auf den selben Speicher wie die <code>value</code>-Pointer in
<code>a</code> und <code>b</code>.</li>
</ol>
<h3 id="hinweis-abarbeitungsreihenfolge">Hinweis Abarbeitungsreihenfolge</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">a</span>(<span style="color:#ae81ff">0</span>); Dummy <span style="color:#a6e22e">b</span>(<span style="color:#ae81ff">1</span>); Dummy <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>); Dummy <span style="color:#a6e22e">d</span>(<span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> b <span style="color:#f92672">=</span> c <span style="color:#f92672">=</span> d; <span style="color:#75715e">// entspricht: a.operator=(b.operator=(c.operator=(d)));
</span></span></span></code></pre></div>
<h2 id="delete-this">delete this?</h2>
<p>Erinnerung:</p>
<ul>
<li><code>this</code> ist ein Pointer auf das eigene Objekt</li>
<li><code>delete</code> darf nur für Pointer auf Objekte, die mit <code>new</code> angelegt wurden,
aufgerufen werden =&gt; Freigabe von Objekten auf dem Heap!</li>
<li><code>delete</code> ruft den Destruktor eines Objekts auf ...</li>
</ul>
<p>Frage: Ist das folgende Konstrukt sinnvoll? Ist es überhaupt erlaubt? Was
passiert dabei?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">~</span>Foo() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">delete</span> <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Analyse: Wir haben hier gleich zwei Probleme:</p>
<ol>
<li>
<p><code>delete</code> ruft den Destruktor des verwiesenen Objekts auf. Da <code>this</code> ein
Pointer auf das eigene Objekt ist, ruft <code>delete this;</code> den eigenen
Destruktor auf, der dann wiederum <code>delete this;</code> aufruft und so weiter.
=&gt; Endlosschleife!</p>
</li>
<li>
<p>Außerdem wissen wir im Destruktor bzw. im Objekt gar nicht, ob das Objekt
wirklich mit <code>new</code> auf dem Heap angelegt wurde! D.h. wenn wir nicht in
die Endlosschleife eintreten würden, würde das Programm abstürzen.</p>
</li>
</ol>
<p>Der Destruktor wird aufgerufen, wenn ein Objekt zerstört wird, d.h. wenn ein
Objekt seine Lebensdauer beendet (Verlassen des Scopes, in dem das Objekt
definiert wurde) bzw. wenn explizit ein <code>delete</code> auf das Objekt aufgerufen
wird (d.h. <code>delete</code> auf einen Pointer auf das Objekt, wobei dieses mit <code>new</code>
angelegt wurde).</p>
<p>Im Destruktor sollten <strong>durch das Objekt verwaltete Resourcen freigegeben</strong>
werden, d.h. sämtliche im Objekt mit <code>new</code> oder <code>malloc</code> allozierten Resourcen
auf dem Heap müssen freigegeben werden. Außerdem sollten ggf. offene Verbindungen
(offene Dateien, Datenbankverbindungen, Kommunikation, ...) geschlossen werden,
wenn sie durch das Objekt geöffnet wurden bzw. in der Verantwortung des Objekts
stehen. Einfache Datentypen oder Objekte, die nicht per Referenz oder Pointer
im Objekt verwaltet werden, werden automatisch freigegeben (denken Sie an das
Speichermodell - diese Daten &quot;stehen&quot; direkt im Speicherbereich des Objekts).</p>
<p>Der Speicherbereich für das Objekt selbst wird nach Beendigung des Destruktors
automatisch freigegeben (auf dem Stack wegen des Verlassen des Scopes (=&gt;
automatische Variable), auf dem Heap durch das vorherige Aufrufen von <code>delete</code>
auf den Pointer auf das Objekt im Heap), d.h. Sie brauchen im Destruktor <strong>kein</strong>
<code>delete</code> auf &quot;sich selbst&quot; (das ist wie oben demonstriert sogar schädlich)!</p>
<div class="box notices cstyle caution">
  <div class="box-label">
    <i class="fa-fw fas fa-hand"></i> Warnung
  </div>
  <div class="box-content">
<p>Auch wenn es zunächst irgendwie sinnvoll aussieht - rufen Sie <strong>niemals nie</strong> <code>delete this</code> im Destruktor auf!</p>
  </div>
</div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/deletethis.cpp" target="_blank"><span class="title">Konsole: deletethis.cpp</span></a></span></div>
<h2 id="c11-default-und-delete">C++11: <em>default</em> und <em>delete</em></h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Dummy() <span style="color:#f92672">=</span> <span style="color:#66d9ef">default</span>;
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">int</span> a) { value <span style="color:#f92672">=</span> a; }
</span></span><span style="display:flex;"><span>    Dummy(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>a) <span style="color:#f92672">=</span> <span style="color:#66d9ef">delete</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> value;
</span></span><span style="display:flex;"><span>    Dummy <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> Dummy <span style="color:#f92672">&amp;</span>d);
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<ul>
<li>C++ erzeugt etliche triviale Methoden/Operatoren, sofern man diese nicht
selbst definiert:
<ul>
<li>Methoden:
<ul>
<li>Standardkonstruktor</li>
<li>Copy-Konstruktor</li>
<li>Zuweisungsoperator</li>
<li>Destruktor</li>
</ul>
</li>
<li>Operatoren:
<ul>
<li>Operator <code>new</code></li>
<li>Operator <code>delete</code></li>
<li>Adresse von</li>
<li>Indirektion</li>
<li>Elementzugriff</li>
<li>Elementindirektion</li>
</ul>
</li>
</ul>
</li>
<li>Vor C++11: Default-Methode/-Operator verbieten: Sichtbarkeit auf <code>private</code>
setzen (Definition nicht nötig)</li>
<li>Ab C++11: Schlüsselwort <code>delete</code>: Entfernt Default-Methode/-Operator</li>
<li>C++11: Default-Methode/-Operator zusätzlich zu selbst implementierten:
Schlüsselwort <code>default</code></li>
</ul>
<h2 id="statische-methoden-und-attribute">Statische Methoden und Attribute</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Studi</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> count;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Studi<span style="color:#f92672">::</span>count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Studi<span style="color:#f92672">::</span>getCount() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Studi<span style="color:#f92672">::</span>count;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>Deklaration als <code>static</code> <strong>nicht</strong> in Implementierung wiederholen</li>
<li>Statische Attribute: Initialisierung <strong>immer</strong> außerhalb der Klasse!</li>
</ul>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/Studi.cpp" target="_blank"><span class="title">Konsole: Studi.cpp (static)</span></a></span></div>
<h2 id="konstante-methoden-und-kontexte">Konstante Methoden und Kontexte</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Studi</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCredits</span>() <span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCredits</span>();
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Studi<span style="color:#f92672">::</span>getCredits() <span style="color:#66d9ef">const</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> credits;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> Studi<span style="color:#f92672">::</span>getCredits() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> credits;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Das <code>const</code> gehört zur Signatur der Methode!</p>
<p>So wie im Beispiel gezeigt, gibt es jetzt zwei Methoden <code>getCredits()</code> - eine davon
ist konstant. Konstante Methoden dürfen auf konstanten Objekten/Referenzen aufgerufen
werden.</p>
<p>Was passiert, wenn das <code>const</code> auf der linken Seite steht? Dann bezieht es sich
auf den Rückgabewert:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> foo <span style="color:#a6e22e">wuppie</span>(foo<span style="color:#f92672">&amp;</span>, foo<span style="color:#f92672">&amp;</span>);</span></span></code></pre></div>
<p>Hier darf der Rückgabewert nicht als L-Wert benutzt werden: <code>wuppie(a,b) = c;</code> ist verboten.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/Studi.cpp" target="_blank"><span class="title">Konsole: Studi.cpp (const)</span></a></span></div>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>Klassen: Destruktoren, Copy-Konstruktor, Zuweisungsoperator</li>
<li>Vorsicht mit Default-*struktoren/-operatoren</li>
<li>Statische Methoden und Attribute:
<ul>
<li>Deklaration als <code>static</code> <strong>nicht</strong> in Implementierung wiederholen</li>
<li>Statische Attribute: Initialisierung außerhalb der Klasse!</li>
</ul>
</li>
<li>Konstante Methoden und Kontexte
<ul>
<li><code>const</code> gehört zur Signatur der Methode!</li>
<li>Konstante Methoden dürfen auf konstanten Objekten/Referenzen aufgerufen werden</li>
</ul>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Konstruktor, Copy-Konstruktor, Zuweisungsoperator?</strong></p>
<ul>
<li>
<p>Erklären Sie die folgenden Anweisungen, worin liegt der Unterschied?</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy a;
</span></span><span style="display:flex;"><span>Dummy b <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>);</span></span></code></pre></div>
</li>
<li>
<p>Erklären Sie die folgenden Anweisungen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy a;
</span></span><span style="display:flex;"><span>Dummy b <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>Dummy d <span style="color:#f92672">=</span> b;
</span></span><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">e</span>(b);
</span></span><span style="display:flex;"><span>Dummy f;
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">=</span> b;</span></span></code></pre></div>
</li>
</ul>
<p><strong>Destruktor</strong></p>
<ul>
<li>Erklären Sie die Wirkungsweise eines Destruktors.</li>
<li>Wann wird ein Destruktor aufgerufen?</li>
<li>Warum ist <code>delete this</code> keine gute Idee (nicht nur im Destruktor)?!</li>
<li>Was sollten Sie im Destruktor aufräumen, was nicht?</li>
</ul>
<p><strong>Die &quot;Großen Drei&quot;</strong></p>
<ol>
<li>
<p>Beschreiben Sie den Unterschied der folgenden beiden Codeblöcke (<code>A</code> sei
eine beliebige Klasse):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>A a, b <span style="color:#f92672">=</span> a;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>A a, b; b <span style="color:#f92672">=</span> a;</span></span></code></pre></div>
</li>
<li>
<p>Erläutern Sie an einem <strong>Beispiel</strong> die Regel der &quot;Big Three&quot;:</p>
<blockquote>
<p>Ist ein Copy-Konstruktor, ein Destruktor oder ein eigener
Zuweisungsoperator notwendig, muss man in der Regel die jeweils anderen
beiden ebenfalls bereit stellen.</p>
</blockquote>
</li>
<li>
<p>Beim Zuweisungsoperator werden Selbstzuweisungen, d.h. ein Objekt soll an
sich selbst zugewiesen werden, üblicherweise durch eine entsprechende
Prüfung vermieden.</p>
<p>Begründen Sie diese Praxis, indem Sie ein <strong>Beispiel konstruieren</strong>, bei
dem es zu Datenverlust kommt, wenn die Selbstzuweisung nicht unterbunden
wird.</p>
<div class="expand">
  <input type="checkbox" id="R-expand-7045bd7a16c2295422cfa3cb2c5437a4" aria-controls="R-expandcontent-7045bd7a16c2295422cfa3cb2c5437a4">
  <label class="expand-label" for="R-expand-7045bd7a16c2295422cfa3cb2c5437a4">
    <i class="expander-icon fa-fw fas fa-chevron-down"></i>
    <i class="expander-icon fa-fw fas fa-chevron-right"></i> Show Me
  </label>
  <div id="R-expandcontent-7045bd7a16c2295422cfa3cb2c5437a4" class="expand-content">
<pre><code>Wenn vor der Wertzuweisung der alte Inhalt freigegeben werden muss, führt
Selbstzuweisung zum Fehler.

Können Sie ein konkretes Beispiel angeben?
</code></pre>
  </div>
</div>
</li>
</ol>
<p><strong>Quiz: Was passiert bei den folgenden Aufrufen?</strong></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> Foo <span style="color:#f92672">&amp;</span>bar(<span style="color:#66d9ef">const</span> vector<span style="color:#f92672">&lt;</span>Foo<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>a) { <span style="color:#66d9ef">return</span> a[<span style="color:#ae81ff">0</span>]; }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Foo f;  vector<span style="color:#f92672">&lt;</span>Foo<span style="color:#f92672">&gt;</span> a <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;hello&#34;</span>, <span style="color:#e6db74">&#34;world&#34;</span>, <span style="color:#e6db74">&#34;:)&#34;</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Foo s1 <span style="color:#f92672">=</span> f.bar(a);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> Foo <span style="color:#f92672">&amp;</span>s2 <span style="color:#f92672">=</span> f.bar(a);
</span></span><span style="display:flex;"><span>    Foo <span style="color:#f92672">&amp;</span>s3 <span style="color:#f92672">=</span> f.bar(a);
</span></span><span style="display:flex;"><span>    Foo s4;
</span></span><span style="display:flex;"><span>    s4 <span style="color:#f92672">=</span> f.bar(a);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> EXIT_SUCCESS;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Operatoren</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>In C++ können existierende Operatoren überladen werden, etwa für die Nutzung mit eigenen Klassen. Dabei
kann die Überladung innerhalb einer Klassendefinition passieren (analog zur Implementierung einer Methode)
oder außerhalb der Klasse (analog zur Definition einer überladenen Funktion).</p>
<p>Beim Überladen in einer Klasse hat der Operator nur einen Parameter (beim Aufruf das Objekt auf der rechten
Seite) und man kann auf die Attribute der Klasse direkt zugreifen. Bei der Überladung außerhalb der Klasse
hat der Operator zwei Parameter und darf nicht auf die Attribute der Klasse zugreifen.</p>
<p>Man kann Funktionen, Methoden/Operatoren und Klassen als <code>friend</code> einer Klasse deklarieren. Damit bricht
man die Kapselung auf und erlaubt den Freunden den direkten Zugriff auf die internen Attribute einer Klasse.</p>
<p>Um bei der Implementierung von Post- und Präfix-Operatoren die Variante für den Compiler unterscheidbar zu
machen, hat die Signatur der Postfix-Variante einen Dummy-Parameter vom Typ <code>int</code>. Dieser wird beim Aufruf
aber nicht genutzt.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/lCe0mmO613M' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL C++: Operatoren</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Implizite Typkonvertierungen bei Operatoren</li> <li>(K3) Überladen von Operatoren (innerhalb bzw. außerhalb einer Klasse)</li> <li>(K3) Anwendung der Deklaration als <code>friend</code></li> <li>(K3) Implementierung von Post- und Präfix-Operatoren</li></ul>
  </div>
</div>




    <h2 id="überladen-von-operatoren-in-klassen">Überladen von Operatoren <em>in</em> Klassen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>MyString a, b(<span style="color:#e6db74">&#34;hallo&#34;</span>);
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> b;      <span style="color:#75715e">// ???
</span></span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>a.<span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(b);</span></span></code></pre></div>
<p>Aufruf <code>a=b</code> ist äquivalent zu <code>a.operator=(b)</code></p>
<p>Überladen ähnlich wie bei Methoden:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyString</span> {
</span></span><span style="display:flex;"><span>    MyString <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> MyString <span style="color:#f92672">&amp;</span>s) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>s) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// mach was :-)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Analog weitere Operatoren, etwa <code>operator==</code>, <code>operator+</code>, ... überladen</p>
<h2 id="überladen-von-operatoren-außerhalb-von-klassen">Überladen von Operatoren <em>außerhalb</em> von Klassen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>MyString <span style="color:#a6e22e">a</span>(<span style="color:#e6db74">&#34;hallo&#34;</span>);
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> a <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyString</span> {
</span></span><span style="display:flex;"><span>    ostream <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">&lt;&lt;</span>(ostream <span style="color:#f92672">&amp;</span>o) { <span style="color:#66d9ef">return</span> o <span style="color:#f92672">&lt;&lt;</span> str; }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><span class='alert'><strong>So funktioniert das leider nicht!</strong></span></p>
<ul>
<li>Erinnerung: <code>cout &lt;&lt; a</code> entspricht <code>cout.operator&lt;&lt;(a)</code>
<ul>
<li>Operator kann nicht in <code>MyString</code> überladen werden!</li>
<li>Klasse <code>ostream</code> müsste erweitert werden
=&gt; Geht aber nicht, da System-weite Klasse!</li>
</ul>
</li>
</ul>
<p>=&gt; Lösung: Operator <span class='alert'><strong>außerhalb</strong></span> der Klasse überladen =&gt; 2 Parameter</p>
<h2 id="überladen-von-operatoren-außerhalb-von-klassen-cnt">Überladen von Operatoren <em>außerhalb</em> von Klassen (cnt.)</h2>
<p>Operator außerhalb der Klasse überladen =&gt; 2 Parameter</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>ostream <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">&lt;&lt;</span>(ostream <span style="color:#f92672">&amp;</span>out, <span style="color:#66d9ef">const</span> MyString <span style="color:#f92672">&amp;</span>s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> out <span style="color:#f92672">&lt;&lt;</span> s.str;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li><span class='alert'>Nachteil</span>: Benötigt Zugriff auf Klassen-Interna
<ul>
<li>
<p>entweder umständlich über Getter-Funktionen</p>
</li>
<li>
<p>oder als <code>friend</code> der Klasse <code>MyString</code> deklarieren</p>
<p>Alternativ Zugriffsmethoden (aka <em>Getter</em>) nutzen wie <code>toString()</code> ...</p>
</li>
</ul>
</li>
</ul>
<p><strong>Anmerkung</strong>: Rückgabe der Referenz auf den Stream erlaubt die typische
Verkettung: <code>cout &lt;&lt; s1 &lt;&lt; s2 &lt;&lt; endl;</code></p>
<h2 id="meine-freunde-dürfen-in-mein-wohnzimmer">Meine Freunde dürfen in mein Wohnzimmer</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestDummy</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">ganzTolleMethode</span>();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dummy</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>value;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">friend</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestDummy</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">friend</span> <span style="color:#66d9ef">int</span> TestDummy<span style="color:#f92672">::</span>ganzTolleMethode();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">friend</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span>();
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<h2 id="fast-alle-operatoren-lassen-sich-überladen">(Fast) alle Operatoren lassen sich überladen</h2>
<ul>
<li>
<p>Alle normalen arithmetischen Operatoren</p>
</li>
<li>
<p>Zuweisung, Vergleich, Ein-/Ausgabe</p>
</li>
<li>
<p>Index-Operator <code>[]</code>, Pointer-Dereferenzierung <code>*</code> und
<code>-&gt;</code>, sowie <code>()</code>, <code>new</code> und <code>delete</code> (auch in <code>[]</code>-Form)</p>
</li>
<li>
<p><strong>Ausnahmen</strong>:</p>
<ol>
<li><span class='alert'><strong>.</strong></span></li>
<li><span class='alert'><strong>::</strong></span></li>
<li><span class='alert'><strong>?:</strong></span></li>
<li><span class='alert'><strong>sizeof</strong></span></li>
</ol>
</li>
<li>
<p>Anmerkungen:</p>
<ul>
<li>Beim Überladen muss die Arität erhalten bleiben</li>
<li>Nur <em>existierende</em> Operatoren lassen sich überladen
=&gt; Es lassen sich keine neuen Operatoren erschaffen</li>
</ul>
</li>
</ul>
<p>Vgl. Tabelle 9.1 (S. 318) im <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp4-operators.html#id_Breymann2011">[Breymann2011]</a></p>
<h2 id="implizite-typkonvertierungen-bei-aufruf">Implizite Typkonvertierungen bei Aufruf</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>MyString s;
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;123&#34;</span>;     <span style="color:#75715e">// ???
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;123&#34;</span> <span style="color:#f92672">!=</span> s;     <span style="color:#75715e">// ???
</span></span></span></code></pre></div>
<ul>
<li>
<p>Operatoren <strong>in</strong> Klasse überladen: <span class='alert'>Typ der linken Seite muss</span> <span class='alert'><strong>exakt</strong></span> <span class='alert'>passen</span></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyString</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    MyString(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">!=</span>(<span style="color:#66d9ef">const</span> MyString<span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MyString s;
</span></span><span style="display:flex;"><span>s <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;123&#34;</span>;    <span style="color:#75715e">// impliziter Aufruf des Konstruktors, danach MyString::operator!=
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#e6db74">&#34;123&#34;</span> <span style="color:#f92672">!=</span> s;    <span style="color:#75715e">// KEIN operator!=(char*, MyString&amp;) vorhanden!
</span></span></span></code></pre></div>
<p>Das ist letztlich wie bei einem Methodenaufruf: Um die richtige Methode aufzurufen, muss
der Typ (die Klasse) des Objekts bekannt sein.</p>
</li>
<li>
<p>Operatoren <strong>außerhalb</strong> überladen: Konvertierung auf <em>beiden</em> Seiten möglich</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyString</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    MyString(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">operator</span><span style="color:#f92672">!=</span>(<span style="color:#66d9ef">const</span> MyString<span style="color:#f92672">&amp;</span>, <span style="color:#66d9ef">const</span> MyString<span style="color:#f92672">&amp;</span>);</span></span></code></pre></div>
</li>
</ul>
<p><span class='alert'><strong>NIEMALS</strong></span> beide Formen <span class='alert'>gleichzeitig</span> für einen Operator implementieren!</p>
<h2 id="anmerkung-zu--und--hahahugoshortcode27s0hbhb--operatoren-präfix-und-postfix">Anmerkung zu &quot;++&quot; und &quot;-<span class="math align-center">$\,$</span>-&quot; Operatoren: Präfix und Postfix</h2>
<ul>
<li>
<p>Präfix: <code>o1 = ++o2;</code></p>
<ul>
<li>Objekt soll <strong>vor Auswertung</strong> inkrementiert werden</li>
<li>Signatur: <code>Typ &amp;operator++()</code></li>
</ul>
</li>
<li>
<p>Postfix: <code>o1 = o2++;</code></p>
<ul>
<li>Objekt soll erst <strong>nach Auswertung</strong> inkrementiert werden</li>
<li>Signatur: <code>Typ operator++(int)</code>
(=&gt; <code>int</code> dient nur zur Unterscheidung der Präfix-Variante, wird <strong>nie</strong> benutzt)</li>
</ul>
</li>
</ul>
<h2 id="weitere-anmerkungen">Weitere Anmerkungen</h2>
<ul>
<li>
<p>Operatoren werden <span class='alert'><strong>nicht</strong></span> vom System zusammengesetzt</p>
<ul>
<li><code>operator+</code> und <code>operator+=</code> sind zwei <span class='alert'>verschiedene</span> Operatoren!</li>
<li>Implementierung ist prinzipiell <span class='alert'>unabhängig</span>!
=&gt; Erwartung: <code>operator+=</code> <span class="math align-center">$\;==\;$</span> (<code>operator+</code> <span class="math align-center">$\;+\;$</span> <code>operator=</code>)</li>
</ul>
</li>
<li>
<p>Operatoren lassen sich in C++ verketten:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Dummy <span style="color:#a6e22e">a</span>(<span style="color:#ae81ff">0</span>); Dummy <span style="color:#a6e22e">b</span>(<span style="color:#ae81ff">1</span>); Dummy <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">=</span> b <span style="color:#f92672">=</span> c;  <span style="color:#75715e">// a.operator=(b.operator=(c));
</span></span></span></code></pre></div>
</li>
<li>
<p>Übertreiben Sie nicht!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Firma f;
</span></span><span style="display:flex;"><span>Person p;
</span></span><span style="display:flex;"><span>f <span style="color:#f92672">+=</span> p;  <span style="color:#75715e">// ??!
</span></span></span></code></pre></div>
<p>Nutzen Sie im Zweifel lieber Methoden mit aussagekräftigen Namen!</p>
</li>
</ul>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>Überladen von Operatoren (innerhalb und außerhalb einer Klasse)
<ul>
<li>Innerhalb: 1 Parameter (Objekt auf der rechten Seite)</li>
<li>Außerhalb: 2 Parameter</li>
</ul>
</li>
<li>Zugriff auf Attribute: <code>friend</code> einer Klasse</li>
<li>Implementierung von Post- und Präfix-Operatoren</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Operator &quot;++&quot;</strong></p>
<p>Betrachten Sie die folgende Klasse:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Studi</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Studi(<span style="color:#66d9ef">int</span> credits);
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">~</span>Studi();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>credits;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Implementieren Sie den <code>operator++</code> sowohl in der Präfix- als auch in der Postfix-Variante.</p>
<p><strong>C'toren und Operatoren: Was muss noch <em>deklariert</em> werden?</strong></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Studi</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Studi(<span style="color:#66d9ef">int</span> credits);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>credits;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Studi a(<span style="color:#ae81ff">1</span>), b, <span style="color:#f92672">*</span>c <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Studi(<span style="color:#ae81ff">99</span>);
</span></span><span style="display:flex;"><span>    b <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>c<span style="color:#f92672">+</span>a<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;b: &#39;&#34;</span> <span style="color:#f92672">&lt;&lt;</span> b <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;&#39; credits&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><strong>Schreiben Sie Code, damit folgender Code kompiliert:</strong></p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>test wuppie;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> fluppie <span style="color:#f92672">=</span> wuppie(<span style="color:#ae81ff">3</span>);</span></span></code></pre></div>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Vererbung und Polymorphie</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>Vererbung analog zu Java passiert in C++ über die &quot;<code>public</code>-Vererbung&quot;: <code>Subklasse : public Superklasse</code>.
Dabei gibt es in C++ <strong>keine</strong> gemeinsame Oberklasse wie <code>Object</code> und entsprechend kein <code>super</code>. (Es
kann auch private Vererbung geben.)</p>
<p>Operatoren und *struktoren werden in den vom Compiler erzeugten Defaults richtig verkettet. Bei der
eigenen Implementierung von Operatoren und Konstruktoren muss zunächst der Operator/Konstruktor der
Basisklasse aufgerufen werden (Basisklassen-Konstruktoren dabei in der Initialisierungsliste!), danach
erfolgt die Implementierung für die eigenen Attribute der abgeleiteten Klasse. Der Zugriff auf die
Elemente der Elternklasse erfolgt dabei über den Namen der Elternklasse und den Scope-Operator (nicht
mit <code>super</code>!). Destruktoren von abgeleiteten Klassen müssen sich dagegen nur um die zusätzlichen
Attribute der abgeleiteten Klasse kümmern, der Basisklassendestruktor wird automatisch verkettet bzw.
aufgerufen.</p>
<p>Abstrakte Klassen in C++ haben mindestens eine abstrakte Methode. Eine Methode ist abstrakt, wenn sie
als &quot;<code>virtual</code>&quot; deklariert ist <strong>und</strong> der Deklaration ein &quot;<code>=0</code>&quot; folgt.</p>
<p>In C++ hat man aus Effizienzgründen per Default statische Polymorphie. Bei der Zuweisung eines Objekts
einer abgeleiteten Klasse (rechte Seite) an ein Objekt vom Typ der Oberklasse (linke Seite) erfolgt
dabei &quot;Slicing&quot;, d.h. alle zusätzlichen Eigenschaften der abgeleiteten Klasse gehen dabei verloren.
Dynamische Polymorphie kann man in C++ nutzen, indem man (a) die gewünschten Methoden in der Basisklasse
als <code>virtual</code> deklariert und (b) für den Zugriff auf die Objekte der abgeleiteten Klasse Pointer oder
Referenzen vom Basisklassen-Typ benutzt.</p>
<p>In C++ ist Mehrfachvererbung möglich, d.h. eine Klasse kann von mehreren anderen Klassen erben. Damit
erbt sie auch das Objekt-Layout aller Elternklassen.</p>
<p>Bei rautenförmigen Vererbungsbeziehung führt dies zu Problemen, da Attribute und Methoden der gemeinsamen
Basisklasse mehrfach vorhanden (über jeden Zweig der Raute).</p>
<p>Zur Umgehung des Problems kann man die gemeinsam genutzten Basisklassen &quot;<code>virtual</code>&quot; deklarieren. Dadurch
sind gemeinsam genutzte Attribute und Methoden nur noch einfach vorhanden. Da die Klassen &quot;in der Raute&quot;
ihrerseits den Konstruktor der Basisklasse aufrufen (könnten) und es dadurch zu Konflikten beim Setzen
der Attribute der Basisklasse kommen kann, gelten bei virtueller Ableitung Sonderregeln: Für die virtuelle
Basisklasse wird die Weiterleitung der Werte aufgehoben (es muss also ein parameterloser Konstruktor existieren,
der durch die direkten Unterklassen aufgerufen wird) und die Klasse am &quot;unteren Ende der Raute&quot; kann direkt
den Konstruktor der virtuellen Basisklasse am &quot;oberen Ende der Raute&quot; aufrufen.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/yiIXDWRpKU4' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL C++: Vererbung und Polymorphie</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Unterschied zwischen <code>public</code>- und <code>private</code>-Vererbung</li> <li>(K2) Unterschied Überladen und Überschreiben</li> <li>(K2) Slicing in C++</li> <li>(K2) Probleme bei Mehrfachvererbung und Einsatz virtueller Basisklassen</li> <li>(K3) <code>public</code>-Vererbung in C++</li> <li>(K3) Verkettung von Operatoren und *struktoren</li> <li>(K3) Statische und dynamische Polymorphie in C++</li> <li>(K3) Abstrakte Klassen in C++</li> <li>(K2) Probleme bei Mehrfachvererbung und Einsatz virtueller Basisklassen</li> <li>(K3) Praktischer Umgang mit Mehrfachvererbung</li></ul>
  </div>
</div>




    <h2 id="vererbung-is-a-beziehung-zw-klassen">Vererbung: &quot;IS-A&quot;-Beziehung zw. Klassen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Person { ... }</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Student(<span style="color:#66d9ef">const</span> string <span style="color:#f92672">&amp;</span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#66d9ef">double</span> c <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.0</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">:</span> Person(name), credits(c) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Student(<span style="color:#66d9ef">const</span> Student <span style="color:#f92672">&amp;</span>s)
</span></span><span style="display:flex;"><span><span style="color:#f92672">:</span> Person(s), credits(s.credits) { }</span></span></code></pre></div>
<p>Analog zu Java:</p>
<ul>
<li><code>Student</code>: abgeleitete Klasse</li>
<li><code>Person</code>: Basisklasse</li>
<li><code>: public</code>: Vererbungsbeziehung (analog zu <code>extends</code> in Java)</li>
<li><code>public</code>-Vererbung: Verhalten wie in Java</li>
<li>Hinweis: Es gibt weitere Spielarten (<code>protected</code>, <code>private</code>), vgl. Semesterliteratur</li>
<li>Ab C++11:
<ul>
<li>Schlüsselwort <code>override</code>:
Die Methode muss eine virtuelle Methode der Klassenhierarchie überschreiben.</li>
<li>Schlüsselwort <code>final</code>:
Die virtuelle Methode darf nicht in abgeleiteten Klassen überschrieben werden.</li>
</ul>
</li>
</ul>
<h3 id="vererbung-und-konstruktoren">Vererbung und Konstruktoren</h3>
<ul>
<li>Defaultkonstruktoren werden automatisch richtig verkettet
<ul>
<li>zuerst Aufruf des Basisklassen-Konstruktors</li>
<li>anschließend Behandlung der zusätzlichen Attribute</li>
</ul>
</li>
<li>Eigene Konstruktoren verketten:
<ul>
<li><span class='alert'>Zuerst</span> Basisklassen-Konstruktor aufrufen (in
Initialisierungsliste!)
=&gt; Konkreten Konstruktor nehmen, nicht <code>super</code> wie in Java</li>
</ul>
</li>
</ul>
<h3 id="vererbung-und-destruktoren">Vererbung und Destruktoren</h3>
<ul>
<li>Defaultdestruktoren werden automatisch richtig verkettet
<ul>
<li>zuerst werden die Destruktoren der zusätzlichen Attribute aufgerufen</li>
<li>dann der Destruktor der Basisklasse</li>
</ul>
</li>
<li>Eigene Destruktoren werden automatisch verkettet</li>
<li>Destruktor abgeleiteter Klasse muss sich nur um zusätzliche Attribute kümmern</li>
</ul>
<h3 id="vererbung-und-operatoren">Vererbung und Operatoren</h3>
<ul>
<li>Defaultoperatoren werden automatisch richtig verkettet
<ul>
<li>zuerst Aufruf des Basisklassen-Operators</li>
<li>anschließend Behandlung der zusätzlichen Attribute</li>
</ul>
</li>
<li>Eigene Operatoren am Beispiel Zuweisungsoperator:
<ul>
<li>
<p>Zuerst den Zuweisungsoperator der Basisklasse aufrufen</p>
</li>
<li>
<p>Zugriff über Superklassennamen und Scope-Operator (nicht mit <code>super</code>!)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> Student <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(<span style="color:#66d9ef">const</span> Student <span style="color:#f92672">&amp;</span>s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">&amp;</span>s) {
</span></span><span style="display:flex;"><span>        Person<span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span><span style="color:#f92672">=</span>(s);
</span></span><span style="display:flex;"><span>        credits <span style="color:#f92672">=</span> s.credits;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
</li>
</ul>
<h3 id="vererbung-von-freundschaften">Vererbung von Freundschaften</h3>
<ul>
<li>Freundschaften werden nicht vererbt!</li>
<li><code>friends</code> der Basisklasse haben keinen Zugriff auf zusätzliche
private Attribute/Methoden der Unterklassen</li>
<li>Aber: weiterhin Zugriff auf die geerbten privaten Elemente!</li>
</ul>
<h2 id="abstrakte-klassen">Abstrakte Klassen</h2>
<ul>
<li>Eine <strong>Klasse</strong> ist <span class='alert'>abstrakt</span>, wenn sie mindestens eine abstrakte Methode hat</li>
<li>Eine <strong>Methode</strong> ist in C++ <span class='alert'>abstrakt</span>, wenn sie
<ol>
<li>als <span class='alert'>virtuell</span> deklariert ist, <strong>und</strong></li>
<li>der Deklaration ein &quot;<code>=0</code>&quot; folgt</li>
</ol>
</li>
</ul>
<p><span class='alert'>Abstrakte Methoden</span> können <span class='alert'>Implementierung</span> haben! =&gt; Implementierung <span class='alert'>außerhalb</span> der Klassendeklaration</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">virtual</span> string toString() <span style="color:#66d9ef">const</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string Person<span style="color:#f92672">::</span>toString() <span style="color:#66d9ef">const</span> { ... }  <span style="color:#75715e">// Implementierung :-)
</span></span></span></code></pre></div>
<h2 id="polymorphie-was-passiert-im-folgenden-beispiel">Polymorphie: Was passiert im folgenden Beispiel?</h2>
<p>IS-A Beziehung: Objekte können als Objekte ihrer Oberklasse behandelt werden</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> { ... }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Person { ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Student <span style="color:#a6e22e">s</span>(<span style="color:#e6db74">&#34;Heinz&#34;</span>, <span style="color:#e6db74">&#34;heizer&#34;</span>);
</span></span><span style="display:flex;"><span>Person <span style="color:#f92672">&amp;</span>p <span style="color:#f92672">=</span> s;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> s.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> p.toString() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/polyStat.cpp" target="_blank"><span class="title">Konsole: polyStat.cpp</span></a></span></div>
<p>Antwort: Es wird die falsche Methode aufgerufen!</p>
<ul>
<li><code>s.toString()</code> =&gt; <code>Student::toString()</code> =&gt; wie erwartet</li>
<li><code>p.toString()</code> =&gt; <code>Person::toString()</code> =&gt; <span class='alert'><strong>unerwartet</strong></span>!</li>
</ul>
<h2 id="polymorphie-statisch-und-dynamisch">Polymorphie: statisch und dynamisch</h2>
<ul>
<li>
<p>C++ entscheidet zur <span class='alert'><strong>Kompilierzeit</strong></span>, welche Methode aufgerufen wird</p>
<ul>
<li><code>p</code> ist vom Typ <code>Person</code> =&gt; <code>p.toString()</code>
=&gt; <code>Person::toString()</code></li>
<li>Dieses Verhalten wird <strong>statisches Binden</strong> genannt.</li>
</ul>
</li>
<li>
<p>Von Java her bekannt: <strong>dynamisches Binden</strong></p>
<ul>
<li>Typ eines Objektes wird zur <strong>Laufzeit</strong> ausgewertet</li>
</ul>
</li>
</ul>
<h2 id="dynamisches-binden-geht-auch-in-c-">Dynamisches Binden geht auch in C++ ...</h2>
<p>Für dynamische Polymorphie müssen in C++ drei Bedingungen erfüllt sein:</p>
<ol>
<li>
<p>Methoden in <strong>Basisklasse</strong> als <strong>virtuelle Funktion</strong> deklarieren
=&gt; Schlüsselwort <code>virtual</code></p>
</li>
<li>
<p>Virtuelle Methoden in Subklasse normal überschreiben (gleiche Signatur)</p>
<p>Zusätzlich muss der Rückgabetyp exakt übereinstimmen
(Ausnahme: Rückgabe Pointer/Referenz auf <em>abgeleitete</em> Klasse)</p>
</li>
<li>
<p>Objekte mittels Basisklassen-Referenzen bzw. -Pointer zugreifen (siehe nächste Folie)</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">virtual</span> string <span style="color:#a6e22e">toString</span>() <span style="color:#66d9ef">const</span> { ... }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/polyDyn.cpp" target="_blank"><span class="title">Konsole: polyDyn.cpp</span></a></span></div>
<h2 id="vorsicht-slicing">Vorsicht Slicing</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Student <span style="color:#a6e22e">s</span>(<span style="color:#e6db74">&#34;Heinz&#34;</span>, <span style="color:#ae81ff">10.0</span>);
</span></span><span style="display:flex;"><span>Person <span style="color:#a6e22e">p</span>(<span style="color:#e6db74">&#34;Holger&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> s;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt s (Student): &#34;</span> <span style="color:#f92672">&lt;&lt;</span> s.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt p (Person):  &#34;</span> <span style="color:#f92672">&lt;&lt;</span> p.toString() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/polySlicing.cpp" target="_blank"><span class="title">Konsole polySlicing.cpp</span></a></span></div>
<p>=&gt; <code>p</code> ist vom Typ <code>Person</code></p>
<ul>
<li>Zuweisung von Objekten vom Typ <code>Student</code> ist erlaubt (Polymorphie)</li>
<li><code>p</code> hat aber nur Speicherplatz für genau eine <code>Person</code>
=&gt; &quot;Abschneiden&quot; aller Elemente, die nicht Bestandteil von
<code>Person</code> sind!</li>
<li>Slicing passiert immer beim <span class='alert'>Kopieren/Zuweisen</span> von Objekten</li>
</ul>
<p>=&gt; <strong>Dyn. Polymorphie</strong> in C++ immer über <span class='alert'><strong>Referenzen</strong></span>
(bzw. Pointer) <strong>und</strong> <span class='alert'><strong>virtuelle Methoden</strong></span></p>
<p>Wir hatten die Methode <code>toString</code> in der Basisklasse <code>Person</code> zwar als <code>virtual</code> deklariert,
und wir hatten diese Methode in der ableitenden Klasse <code>Studi</code> passend überschrieben.</p>
<p>Damit haben wir aber nur zwei der drei Bedingungen für dynamische Polymorphie in C++
erfüllt. Wenn wir Objekte vom Typ <code>Studi</code> über eine normale Variable vom Typ <code>Person</code>
handhaben, haben wir immer noch statische Polymorphie - uns stehen also nur die Methoden
aus und in <code>Person</code> zur Verfügung.</p>
<p>Zusätzlich haben wir durch die Zuweisung <code>p = s;</code> das Objekt <code>s</code> in den Speicherbereich
von <code>p</code> &quot;gequetscht&quot;. Dieses ist vom Typ <code>Person</code> und hat auch nur (Speicher-) Platz für
Elemente dieses Typs. Alles andere wird bei der Zuweisung &quot;abgeschnitten&quot;, d.h. <code>p</code> ist
immer noch ein Objekt vom Typ <code>Person</code>, der zusätzliche Rest aus <code>Studi</code> fehlt ...</p>
<p>Wir könnten das durch Pointer oder Referenzen heilen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Variante mit Basisklassen-Pointer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Student <span style="color:#a6e22e">s</span>(<span style="color:#e6db74">&#34;Heinz&#34;</span>, <span style="color:#ae81ff">10.0</span>);
</span></span><span style="display:flex;"><span>Person <span style="color:#f92672">*</span>p;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>s;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt s (Student): &#34;</span> <span style="color:#f92672">&lt;&lt;</span> s.toString()  <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt p (Person):  &#34;</span> <span style="color:#f92672">&lt;&lt;</span> p<span style="color:#f92672">-&gt;</span>toString() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<p><em>Anmerkung</em>: Der Operator <code>-&gt;</code> ist die zusammengefasste Dereferenzierung des Pointers und
der nachfolgende Zugriff auf Methoden oder Attribute. Man könnte also entsprechend auch
<code>(*p).toString()</code> statt <code>p-&gt;toString()</code> schreiben.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Variante mit Basisklassen-Referenz
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Student <span style="color:#a6e22e">s</span>(<span style="color:#e6db74">&#34;Heinz&#34;</span>, <span style="color:#ae81ff">10.0</span>);
</span></span><span style="display:flex;"><span>Person <span style="color:#f92672">&amp;</span>p <span style="color:#f92672">=</span> s;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt s (Student): &#34;</span> <span style="color:#f92672">&lt;&lt;</span> s.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Objekt p (Person):  &#34;</span> <span style="color:#f92672">&lt;&lt;</span> p.toString() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<p>Erst damit erfüllen wir die dritte Bedingung und haben echte dynamische Polymorphie in C++.</p>
<h2 id="anmerkungen-zu-polymorphie-in-c">Anmerkungen zu Polymorphie in C++</h2>
<ul>
<li><strong>Gestaltung der API</strong>:
<ul>
<li>Zum Überschreiben gedachte Methoden als virtuell deklarieren</li>
<li>Nicht virtuelle Methoden aus der Basisklasse nicht überschreiben</li>
</ul>
</li>
<li>Trennung von Deklaration und Implementierung:
<ul>
<li>Deklaration als virtuelle Funktion nur im Deklarationsteil</li>
<li>Keine Wiederholung im Implementierungsteil (analog zu Defaultwerten)</li>
</ul>
</li>
<li>&quot;Virtualität vererbt sich&quot;:
<ul>
<li>Virtuelle Funktionen sind virtuell in der Vererbungshierarchie hinab ab
der ersten Deklaration als virtuell</li>
</ul>
</li>
<li>Virtualität ist &quot;teuer&quot;: Es muss eine Tabelle aller virtuellen Funktionen aufgebaut werden und zur
Laufzeit geprüft werden, welche Funktion genommen werden soll</li>
</ul>
<h2 id="mehrfachvererbung-in-c">Mehrfachvererbung in C++</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HiWi</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Student, <span style="color:#66d9ef">public</span> Angestellter {...};</span></span></code></pre></div>
<p><a href="#R-image-b62091cef91e6af28b70178129c08114" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-studi_new.png?width=50%25&height=auto" style=" height: auto; width: 50%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b62091cef91e6af28b70178129c08114"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-studi_new.png?width=50%25&height=auto"></a></p>
<div style="text-align: right;"><span class="badge cstyle default"><span class="badge-content">Hinweis Speicherlayout ...</span></span></div>
<h3 id="problem-1-gleichnamige-methoden-aus-basisklassen-geerbt">Problem 1: Gleichnamige Methoden aus Basisklassen geerbt</h3>
<p><a href="#R-image-84e63b2307127cf3f9ab48fb06959a69" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-namenskollision_new.png?width=50%25&height=auto" style=" height: auto; width: 50%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-84e63b2307127cf3f9ab48fb06959a69"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-namenskollision_new.png?width=50%25&height=auto"></a></p>
<p>Namenskollision bei Mehrfachvererbung auflösen:</p>
<ul>
<li>
<p>Scope-Operator <code>::</code> nutzen:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>HiWi <span style="color:#a6e22e">h</span>(<span style="color:#e6db74">&#34;Anne&#34;</span>, <span style="color:#ae81ff">23.0</span>, <span style="color:#ae81ff">40.0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Student<span style="color:#f92672">::</span>toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Angestellter<span style="color:#f92672">::</span>toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Student<span style="color:#f92672">::</span>getName() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Angestellter<span style="color:#f92672">::</span>getName() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
</li>
<li>
<p>Methode in abgeleiteter Klasse überschreiben</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>HiWi <span style="color:#a6e22e">h</span>(<span style="color:#e6db74">&#34;Anne&#34;</span>, <span style="color:#ae81ff">23.0</span>, <span style="color:#ae81ff">40.0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Student<span style="color:#f92672">::</span>toString() <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> h.Angestellter<span style="color:#f92672">::</span>toString() <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
</li>
</ul>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/vererbungMultiMethoden.cpp" target="_blank"><span class="title">Konsole vererbungMultiMethoden.cpp</span></a></span></div>
<h3 id="problem-2-gemeinsam-geerbte-attribute-sind-mehrfach-vorhanden">Problem 2: Gemeinsam geerbte Attribute sind mehrfach vorhanden</h3>
<p><a href="#R-image-4567006ffc4ae2313b93dcd7226f8f38" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-attributkollision_new.png?width=50%25&height=auto" style=" height: auto; width: 50%;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4567006ffc4ae2313b93dcd7226f8f38"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/99-languages/cpp5-inheritance/mehrfachvererbung-attributkollision_new.png?width=50%25&height=auto"></a></p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/vererbungMultiAttribute.cpp" target="_blank"><span class="title">Konsole vererbungMultiAttribute.cpp</span></a></span></div>
<h2 id="mehrfachvererbung-in-c-virtuelle-basisklassen">Mehrfachvererbung in C++: Virtuelle Basisklassen</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Angestellter</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">public</span> Person {...};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">public</span> Person {...};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HiWi</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Student, <span style="color:#66d9ef">public</span> Angestellter {...};</span></span></code></pre></div>
<ul>
<li><code>Person</code> ist jetzt eine <span class='alert'>virtuelle Basisklasse</span></li>
<li>Auswirkungen erst in Klasse <code>HiWi</code></li>
<li>Dadurch sind gemeinsam genutzte Anteile nur einfach vorhanden</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Student <span style="color:#a6e22e">s</span>(<span style="color:#e6db74">&#34;Heinz&#34;</span>, <span style="color:#ae81ff">10.0</span>);           <span style="color:#75715e">// wie vorher: nur EIN name-Feld
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Angestellter <span style="color:#a6e22e">a</span>(<span style="color:#e6db74">&#34;Holger&#34;</span>, <span style="color:#ae81ff">80.5</span>);     <span style="color:#75715e">// wie vorher: nur EIN name-Feld
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>HiWi <span style="color:#a6e22e">h</span>(<span style="color:#e6db74">&#34;Anne&#34;</span>, <span style="color:#ae81ff">23.0</span>, <span style="color:#ae81ff">40.0</span>);         <span style="color:#75715e">// jetzt auch nur EIN name-Feld
</span></span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/vererbungMultiVirtual.cpp" target="_blank"><span class="title">Konsole vererbungMultiVirtual.cpp</span></a></span></div>
<h2 id="sonderregeln-bei-virtueller-ableitung">Sonderregeln bei virtueller Ableitung</h2>
<p>Virtuelle Ableitung: Potentiell Konflikte zwischen Konstruktoren!</p>
<ul>
<li>Gemeinsam geerbtes Attribut nur noch <span class='alert'>einmal</span> vorhanden</li>
<li>Konstruktoren werden <span class='alert'>nacheinander</span> aufgerufen, alle wollen das
gemeinsame Attribut initialisieren (durch Aufruf des Konstruktors der
jeweiligen Basisklasse)</li>
<li>Zuletzt aufgerufener Konstruktor würde &quot;gewinnen&quot;</li>
</ul>
<p>Deshalb gibt es bei virtueller Ableitung folgende Sonderregeln:</p>
<ol>
<li>
<p>Für virtuelle Basisklassen ist <strong>Mechanismus des Weiterreichens</strong> von
Initialisierungswerten <span class='alert'><strong>deaktiviert</strong></span></p>
</li>
<li>
<p>Konstruktor einer virtuellen Basisklasse kann in Initialisierungsliste von
indirekten Unterklassen aufgerufen werden</p>
<p>Sonst wird der Defaultkonstruktor der virtuellen Basisklasse genutzt!</p>
</li>
</ol>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/vererbungMultiVirtual.cpp" target="_blank"><span class="title">Konsole vererbungMultiVirtual.cpp (Basiskonstruktor)</span></a></span></div>
<h2 id="mehrfachvererbung-in-c-ist-ein-recht-kompliziertes-thema">Mehrfachvererbung in C++ ist ein recht kompliziertes Thema</h2>
<p>Warum ist die Möglichkeit dennoch nützlich?</p>
<ul>
<li>
<p>In Java kann man nur von einer Klasse erben, aber viele <span class='alert'>Interfaces</span>
implementieren. In C++ gibt es keine Interfaces ...</p>
<p>=&gt; Interfaces mit abstrakten Klassen Interfaces simulieren</p>
<p>=&gt; Mehrfachvererbung!</p>
</li>
</ul>
<p>Tatsächlich dürfen Java-Interfaces mittlerweile auch Verhalten implementieren
und vererben, wodurch eine ähnliche Situation wie hier in C++ entsteht und es
ausgefeilte Regeln für die Konfliktauflösung braucht. Allerdings ist das in
Java auf Verhalten beschränkt, d.h. Attribute (Zustand) ist in Java-Interfaces
(noch) nicht erlaubt.</p>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p><code>public</code>-Vererbung in C++: <code>Subklasse : public Superklasse</code></p>
</li>
<li>
<p>Keine gemeinsame Oberklasse wie <code>Object</code>, kein <code>super</code></p>
</li>
<li>
<p>Verkettung von Operatoren und *struktoren</p>
</li>
<li>
<p>Abstrakte Klassen in C++</p>
</li>
<li>
<p>Statische und dynamische Polymorphie in C++</p>
<ul>
<li>Methoden in Basisklasse als <code>virtual</code> deklarieren</li>
<li>Dyn. Polymorphie nur mittels Pointer/Referenzen</li>
<li>Slicing in C++ (bei Call-by-Value)</li>
</ul>
</li>
<li>
<p>Konzept der Mehrfachvererbung</p>
</li>
<li>
<p>Problem bei rautenförmiger Vererbungsbeziehung: Attribute und Methoden mehrfach vorhanden</p>
</li>
<li>
<p>Virtuelle Basisklassen: Gemeinsam genutzte Attribute nur noch einfach vorhanden</p>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Destruktoren und Vererbung</strong></p>
<p>Welcher Destruktor würde im folgenden Beispiel aufgerufen?!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Student <span style="color:#f92672">*</span>s3 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Student(<span style="color:#e6db74">&#34;Holger&#34;</span>, <span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span>Person  <span style="color:#f92672">*</span>p  <span style="color:#f92672">=</span> s3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">delete</span> p;</span></span></code></pre></div>
<p><strong>Vererbung</strong></p>
<ul>
<li>Welche Formen der (einfachen) Vererbung gibt es in C++ neben der
<code>public</code>-Form noch? Was bewirken diese Formen?</li>
<li>Warum wird in C++ die <code>public</code>-Form der Vererbung vorgezogen
(zumindest, wenn man dynamische Polymorphie nutzen will)?</li>
<li>Wie müssen Konstruktoren/Destruktoren richtig verkettet werden?</li>
<li>Arbeiten Sie das Beispiel auf S. 274 im <a href="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/index.html#id_Breymann2011">[Breymann2011]</a>:
&quot;Der C++ Programmierer&quot; durch.</li>
</ul>
<p><strong>Virtuelle Methoden, Dynamische Polymorphie in C++</strong></p>
<ol>
<li>Was sind virtuelle Methoden und wie setze ich diese ein?</li>
<li>Wozu brauche ich in C++ virtuelle Klassen? Was muss beachtet werden?</li>
<li>Was passiert in C++, wenn eine virtuelle Methode innerhalb von Konstruktoren
verwendet wird? Schreiben Sie ein kurzes Programm zur Verdeutlichung.</li>
<li>Wie verhält es sich mit der Problematik aus (a) in Java?</li>
<li>Wie unterscheiden sich in C++ virtuelle und nicht virtuelle Destruktoren?
Schreiben Sie ein kurzes Programm zur Verdeutlichung.</li>
<li>Was passiert, wenn in C++ aus einem Destruktor heraus eine virtuelle
Methode aufgerufen wird?</li>
</ol>
<p><em>Hinweis:</em>
Möglicherweise müssen jeweils mehrere Fälle betrachtet werden!</p>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

<article class="default">
<h1>C&#43;&#43;: Templates</h1>



    



    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-graduation-cap"></i> TL;DR
  </div>
  <div class="box-content">
<p>In C++ können Funktionen über <strong>Funktions-Templates</strong> definiert werden. Dafür stellt man
ein <code>template &lt;typename T&gt;</code> mit einer Aufzählung <code>typename T</code> aller Template-Parameter der
Funktionsdefinition voran. In der Funktion kann man dann den Typ <code>T</code> wie einen normalen
anderen Typ nutzen.</p>
<p>Funktions-Templates sind (vollständig) spezialisierbar. Dazu wiederholt man die komplette
Funktionsdefinition (inkl. der dann leeren Template-Deklaration <code>template &lt;&gt;</code>) und legt alle
Template-Parameter über die Funktionssignatur fest. Alle Spezialisierungen müssen nach dem
eigentlichen (&quot;primären&quot;) Funktions-Template formuliert werden.</p>
<p>Funktions-Templates sind überladbar mit &quot;normalen&quot; Funktionen und anderen Funktions-Templates.</p>
<p>Beim Aufruf kann man die Template-Parameter entweder selbst festlegen (über eine Auflistung der
Typen in spitzen Klammern hinter dem Funktionsnamen) oder den Compiler inferieren lassen. Dabei
wird die am besten &quot;passende&quot; Variante genutzt:</p>
<ol>
<li>Zuerst die <strong>exakt</strong> passende normale Funktion,</li>
<li>dann ein passendes spezialisiertes Template (bei mehreren passenden spezialisierten
Templates das am meisten spezialisierte Template),</li>
<li>dann das allgemeine (&quot;primäre&quot;) Template,</li>
<li>ansonsten die normale Funktion mit impliziten Casts.</li>
</ol>
<p>In C++ können Klassen als <strong>Klassen-Templates</strong> definiert werden. Dafür stellt man ein
<code>template &lt;typename T&gt;</code> mit einer Aufzählung <code>typename T</code> aller Template-Parameter der
Klassendefinition voran. In der Klasse kann man dann den Typ <code>T</code> wie einen normalen
anderen Typ nutzen. Bei der Implementierung der Methoden außerhalb der Klassendeklaration
muss die Template-Deklaration (<code>template &lt;typename T&gt;</code>) wiederholt werden.</p>
<p>Klassen-Templates sind spezialisierbar (vollständig und partiell). Dazu wiederholt man
die komplette Klassendefinition (inkl. der Template-Deklaration <code>template &lt;typename T&gt;</code>)
und entfernt aus der Template-Deklaration alle Typen, die man konkret festlegen möchte.
Hinter dem Klassennamen werden dann in spitzen Klammern alle Typen (verbleibende
Typ-Parameter aus der Template-Deklaration sowie die konkretisierten Typen) in der
Reihenfolge angegeben, wie sie im primären Template vorkamen. Spezialisierungen müssen
nach dem eigentlichen (&quot;primären&quot;) Klassen-Template formuliert werden.</p>
<p>Klassen- und Funktions-Templates können gemischt werden.</p>
<p>Bei der Instantiierung werden die Template-Parameter in spitzen Klammern hinter dem
Klassennamen spezifiziert.</p>
<p>Template-Parameter können einen konkreten (aufzählbaren) Typ haben (beispielsweise
<code>int</code>). Template-Parameter können Default-Werte haben.</p>
<p>Im Unterschied zu Java gibt es <strong>keine</strong> Type-Erasure. Der C++-Compiler stellt je <strong>instantiiertem</strong>
Template eine <em>konkrete</em> Funktion bzw. Klasse bereit! Im resultierenden Code sind also nur diejenigen
Funktionen und Klassen enthalten, die aus einem tatsächlichen Aufruf resultieren, das Template selbst
ist nicht im Code enthalten. Dies gilt auch für Bibliotheken, weshalb sich diese beiden Konzepte etwas
&quot;quer liegen&quot;.</p>
  </div>
</div>




    
    
    
    





    
    
        
        
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-podcast"></i> Videos (YouTube)
  </div>
  <div class="box-content">
<ul> <li><a href='https://youtu.be/cOmV_2OTG5k' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>VL C++: Vererbung und Polymorphie</a></li></ul>
  </div>
</div>




    
    
    
    






    
    
    
    






    
    





    

    

    
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
        
        
        
        
    
    

    <div class="box notices cstyle tip">
  <div class="box-label">
    <i class="fas fa-lightbulb"></i> Lernziele
  </div>
  <div class="box-content">
<ul> <li>(K2) Unterschied zu Java bei der Nutzung von Templates</li> <li>(K3) Erstellen und spezialisieren von Funktions-Templates</li> <li>(K3) Unterschied zwischen überladenen Funktionen und Funktions-Templates</li> <li>(K3) Aufruf (Nutzung) von Funktions-Templates</li> <li>(K2) Unterschied zu Java bei der Nutzung von Templates</li> <li>(K3) Erstellen und spezialisieren von Klassen-Templates</li> <li>(K3) Nutzung von Methoden-Templates innerhalb von Klassen-Templates</li> <li>(K3) Aufruf (Nutzung) von Klassen-Templates</li></ul>
  </div>
</div>




    <h2 id="vergleichsfunktion-für-zwei-integer">Vergleichsfunktion für zwei Integer?</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">cmp</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>Und für <code>double</code>?</li>
<li>Und für <code>string</code>?</li>
<li>...</li>
</ul>
<p>=&gt; <span class='alert'>Präprozessor-Makro?</span></p>
<p>=&gt; <span class='alert'>Funktionen überladen?</span></p>
<ul>
<li><strong>Überladen von Funktionen</strong>:
<ul>
<li>Ähnliche Funktionalität für unterschiedliche Datentypen</li>
<li>Mühselig, wenn <span class='alert'>exakt gleiche</span> Funktionalität!</li>
</ul>
</li>
<li>(bessere) <strong>Antwort</strong>: Funktions-Templates
<ul>
<li>Templates: Funktionen mit parametrisierten Datentypen</li>
<li>Deklaration/Definition für (zunächst) unbestimmte Datentypen</li>
<li>Bei Verwendung der Funktion:</li>
<li>Konkretisierung der Datentypen</li>
<li>Compiler erzeugt automatisch passende Funktionsinstanz</li>
</ul>
</li>
</ul>
<h2 id="definition-von-funktions-templates">Definition von Funktions-Templates</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<ul>
<li>
<p>Statt <code>typename</code> kann auch <code>class</code> geschrieben werden</p>
</li>
<li>
<p>Konvention:</p>
<ul>
<li><code>typename</code> wenn sowohl Klassen als auch Basistypen</li>
<li><code>class</code> falls eher Klassen-Typen</li>
</ul>
<p>=&gt; <code>class</code> gilt als veraltet, deshalb immer <code>typename</code> verwenden!</p>
</li>
<li>
<p>Bei mehreren Typen &quot;<code>typename NAME</code>&quot; wiederholen
(Komma-separierte Liste in <code>&lt;</code> und <code>&gt;</code>)</p>
<p>beispielsweise so: (Achtung, soll nur die Verwendung demonstrieren, hat sonst keinen Sinn)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T1, <span style="color:#66d9ef">typename</span> T2, <span style="color:#66d9ef">typename</span> T3<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>T1 cmp(<span style="color:#66d9ef">const</span> T2 <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T3 <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ul>
<p>Vorsicht: Im Beispiel oben muss <code>operator&lt;</code> für die verwendeten Typen
<code>T</code> implementiert sein! (sonst Fehler zur Compile-Zeit)</p>
<h2 id="bestimmung-der-template-parameter-i-typ-inferenz">Bestimmung der Template-Parameter I: Typ-Inferenz</h2>
<p>Das Funktions-Template wird wie eine normale Funktion aufgerufen ...
=&gt; Der Compiler inferiert Typen und erzeugt passende Funktionsinstanz(en).</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cmp(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">10</span>);                         <span style="color:#75715e">// cmp(int, int)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp(<span style="color:#ae81ff">2.2</span>, <span style="color:#ae81ff">10.1</span>);                     <span style="color:#75715e">// cmp(double, double)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp(string(<span style="color:#e6db74">&#34;abc&#34;</span>), string(<span style="color:#e6db74">&#34;ABC&#34;</span>));  <span style="color:#75715e">// cmp(string, string)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3.4</span>);                        <span style="color:#75715e">// Compiler-FEHLER!!!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div>
<p>Vorsicht bei Typ-Inferenz: Typen müssen <em>exakt</em> passen!</p>
<h2 id="bestimmung-der-template-parameter-ii-explizite-angabe">Bestimmung der Template-Parameter II: Explizite Angabe</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cmp<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#e6db74">&#39;A&#39;</span>);     <span style="color:#75715e">// cmp(int, int)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3.4</span>);       <span style="color:#75715e">// cmp(int, int)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div>
<p>Bei expliziter Angabe der Typen beim Aufruf (<code>cmp&lt;int&gt;</code>) kann der Compiler automatisch casten.</p>
<h2 id="typ-inferenz-und-explizite-bestimmung-mischen">Typ-Inferenz und explizite Bestimmung mischen</h2>
<ul>
<li>Compiler nutzt die vorgegebenen Typ-Parameter, ...</li>
<li>... inferiert die restlichen, und ...</li>
<li>... castet notfalls die Parameter</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T1, <span style="color:#66d9ef">typename</span> T2, <span style="color:#66d9ef">typename</span> T3<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> fkt(T2 a, T3 b, T2 c, <span style="color:#66d9ef">int</span> d) { ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    fkt<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span><span style="color:#f92672">*</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">42</span>, <span style="color:#e6db74">&#34;HUHU&#34;</span>, <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#ae81ff">99</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>=&gt; In Parameterliste nicht vorkommende Typ-Parameter <strong>explizit</strong> angeben!</p>
<ul>
<li>Reihenfolge der Angabe der Typen in spitzen Klammern beim Aufruf wie in
Template-Deklaration</li>
<li>Wenn ein Typ-Parameter nicht in der Parameterliste der Funktion vorkommt, ist
eine Inferenz für den Compiler unmöglich. Deshalb <strong>muss</strong> dieser Typ beim
Aufruf explizit in der Liste mit den spitzen Klammern angegeben werden!</li>
<li>Im Beispiel oben:
<ul>
<li>
<p><code>fkt&lt;a, b, c&gt;(...)</code>: <code>a</code> wäre der Typ für <code>T1</code>, <code>b</code> für <code>T2</code>, <code>c</code> für <code>T3</code></p>
</li>
<li>
<p>Mit <code>fkt&lt;..., int&gt;(...)</code> beim Aufruf wird <code>T2</code> zu <code>int</code> und damit für
Parameter <code>c</code> der Char als <code>int</code> interpretiert (<code>T3</code> wird inferiert)</p>
<p>Ohne <code>&lt;..., int&gt;</code> beim Aufruf gibt es ein Problem beim Erkennen von <code>T2</code>: <code>int</code> vs. <code>char</code> (<code>a=42</code>, <code>c='a'</code>) ...</p>
</li>
</ul>
</li>
</ul>
<h2 id="typ-inferenz-funktioniert-nicht-immer">Typ-Inferenz funktioniert nicht immer!</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>T zero() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> x, y;
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> zero(); <span style="color:#75715e">// Fehler: couldn&#39;t deduce template parameter &#39;T&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    y <span style="color:#f92672">=</span> zero<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(); <span style="color:#75715e">// korrekter Aufruf
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div>
<p>Die Funktion hat keine Parameter - der Compiler hat also keine Chance, den Typ <code>T</code> zu
inferieren. In diesem Fall <em>muss</em> der Typ beim Aufruf explizit angegeben werden.</p>
<h2 id="spezialisierung-von-funktions-templates">Spezialisierung von Funktions-Templates</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Primaeres Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">abs</span>(a)<span style="color:#f92672">&lt;</span>abs(b);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Spezialisierte Templates <span class='alert'><strong>nach</strong></span> &quot;primärem&quot; Template definieren</p>
<p><strong>Achtung</strong>: Reihenfolge der Deklaration/Definition ist <em>wichtig</em>. Immer zuerst das
allgemeine (&quot;primäre&quot;) Template definieren, danach dann die Spezialisierungen!
Anderenfalls gibt es &quot;seltsame&quot; Fehlermeldungen vom Compiler oder sogar seltsames
Verhalten.</p>
<p><strong>Achtung</strong>: Im Unterschied zu Klassen-Templates können Funktions-Templates nur
<strong>vollständig</strong> spezialisiert werden (d.h. bei mehreren Template-Parametern müssen
dann <em>alle</em> Template-Parameter konkret spezifiziert werden)!</p>
<p><em>Anmerkung</em>: Die Angabe der Typen in spitzen Klammern nach dem Funktionsnamen ist
freiwillig, so lange <em>alle</em> Typ-Parameter in der Parameterliste der Funktion auftauchen.
Man könnte die obige Spezialisierung also auch so schreiben (<code>cmp(</code> statt <code>cmp&lt;int&gt;(</code>):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">abs</span>(a)<span style="color:#f92672">&lt;</span>abs(b);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="alternativ-überladen-der-funktions-templates-mit-normalen-funktionen">Alternativ: Überladen der Funktions-Templates mit normalen Funktionen</h3>
<p>Überladen mit normalen Funktionen funktioniert wie bei spezialisierten
Templates, d.h. auch hier zuerst das primäre Template definieren, danach
eventuelle Spezialisierungen und danach Überladungen mit normalen Funktionen.</p>
<p>Allerdings gibt es Unterschiede für eventuell nötige Typumwandlungen der
Parameter beim Aufruf der Funktionen:</p>
<ul>
<li>In gewöhnlichen Funktionen sind automatische Typumwandlungen möglich</li>
<li>In (spezialisierten) Templates sind keine automatischen Typumwandlungen
erlaubt (sofern man mit Typ-Inferenz arbeitet, d.h. die Template-Typen
nicht beim Aufruf explizit angegeben werden)</li>
</ul>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(T a, T b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">cmp</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> abs(a)<span style="color:#f92672">&lt;</span>abs(b);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cmp(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">6</span>);          <span style="color:#75715e">// true:  überladene normale Funktion
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3.4</span>);        <span style="color:#75715e">// FALSE: überladene normale Funktion (Cast)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    cmp<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3.4</span>);   <span style="color:#75715e">// FALSE: Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></div>
<h3 id="aufruf-compiler-nimmt-die-am-besten-passende-variante">Aufruf: Compiler nimmt die am besten &quot;passende&quot; Variante:</h3>
<ul>
<li>Keine Template-Parameter beim Aufruf angegeben (d.h. Typ-Inferenz):
<ol>
<li>Zuerst <strong>exakt</strong> passende normale Funktion,</li>
<li>dann passendes spezialisiertes Template (bei mehreren passenden spezialisierten
Templates das am meisten spezialisierte Template, ohne Casts),</li>
<li>dann das allgemeine (&quot;primäre&quot;) Template (ohne Casts),</li>
<li>ansonsten normale Funktion mit impliziten Casts</li>
</ol>
</li>
<li>Template-Parameter beim Aufruf angegeben: am besten passendes Template</li>
</ul>
<p><em>Hinweis</em>: Durch reine Deklaration von Spezialisierungen (d.h. ohne die
entsprechende Implementierung) lässt sich die Instantiierung einer
Templatefunktion für bestimmte Typen verhindern. Beispiel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp(<span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> T <span style="color:#f92672">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> a<span style="color:#f92672">&lt;</span>b;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> cmp<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>a, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> <span style="color:#f92672">&amp;</span>b);</span></span></code></pre></div>
<p>Damit könnte man die <code>cmp</code>-Funktion nicht mehr für <code>int</code> benutzen (Compiler-
bzw. Linker-Fehler).</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/funktionsTemplates.cpp" target="_blank"><span class="title">Konsole: funktionsTemplates.cpp</span></a></span></div>
<h2 id="klassen-templates-in-c">Klassen-Templates in C++</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span> {
</span></span><span style="display:flex;"><span>    Matrix(<span style="color:#66d9ef">unsigned</span> rows <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">unsigned</span> cols <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> xyField;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><em>Hinweis</em>:
Template-Parameter innerhalb von Template-Parametern verursachen bei den
schließenden spitzen Klammern u.U. Parser-Probleme. Diese lassen sich durch
ein extra Leerzeichen (hat sonst keine Funktion!) umgehen: Statt
<code>vector&lt;vector&lt;T&gt;&gt; xyField;</code> besser <code>vector&lt;vector&lt;T&gt; &gt; xyField;</code>
schreiben.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> m1;
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> m2(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Template-Parameter gehören zur Schnittstelle und müssen bei der Instantiierung
angegeben werden. <code>Matrix m;</code> würde im obigen Beispiel <strong>nicht</strong> funktionieren.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Matrix<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>Matrix(<span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols) { ... }</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/matrix.cpp" target="_blank"><span class="title">Beispiel: matrix.cpp</span></a></span></div>
<h3 id="klassen-templates-in-c-variante-mit-konstanten">Klassen-Templates in C++ (Variante mit Konstanten)</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T, <span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span> {
</span></span><span style="display:flex;"><span>    Matrix();
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> xyField;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p>Template-Parameter können neben Typen auch konstante Werte (Basisdatentypen,
außer <code>float</code> und <code>double</code>) sein. Innerhalb der Klasse <code>Matrix</code> kann auf
die Werte von <code>rows</code> und <code>cols</code> zugegriffen werden.</p>
<p><em>Achtung</em>: <code>rows</code> und <code>cols</code> sind <strong>keine</strong> Attribute der Klasse <code>Matrix</code>!</p>
<p><em>Hinweis</em>: Konstanten als Template-Parameter funktioniert auch bei
Funktions-Templates.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> m1;
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> m2;
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span>string, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> m3;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/matrix2.cpp" target="_blank"><span class="title">Beispiel: matrix2.cpp</span></a></span></div>
<h3 id="beispiel-konstanten-als-template-parameter">Beispiel: Konstanten als Template-Parameter</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span> I<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> print() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> I;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">5</span><span style="color:#f92672">&gt;</span>();</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> u<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">MyClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> { X <span style="color:#f92672">=</span> u };
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#f92672">&lt;&lt;</span> MyClass<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;::</span>X <span style="color:#f92672">&lt;&lt;</span> endl;</span></span></code></pre></div>
<ul>
<li>Konstante muss explizit übergeben werden</li>
<li>Wert muss eine zur Compile-Zeit bekannte Konstante sein</li>
<li>Nur aufzählbare Typen für derartige Konstanten erlaubt
(z.B. <code>int</code>, aber nicht <code>double</code>)</li>
</ul>
<p><em>Anmerkung</em>:
Durch Konstruktion mit dem anonymen <code>enum</code> in der Klasse <code>MyClass</code> wird der
Wert der Konstanten &quot;gespeichert&quot; und kann später (von außen) abgefragt werden.
(Innerhalb der Klasse selbst können Sie natürlich jederzeit auf den Wert von
<code>u</code> zugreifen.)</p>
<p>Wollte man dies über ein normales Attribut erledigen, sähe der Code deutlich
komplexer aus (zusätzlich zur oben gezeigten Variante mit dem <code>enum</code> einmal
als statisches Attribut <code>Y</code> und einmal als &quot;normales&quot; Attribut <code>Z</code>):</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> u<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">MyClass</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> { X <span style="color:#f92672">=</span> u };
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">unsigned</span> Y;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">unsigned</span> Z;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    MyClass() <span style="color:#f92672">:</span> Z(u) {}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> u<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> MyClass<span style="color:#f92672">&lt;</span>u<span style="color:#f92672">&gt;::</span>Y <span style="color:#f92672">=</span> u;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> MyClass<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;::</span>X <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> MyClass<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;::</span>Y <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#f92672">&lt;&lt;</span> MyClass<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span>().Z <span style="color:#f92672">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Falls man mit <code>::</code> zugreifen wollte, müsste das Attribut <code>static</code> sein und
entsprechend außerhalb der Klasse initialisiert werden. Für ein &quot;normales&quot;
Attribut braucht man dann einen extra Konstruktor und muss den Aufruf dann
extra klammern: <code>MyClass&lt;2&gt;().Z</code> statt <code>MyClass&lt;2&gt;.Z</code>.</p>
<p>Die Variante mit dem <code>enum</code> werden Sie entsprechend sehr häufig in C++ finden!</p>
<h3 id="klassen-templates-mit-defaults">Klassen-Templates mit Defaults</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T <span style="color:#f92672">=</span> <span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">unsigned</span> rows <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">unsigned</span> cols <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span> {
</span></span><span style="display:flex;"><span>    Matrix();
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> xyField;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;&gt;</span> m1;    <span style="color:#75715e">// Leere spitze Klammern Pflicht!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> m2;
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span>string<span style="color:#f92672">&gt;</span> m3;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Leere spitze Klammern bei Klassen-Templates mit Default-Parameter Pflicht!</p>
<p><em>Hinweis</em>: Defaults für Template-Parameter waren zunächst nur für Klassen-Templates
erlaubt. Seit C++11 kann man solche Defaults auch bei Funktions-Templates
einsetzen.</p>
<div style="text-align: right;"><span class="btn cstyle interactive default"><a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/lecture/99-languages/src/matrix3.cpp" target="_blank"><span class="title">Beispiel: matrix3.cpp</span></a></span></div>
<h2 id="klassen-templates-in-c-spezialisieren">Klassen-Templates in C++ spezialisieren</h2>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span> {
</span></span><span style="display:flex;"><span>    Matrix(<span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols);
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span> vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> xyField;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span><span style="color:#f92672">&lt;</span>uint<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    Matrix(<span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols);
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span> vector<span style="color:#f92672">&lt;</span>uint<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> xyField;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div style="text-align: right;"><span class="badge cstyle default"><span class="badge-content">Hinweis auf Implementierung außerhalb der Klasse</span></span></div>
<p><strong>ACHTUNG</strong>: Implementierung außerhalb der Klasse: Bei den Methoden des voll
spezialisierten Templates das &quot;<code>template&lt;&gt;</code>&quot; <strong>weglassen</strong>! Alles andere ist
ein Syntax-Fehler.</p>
<p>Der Grund dafür bleibt ein Geheimnis des C++-Standards ... ;-)</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Implementierung fuer primaeres Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Matrix<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>Matrix(<span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols) { ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementierung fuer vollstaendig spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Matrix<span style="color:#f92672">&lt;</span>uint<span style="color:#f92672">&gt;::</span>Matrix(<span style="color:#66d9ef">unsigned</span> rows, <span style="color:#66d9ef">unsigned</span> cols) { ... }</span></span></code></pre></div>
<h3 id="partielle-spezialisierung">Partielle Spezialisierung</h3>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T1, <span style="color:#66d9ef">typename</span> T2<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Array</span> {
</span></span><span style="display:flex;"><span>    Array();
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>T1<span style="color:#f92672">&gt;</span> v;
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>T2<span style="color:#f92672">&gt;</span> w;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Array</span><span style="color:#f92672">&lt;</span>T, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    Array();
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> v;
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> w;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<p><strong>ACHTUNG</strong>: Implementierung außerhalb der Klasse: Bei den Methoden des partiell
spezialisierten Templates muss das &quot;<code>template&lt;T&gt;</code>&quot; wieder benutzt werden!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Implementierung fuer primaeres Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T1, <span style="color:#66d9ef">typename</span> T2<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Array<span style="color:#f92672">&lt;</span>T1, T2<span style="color:#f92672">&gt;::</span>Array() {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementierung fuer partiell spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Array<span style="color:#f92672">&lt;</span>T, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;::</span>Array() {}</span></span></code></pre></div>
<h3 id="vergleich-verschiedene-spezialisierungen">Vergleich verschiedene Spezialisierungen</h3>
<p>Allgemeine Templates vs. partiell spezialisierte Templates vs. vollständig spezialisierte Templates</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">// Primaeres (allgemeines) Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> line, <span style="color:#66d9ef">unsigned</span> column<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Matrix();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Partiell spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> line<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span><span style="color:#f92672">&lt;</span>line, <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Matrix();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Vollstaendig spezialisiertes Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Matrix</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Matrix();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Aufrufe
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span><span style="color:#f92672">&gt;</span> matrix;        <span style="color:#75715e">// allg. Template
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> vector;       <span style="color:#75715e">// partiell spez. Templ.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Matrix<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> dreiKreuzDrei; <span style="color:#75715e">// vollst. spez. Templ.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Implementierung
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> line, <span style="color:#66d9ef">unsigned</span> column<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Matrix<span style="color:#f92672">&lt;</span>line, column<span style="color:#f92672">&gt;::</span>Matrix() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;allgemeines Template&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> line<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>Matrix<span style="color:#f92672">&lt;</span>line, <span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;::</span>Matrix() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;partiell spezialisiertes Template&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Matrix<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;::</span>Matrix() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;vollstaendig spezialisiertes Template&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }</span></span></code></pre></div>
<p>Regel: Das am meisten spezialisierte Template wird verwendet.</p>
<h2 id="mischen-von-klassen--und-funktions-templates">Mischen von Klassen- und Funktions-Templates</h2>
<p>Sie können innerhalb eines Klassen-Templates auch ein Funktions-Template
(Methoden-Template) definieren. Bei der Implementierung außerhalb der
Klasse müssen entsprechend alle Template-Deklarationen wiederholt werden!</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T, <span style="color:#66d9ef">unsigned</span> n<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Array</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">enum</span> { size <span style="color:#f92672">=</span> n };
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> C <span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> copy_from(<span style="color:#66d9ef">const</span> C <span style="color:#f92672">&amp;</span>c);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    T data[n];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T, <span style="color:#66d9ef">unsigned</span> n<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> C<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> Array<span style="color:#f92672">&lt;</span>T,n<span style="color:#f92672">&gt;::</span>copy_from(<span style="color:#66d9ef">const</span> C <span style="color:#f92672">&amp;</span>c) { ... }</span></span></code></pre></div>
<h2 id="templates-java-vs-c">Templates: Java vs. C++</h2>
<ul>
<li>
<p>Templates sind nur <strong>Schablonen</strong>!</p>
<p>Die Definitionen der Templates werden nicht in den Object-Code kompiliert!
Erst bei der Instantiierung von Templates wird durch den Compiler eine
passende Instanz erzeugt und im Object-Code zur Nutzung abgelegt.</p>
</li>
<li>
<p><span class='alert'><strong>Unterschied zu Java</strong></span></p>
<ul>
<li>C++: Für <strong>jeden</strong> Aufruf/Typ eine passende <strong>Instanz</strong> (!)</li>
<li>Java: Nur <strong>eine</strong> Klasse mit gemeinsamen Obertyp</li>
</ul>
</li>
<li>
<p>Offener Code: <span class='alert'><strong>Templates im <code>.h</code>-File implementieren!</strong></span></p>
<p>Ohne die Template-Definition kann der Compiler keine Instanzen anlegen!</p>
</li>
<li>
<p>Bibliotheken und Templates passen nicht recht</p>
<p>Templates werden immer bei der ersten Verwendung instantiiert! Wird ein
Template nicht im zu kompilierenden Code verwendet, dann generiert der
Compiler auch nichts, was man in den Objektdateien finden könnte ...</p>
<ul>
<li>
<p>Nur instantiierte Templates sind in einer dynamischen/statischen
Bibliothek enthalten!</p>
</li>
<li>
<p>Falls Einsatz nur für wenige Typen vorgesehen
=&gt; Explizite Instantiierung:</p>
<ul>
<li>
<p>Entweder mit &quot;<code>template</code>&quot;: <code>template class Matrix&lt;5,5&gt;;</code>, oder</p>
</li>
<li>
<p>mit &quot;<code>typedef</code>&quot;: <code>typedef Matrix&lt;5,5&gt; Matrix5x5;</code></p>
<p>=&gt; Dann aber nur in exakt diesen Versionen in der Bibliothek
enthalten und entsprechend nur so nutzbar (sofern die
Template-Definition nicht zur Verfügung steht)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="wrap-up">Wrap-Up</h2>
<ul>
<li>
<p>Generische Programmierung (Funktions-Templates)</p>
<ul>
<li><code>template &lt;typename T&gt;</code> der Funktionsdefinition voranstellen</li>
<li>Funktions-Templates sind spezialisierbar und überladbar</li>
<li>Aufruf: Compiler nimmt die am besten &quot;passende&quot; Variante</li>
</ul>
</li>
<li>
<p>Generische Programmierung (Klassen-Templates)</p>
<ul>
<li>Funktionsweise analog zu Funktions-Templates</li>
<li>Bei Implementierung außerhalb der Deklaration: Template-Deklaration mitführen!</li>
<li>Klassen-Templates lassen sich partiell spezialisieren</li>
</ul>
</li>
<li>
<p>Compiler stellt je instantiiertes Template eine konkrete Funktion/Klasse bereit</p>
</li>
</ul>


    



    



    

    <div class="box notices cstyle note">
  <div class="box-label">
    <i class="fas fa-puzzle-piece"></i> Challenges
  </div>
  <div class="box-content">
<p><strong>Funktions-Templates</strong></p>
<ul>
<li>Wie kann eine Funktion als Funktions-Template definiert werden?</li>
<li>Wie wird ein Funktions-Template benutzt, d.h. wie wird es aufgerufen?
Worin liegt der Unterschied zu Java?</li>
<li>Wie kann ein Funktions-Template spezialisiert werden? Was ist dabei zu beachten?</li>
<li>Kann man Funktions-Templates überladen?</li>
<li>Worin liegt der Unterschied zwischen einem spezialisierten Funktions-Template
und einem überladenen Funktions-Template?</li>
</ul>
<p><strong>Funktions-Templates in C++</strong></p>
<ol>
<li>
<p>Schreiben Sie in C++ eine Funktion <code>invert()</code>, die zu einem übergebenen
numerischen Wert den negativen Wert zurückgibt. Realisieren Sie die
Funktion als Funktions-Template.</p>
<p>Testen Sie Ihre Implementierung mit den Typen <code>int</code>, <code>double</code> und <code>short</code>.</p>
</li>
<li>
<p>Spezialisieren Sie das eben erstellte Funktions-Template, so daß <code>invert()</code>
auch für <code>string</code> aufgerufen werden kann. In diesem Fall soll der String
umgekehrt werden und zurückgeliefert werden, d.h. für die Eingabe von
&quot;abcde&quot; soll &quot;edcba&quot; zurück geliefert werden.</p>
<p>Testen Sie die Funktionen wiederum mit <code>int</code>, <code>double</code>, <code>short</code> und nun
auch <code>string</code>.</p>
</li>
<li>
<p>Schreiben Sie ein weiteres Funktions-Template <code>string getType(T t)</code> mit
Template-Spezialisierungen, die den Typ des Parameters <code>t</code> als String
zurückgibt. Für nicht bekannte Typen soll der String &quot;unbekannter Typ&quot;
zurückgeliefert werden.</p>
<p>Implementieren Sie mind. 3 Spezialisierungen.</p>
<p><em>Hinweis:</em> Verwenden Sie an dieser Stelle keine explizite Typüberprüfung (in
der Funktion)! Realisieren Sie die Reaktion auf unterschiedliche
Parametertypen ausschließlich mit Hilfe von Templates.</p>
</li>
<li>
<p>Erklären Sie folgenden Code-Schnipsel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#75715e">// Definition
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T2, <span style="color:#66d9ef">typename</span> T1<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> f(T1 a, T2 b, <span style="color:#66d9ef">int</span> c) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Aufruf
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    f<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span> <span style="color:#f92672">*&gt;</span>(<span style="color:#ae81ff">99</span>, <span style="color:#e6db74">&#34;Hello World&#34;</span>, <span style="color:#ae81ff">42</span>);</span></span></code></pre></div>
</li>
<li>
<p>Erklären Sie nun folgenden Code-Schnipsel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T2, <span style="color:#66d9ef">typename</span> T1, <span style="color:#66d9ef">typename</span> T3<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> fkt(T2 a, T3 b, T2 c, <span style="color:#66d9ef">int</span> d) { ... }
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fkt</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b, <span style="color:#66d9ef">int</span> c, <span style="color:#66d9ef">int</span> d) { ... }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    fkt<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">void</span><span style="color:#f92672">*&gt;</span>(<span style="color:#ae81ff">42</span>, <span style="color:#e6db74">&#34;HUHU&#34;</span>, <span style="color:#e6db74">&#39;a&#39;</span>, <span style="color:#ae81ff">99</span>);
</span></span><span style="display:flex;"><span>    fkt<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>    fkt(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
</li>
</ol>
<p><strong>Klassen-Templates und partielle Spezialisierung</strong></p>
<p>Definieren Sie ein Klassen-Template zum Umgang mit Vektoren. Diese sollen
Elemente eines unbestimmten Typs (Typ-Variable) aufnehmen. Die Größe des
Vektors soll ebenfalls als Typ-Variable in die Template-Definition eingehen.
Definieren Sie den <code>operator*</code> für das Skalarprodukt von zwei Vektoren.</p>
<p>Erstellen Sie eine partielle Spezialisierung des Klassen-Templates zur
Repräsentation von einstelligen Vektoren (Skalare).</p>
<p>Schreiben Sie ein <code>main()</code>-Funktion, instantiieren einige Vektoren und berechnen
Sie die Skalarprodukte.</p>
<p><strong>Beispiel aus dem echten Leben</strong></p>
<p>Erklären Sie das folgende Beispiel eines Klassen-Templates <code>RingBuffer</code>:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T, size_t size, <span style="color:#66d9ef">typename</span> alloc_t <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>allocator<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RingBuffer</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">typedef</span> AllocatorType alloc_t;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    RingBuffer(<span style="color:#66d9ef">const</span> alloc_t <span style="color:#f92672">&amp;</span>rb_allocator <span style="color:#f92672">=</span> alloc_t());
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">~</span>RingBuffer();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">writeBuffer</span>(T <span style="color:#f92672">*</span>data);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    alloc_t m_allocator;
</span></span><span style="display:flex;"><span>    size_t count;
</span></span><span style="display:flex;"><span>    size_t head;
</span></span><span style="display:flex;"><span>    T <span style="color:#f92672">**</span>elems;
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
  </div>
</div>



    




    




    
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                    
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
        
        

        
            
            
            
            
            

            
            
                
                    
                
            
                
                    
                
            
            
            
            
            
            

            
            
                
            
            
                
                
                
            
            
            
        
    
    

    <div class="box notices cstyle info">
  <div class="box-label">
    <i class="fas fa-book-reader"></i> Quellen
  </div>
  <div class="box-content">
<ul> <li id='id_Breymann2011'>[Breymann2011] <strong>Der C++ Programmierer</strong><br>Breymann, U., Hanser, 2011. ISBN <a href='https://fhb-bielefeld.digibib.net/openurl?isbn=978-3-446-42691-7' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'>978-3-446-42691-7</a>.</li> <li id='id_cppreference.com'>[cppreference.com] <a href='https://en.cppreference.com/w/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C and C++ Reference</strong></a><br>, cppreference.com.</li> <li id='id_cprogramming.com'>[cprogramming.com] <a href='https://www.cprogramming.com/' class='icon reading' target='_blank' rel='nofollow noopener noreferrer'><strong>C Programming and C++ Programming</strong></a><br>Allain, A. und Hoffer, A..</li></ul>
  </div>
</div>






<footer class="footline"><div style="color: darkgray; font-size: small;">
<p style="margin-left: 4rem; margin-right: 4rem; margin-top: 6rem;">
<!-- https://creativecommons.org/choose/ -->
<a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0;margin:0;display:inline;" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
Unless otherwise noted, <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor">this work</a> by <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/bcg7" property="cc:attributionName" rel="cc:attributionURL">BC George</a>, <a xmlns:cc="https://creativecommons.org/ns#" href="https://github.com/cagix" property="cc:attributionName" rel="cc:attributionURL">Carsten Gips</a>, and <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/graphs/contributors">contributors</a> is licensed under <a rel="license" href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/LICENSE.md">CC BY-SA 4.0</a>.
See the <a href="https://github.com/Compiler-CampusMinden/CB-Vorlesung-Bachelor/blob/master/CREDITS.md">credits</a> for a detailed list of contributing projects.

</p>
</div>

</footer>
</article>

          </section>
          </section>
        </div>
      </main>
    </div>
    <script src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/js/clipboard.min.js?1739788418" defer></script>
    <script src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/js/perfect-scrollbar.min.js?1739788418" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/js/mathjax/tex-mml-chtml.js?1739788418"></script>
    <script src="/elearning/data/FH-Bielefeld/lm_data/lm_1360443/js/theme.js?1739788418" defer></script>
  </body>
</html>
